From: <Saved by Blink>
Snapshot-Content-Location: https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.nfan5rg6kjgk
Subject: Exactly Once Delivery and Transactional Messaging in Kafka
Date: Tue, 16 Dec 2025 10:44:08 +0100
MIME-Version: 1.0
Content-Type: multipart/related;
	type="text/html";
	boundary="----MultipartBoundary--l5EobY2HOwU8mZA5J1Z99hAuscRO8VrQdxYCAoloXq----"


------MultipartBoundary--l5EobY2HOwU8mZA5J1Z99hAuscRO8VrQdxYCAoloXq----
Content-Type: text/html
Content-ID: <frame-F37999CC20D0205AB4BFDC0E4D65C792@mhtml.blink>
Content-Transfer-Encoding: binary
Content-Location: https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.nfan5rg6kjgk

<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" type="text/css" href="cid:css-43bb071c-f06d-4f89-bd95-88e4c87a6213@mhtml.blink" /><link rel="stylesheet" type="text/css" href="cid:css-055338e0-39fb-46ac-b2bf-a7e19edebd0d@mhtml.blink" /><link rel="stylesheet" type="text/css" href="cid:css-14ef40e0-09cd-463b-ba26-3f887f67df80@mhtml.blink" /><title>Exactly Once Delivery and Transactional Messaging in Kafka</title><link rel="shortcut icon" href="https://ssl.gstatic.com/docs/documents/images/kix-favicon-2023q4.ico"><meta property="og:title" content="Exactly Once Delivery and Transactional Messaging in Kafka"><meta property="og:type" content="article"><meta property="og:site_name" content="Google Docs"><meta property="og:url" content="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1&amp;usp=embed_facebook"><meta property="og:image" content="https://lh7-us.googleusercontent.com/docs/AHkbwyKCbbHZ7MLVqLTSeH_utIIU50e-TEiqDLVv8e0dxGFR132gvp-OXeeCSrktJQJ3WcDkOldDKy3mj4CXVKdthn_2rZqQrdeeX-pqBKBH9yvNsA0jfp-X=w1200-h630-p"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="og:description" content="Exactly Once Delivery and Transactional Messaging in Kafka The definitive design. Update History 2017.02.22 Message key and value are no longer optional fields as indicated through attributes. 2017.02.15 Removed BeginTxnRequest in favor of allowing the transaction to be started implicitly upon re..."><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=0"><meta name="referrer" content="strict-origin-when-cross-origin"></head><body jsaction="u0pjoe:.CLIENT"><div id="docs-ml-header-id" class="docs-ml-header"><span class="docs-ml-header-item docs-ml-header-drive-link"><div id="docs-ml-header-drive-link-aria-label" style="display:none;">Accéder à Drive</div><a href="https://drive.google.com/u/0?usp=docs_web" aria-labelledby="docs-ml-header-drive-link-aria-label" role="button"><div class="docs-ml-header-icon-container"><div class="docs-ml-icon docs-ml-header-icon docs-ml-arrow-back-dir"><div class="docs-ml-img-container docs-ml-img docs-ml-arrow-back-icon"></div></div></div></a></span><span class="docs-ml-header-item docs-ml-header-document-title"><div class="docs-ml-header-document-title-text">Exactly Once Delivery and Transactional Messaging in Kafka</div></span></div><div class="app-container"><div class="doc-container"><div class="doc"><div class="doc-content" style="background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt"><div><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p></div><p class="title" id="h.xq0ee1vnpz4o" style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:26pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:24pt;font-family:&quot;Arial&quot;;font-style:normal">Exactly Once Delivery and Transactional Messaging in Kafka</span></p><p class="subtitle" id="h.i4ub5zye01nh" style="padding-top:0pt;margin:0;color:#666666;padding-left:0;font-size:15pt;padding-bottom:16pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:left;padding-right:0"><span>The definitive design.</span></p><h1 id="h.pxd1n1pvutgj" style="padding-top:20pt;margin:0;color:#000000;padding-left:0;font-size:20pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:&quot;Arial&quot;;font-style:normal">Update History</span></h1><h3 id="h.7mkuz62dyql" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2017.02.22</span></h3><ul class="lst-kix_9r3d8uancgeq-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Message key and value are no longer optional fields as indicated through attributes.</span></li></ul><h3 id="h.yrbjdxvtr013" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2017.02.15</span></h3><ul class="lst-kix_re52shiykht8-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Removed </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">BeginTxnRequest</span><span>&nbsp;in favor of allowing the transaction to be started implicitly upon receiving the first </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">AddPartitionToTxnRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Moved the transaction timeout that was previously passed in </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">BeginTxnRequest</span><span>&nbsp;into </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InitPidRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Re-added MessageSetSize field to </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ProduceRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. Although it is not strictly necessary, it makes parsing the request much easier.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Clarified the semantics of transactionalId expiration. It is based on the age of the most recent transaction, not on the time the InitPIDRequest was received. </span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Updated the doc to indicate that there will be only one PID snapshot file. There was no good reason to keep two.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Added a section on metrics.</span></li></ul><h3 id="h.4vwxtw8qa5ci" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2017.02.13</span></h3><ul class="lst-kix_brzd8bm9vgv1-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Changed MaxTimestampDelta to MaxTimestamp in the MessageSet.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Added TransactionTimeoutMs in BeginTxnRequest. Also added a new error : InvalidTransactionTimeout</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Added configurations for the transaction state log topic.</span></li></ul><h3 id="h.i8usz7jt7ms6" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2017.02.07</span></h3><ul class="lst-kix_3yaj3fyh3cgu-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Remove message-level CRC and deprecate client checksum APIs.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Individual message timestamps are variable length and relative to an initial timestamp stored at the message set.</span></li></ul><h3 id="h.pcbwemhd5rbm" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2017.02.03</span></h3><ul class="lst-kix_f9adxqm8wtcr-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Added TransactionalId to the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.mkk6ckzh7jxl" style="color:inherit;text-decoration:inherit">ProduceRequest</a></span><span>&nbsp;and added section to describe authorization of produce requests using the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ProducerTransactionalId</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;resource.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>The </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.r6klddrx9ibz" style="color:inherit;text-decoration:inherit">AddPartitionsToTxn</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;API requires Topic Write permission for all topics included in the request.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>The </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.jtpvkrldhb7" style="color:inherit;text-decoration:inherit">WriteTxnMarker</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;API requires ClusterAction permission on the Cluster.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="font-weight:400;font-family:&quot;Courier New&quot;">GroupCoordinatorRequest</span><span>&nbsp;renamed to </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">FindCoordinatorRequest</span><span>&nbsp;since there is no group for transactional producers.</span></li></ul><h3 id="h.vanysvwh06z8" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2017.02.01</span></h3><ul class="lst-kix_r9g9j9mj19b1-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Changed AppID to TransactionalId.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Added notes on </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.u76s202ebj43" style="color:inherit;text-decoration:inherit">client compatibility</a></span><span>&nbsp;and </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.tiigsrv40pcn" style="color:inherit;text-decoration:inherit">third-party authorizers</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;to migration notes.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="font-weight:400;font-family:&quot;Courier New&quot;">InitPIDRequest</span><span>&nbsp;renamed to </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InitPidRequest</span><span>.</span></li></ul><h3 id="h.9me0nxchj3gz" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2017.01.27</span></h3><ul class="lst-kix_69cgk215qz5l-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Provided default values for added client / broker configs.</span></li></ul><h3 id="h.bfgd93xaigrf" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2017.01.26</span></h3><ul class="lst-kix_69cgk215qz5l-0" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Added section on transaction coordinator </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.3q05uee3vqcq" style="color:inherit;text-decoration:inherit">authorization</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="font-weight:400;font-family:&quot;Courier New&quot;">AddOffsetCommitsToTxn</span><span>&nbsp;RPC renamed to </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">AddOffsetsToTxn</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="font-weight:400;font-family:&quot;Courier New&quot;">UpdateTxn</span><span>&nbsp;RPC renamed to </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">WriteTxnMarker</span><span>.</span></li></ul><h3 id="h.2eud57xy692z" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2017.01.25</span></h3><ul class="lst-kix_15r02pw2hvsa-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Added a Future work section for feedback which should be incorporated in version 2.</span></li></ul><h3 id="h.2n0rz78mn9a0" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2017.01.24</span></h3><ul class="lst-kix_pmwlevr2di06-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Reworked the schema of transaction </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.mylukj7bg1rf" style="color:inherit;text-decoration:inherit">control messages</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;so that we could include the coordinator epoch, which is needed to fence zombie transaction coordinators.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Included the schema for the </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.vjqzk4b5fdhg" style="color:inherit;text-decoration:inherit">PID snapshot file</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Added producer config to </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.qomrk2mk882" style="color:inherit;text-decoration:inherit">enable idempotence</a></span><span>.</span></li></ul><h3 id="h.cczdozou5271" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2017.01.20</span></h3><ul class="lst-kix_kb150t1bns3n-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>The </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">GroupType</span><span>&nbsp;field in </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.97qeo7mkx9jx" style="color:inherit;text-decoration:inherit">GroupCoordinatorRequest</a></span><span>&nbsp;was renamed to </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">CoordinatorType</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Added version 2 of </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.d2pvxax47irz" style="color:inherit;text-decoration:inherit">ListOffsetRequest</a></span><span>&nbsp;to give the client a way to find a partition’s LSO in order to support </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">seekToEnd()</span><span>&nbsp;in </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">READ_COMMITTED</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>LSO has been added to the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.p3hvy6kufvd1" style="color:inherit;text-decoration:inherit">FetchResponse</a></span><span>&nbsp;to be able to compute consumer lag in </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">READ_COMMITTED</span><span>.</span></li></ul><h3 id="h.o5trbd2fetr" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2017.01.19</span></h3><ul class="lst-kix_8e86lum2i6eo-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Incorporated </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://docs.google.com/document/d/1Rlqizmk7QCDe8qAnVW5e5X8rGvn6m2DCR3JR2yqwVjc/edit%23heading%3Dh.8gn43c4xxueb&amp;sa=D&amp;source=editors&amp;ust=1765881839928374&amp;usg=AOvVaw1QwMPd5a6Zao3IXulWRUMA" style="color:inherit;text-decoration:inherit">abort index proposal</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>The </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">NoPidMapping</span><span>&nbsp;error code was changed to </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InvalidPidMapping</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;to also express the case where the PID passed in a request is different from that stored in the transaction coordinator.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Idempotent producers that do not need transactions can send </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InitPidRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;to any broker with a null TransactionalId in order to be assigned a PID.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Slight modification to handling of </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.aqrq1dgbix3a" style="color:inherit;text-decoration:inherit">EndTxnRequest</a></span><span>&nbsp;for the edge case in which the coordinator fails after completing the transaction successfully, but before returning the response of the request to the client.</span></li></ul><h3 id="h.4w2kfdo7rwah" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2017.01.17</span></h3><ul class="lst-kix_5namkmhqnfpl-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Added a discussion on TransactionalIds and PIDs in the rejected alternatives.</span></li></ul><h3 id="h.1y6lo9t7x9fm" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2017.01.05</span></h3><ul class="lst-kix_utdw00xskxog-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Added a motivation subsection about how this proposal is guided by the streams usecase for transactions.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Updated the ‘Transactional Guarantees’ to include the guarantees for the consumer. Previously we only discussed guarantees for the producer. </span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Changed the consumer config from ‘fetch.mode’, to ‘isolation.level’, to be more inline with database terminology. The values were correspondingly changed as well.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Miscellaneous other changes based on KIP feedback. </span></li></ul><h3 id="h.av9hpc24qnps" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2016.11.29</span></h3><ul class="lst-kix_nit8j66s93ag-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Update transaction maker messages to use attribute fields for all controller flags.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Incorporated motivation, guarantees, and data flow sections from the </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://cwiki.apache.org/confluence/display/KAFKA/KIP-98%2B-%2BExactly%2BOnce%2BDelivery%2Band%2BTransactional%2BMessaging&amp;sa=D&amp;source=editors&amp;ust=1765881839933318&amp;usg=AOvVaw3j0GN8REh8aSDQZPjH9XcX" style="color:inherit;text-decoration:inherit">unified KIP doc</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></li></ul><h3 id="h.8pmtm5camx2t" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2016.11.25</span></h3><ul class="lst-kix_nit8j66s93ag-0" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Merge </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">TxnCoordinatorRequest</span><span>&nbsp;into </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">GroupCoordinatorRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;with bumped up version and a newly added field.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Update the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">send</span><span>&nbsp;function procedure with non-transactional producer.</span></li></ul><h3 id="h.73lthv2inwb4" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2016.11.23</span></h3><ul class="lst-kix_nit8j66s93ag-0" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="font-weight:400;font-family:&quot;Courier New&quot;">GetPIDRequest</span><span>&nbsp;changed to </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.z99xar1h2enr" style="color:inherit;text-decoration:inherit">InitPidRequest</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;and handling is updated to ensure that pending transactions are completed before returning.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="font-weight:400;font-family:&quot;Courier New&quot;">TransactionalId</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;was added to the transaction coordinator APIs. This makes it easier to check whether the client is contacting the right transaction coordinator.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Changed </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ProducerNotRecognized</span><span>&nbsp;error to </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">NoPIDMapping</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>New client configuration </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">transactional.id</span><span>&nbsp;and the TransactionalId parameter was removed from the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">initialize</span><span>&nbsp;API, which was renamed to </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">initTransactions</span><span>, to emphasize the fact that it is only needed when using transactions.</span></li></ul><h3 id="h.f85qnygt6fhu" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2016.11.22</span></h3><ul class="lst-kix_sfybiz7pn3rx-0 start" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="font-style:italic">Incorporated Idempotent Producer KIP </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;font-style:italic;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://docs.google.com/document/d/1RhldVRJN7xgRSRwJN-pHsuLyg6_PQw6w9IBtNCYRC2c/edit%23&amp;sa=D&amp;source=editors&amp;ust=1765881839936721&amp;usg=AOvVaw2FlhnY0fM8-1OSqOu0jfyB" style="color:inherit;text-decoration:inherit">doc</a></span><span style="font-style:italic">, including the message format changes.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="font-style:italic">Add </span><span style="font-weight:400;font-family:&quot;Courier New&quot;;font-style:italic">init</span><span style="font-style:italic">&nbsp;API to the producer.</span></li></ul><h3 id="h.1sgtf08i5b5t" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2016.11.21</span></h3><ul class="lst-kix_sfybiz7pn3rx-0" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="font-style:italic">Added </span><span style="font-weight:400;font-family:&quot;Courier New&quot;;font-style:italic">SendOffsets</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:italic">&nbsp;API to the producer.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="font-style:italic">Added </span><span style="font-weight:400;font-family:&quot;Courier New&quot;;font-style:italic">TxnOffsetCommitRequest</span><span style="font-style:italic">&nbsp;into the PRC protocol to not pollute the original </span><span style="font-weight:400;font-family:&quot;Courier New&quot;;font-style:italic">OffsetCommitRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:italic">.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="font-style:italic">Augment </span><span style="font-weight:400;font-family:&quot;Courier New&quot;;font-style:italic">AddOffsetsToTxnResponse</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:italic">&nbsp;with the consumer coordinator information.</span></li></ul><h3 id="h.e8uompjdxlrf" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">2016.11.19</span></h3><ul class="lst-kix_sfybiz7pn3rx-0" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="font-style:italic">Collapsed </span><span style="font-weight:400;font-family:&quot;Courier New&quot;;font-style:italic">CommitTxnRequest</span><span style="font-style:italic">&nbsp;and </span><span style="font-weight:400;font-family:&quot;Courier New&quot;;font-style:italic">AbortTxnRequest</span><span style="font-style:italic">&nbsp;with </span><span style="font-weight:400;font-family:&quot;Courier New&quot;;font-style:italic">UpdateTxnRequest</span><span style="font-style:italic">, rename </span><span style="font-weight:400;font-family:&quot;Courier New&quot;;font-style:italic">PrepareTxnRequest</span><span style="font-style:italic">&nbsp;to </span><span style="font-weight:400;font-family:&quot;Courier New&quot;;font-style:italic">EndTxnRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:italic">.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="font-style:italic">Added a discussion </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;font-style:italic;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#kix.uu5bwrue4nmm" style="color:inherit;text-decoration:inherit">section</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:italic">&nbsp;about fencing zombie writer WITHOUT requiring that same TransactionalIds always map to same PIDs.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:italic">Updated transaction status message format on the transaction topic.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:italic">Added producer-side exception handling description.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="font-style:italic">Updated logic in TransactionalId expiration, and also updated </span><span style="font-weight:400;font-family:&quot;Courier New&quot;;font-style:italic">GetPIDRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:italic">&nbsp;with TransactionalId.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:italic">Added a discussion section on committing offsets within a transaction.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:italic">Added a discussion section on updating log compaction for transactional messages. </span></li></ul><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.0;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>This document serves to describe the detailed implementation design of </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://cwiki.apache.org/confluence/display/KAFKA/KIP-98%2B-%2BExactly%2BOnce%2BDelivery%2Band%2BTransactional%2BMessaging&amp;sa=D&amp;source=editors&amp;ust=1765881839940901&amp;usg=AOvVaw3V56bgrJJ8rhMyNOEO2Uuy" style="color:inherit;text-decoration:inherit">KIP-98: Exactly Once Delivery and Transactional Messaging</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. Readers are highly recommended to read the KIP proposal itself before continue reading on this doc.</span></p><p style="padding-top:4pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.pxd1n1pvutgj" style="color:inherit;text-decoration:inherit">Update History</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.4vwxtw8qa5ci" style="color:inherit;text-decoration:inherit">2017.02.13</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.i8usz7jt7ms6" style="color:inherit;text-decoration:inherit">2017.02.07</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.pcbwemhd5rbm" style="color:inherit;text-decoration:inherit">2017.02.03</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.vanysvwh06z8" style="color:inherit;text-decoration:inherit">2017.02.01</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.9me0nxchj3gz" style="color:inherit;text-decoration:inherit">2017.01.27</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.bfgd93xaigrf" style="color:inherit;text-decoration:inherit">2017.01.26</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.2eud57xy692z" style="color:inherit;text-decoration:inherit">2017.01.25</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.2n0rz78mn9a0" style="color:inherit;text-decoration:inherit">2017.01.24</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.cczdozou5271" style="color:inherit;text-decoration:inherit">2017.01.20</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.o5trbd2fetr" style="color:inherit;text-decoration:inherit">2017.01.19</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.4w2kfdo7rwah" style="color:inherit;text-decoration:inherit">2017.01.17</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.1y6lo9t7x9fm" style="color:inherit;text-decoration:inherit">2017.01.05</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.av9hpc24qnps" style="color:inherit;text-decoration:inherit">2016.11.29</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.8pmtm5camx2t" style="color:inherit;text-decoration:inherit">2016.11.25</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.73lthv2inwb4" style="color:inherit;text-decoration:inherit">2016.11.23</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.f85qnygt6fhu" style="color:inherit;text-decoration:inherit">2016.11.22</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.1sgtf08i5b5t" style="color:inherit;text-decoration:inherit">2016.11.21</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.e8uompjdxlrf" style="color:inherit;text-decoration:inherit">2016.11.19</a></span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.rbxg0at9106a" style="color:inherit;text-decoration:inherit">Motivation</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.dc15d4ckm8e8" style="color:inherit;text-decoration:inherit">A little bit about Transactions and Streams.</a></span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.8chv2811xe3p" style="color:inherit;text-decoration:inherit">Summary of Guarantees</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.p4239g4vpvr7" style="color:inherit;text-decoration:inherit">Idempotent Producer Guarantees</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.mmbff48qbcw6" style="color:inherit;text-decoration:inherit">Transactional Guarantees</a></span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.m6x1258qinxn" style="color:inherit;text-decoration:inherit">Design Overview</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.f0eotchjto1f" style="color:inherit;text-decoration:inherit">Key Concepts</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.o8gioa9dcbnm" style="color:inherit;text-decoration:inherit">Transactional Messaging</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.cjy2azqx9su6" style="color:inherit;text-decoration:inherit">Offset Commits in Transactions</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.scppt9di2ipj" style="color:inherit;text-decoration:inherit">Control Messages for Transactions</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.azlgwswrwqxk" style="color:inherit;text-decoration:inherit">Producer Identifiers and Idempotency</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.k3ikkiat5ahm" style="color:inherit;text-decoration:inherit">Data Flow</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.6u8uypxxs15g" style="color:inherit;text-decoration:inherit">1. Finding a transaction coordinator -- the FindCoordinatorRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.dinbsctebcle" style="color:inherit;text-decoration:inherit">2. Getting a producer Id -- the InitPidRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:54pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.o6wvubfhzaqo" style="color:inherit;text-decoration:inherit">2.1 When a TransactionalId is specified</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:54pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.6562cfctwipz" style="color:inherit;text-decoration:inherit">2.2 When a TransactionalId is not specified</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.z9nopnb9z4o1" style="color:inherit;text-decoration:inherit">3. Starting a Transaction -- the beginTransaction API</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.9nlwbd1bifn0" style="color:inherit;text-decoration:inherit">4. The consume-transform-produce loop</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:54pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.dyen7q27r3i2" style="color:inherit;text-decoration:inherit">4.1 AddPartitionsToTxnRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:54pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.cckv7jc1fsy3" style="color:inherit;text-decoration:inherit">4.2 ProduceRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:54pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.ggt0dw5tk47r" style="color:inherit;text-decoration:inherit">4.3 AddOffsetsToTxnRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:54pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.4fiwu5vphzq9" style="color:inherit;text-decoration:inherit">4.4 TxnOffsetCommitRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.rhcuthaoajrw" style="color:inherit;text-decoration:inherit">5. Committing or Aborting a Transaction</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:54pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.rr7z72vuy251" style="color:inherit;text-decoration:inherit">5.1 EndTxnRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:54pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.bgy58z5pyzw7" style="color:inherit;text-decoration:inherit">5.2 WriteTxnMarkerRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:54pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.leodiv40s4w1" style="color:inherit;text-decoration:inherit">5.3 Writing the final Commit or Abort Message</a></span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.dz78fc8xlsd5" style="color:inherit;text-decoration:inherit">Transactional Producer</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.9f3l35ifpyku" style="color:inherit;text-decoration:inherit">Public APIs</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.8y3tle2c2qbm" style="color:inherit;text-decoration:inherit">Error Handling</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.78p7cgjqcbnx" style="color:inherit;text-decoration:inherit">Added Configurations</a></span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.kcryyiqr0svu" style="color:inherit;text-decoration:inherit">Transaction Coordinator</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.lzhx7x34k9er" style="color:inherit;text-decoration:inherit">Transaction Log</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.bg39k6ipxugn" style="color:inherit;text-decoration:inherit">Transaction Coordinator Startup</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.mcphg8e8gg24" style="color:inherit;text-decoration:inherit">Transaction Coordinator Request Handling</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.tqy9gm4d8r26" style="color:inherit;text-decoration:inherit">Coordinator-side Transaction Expiration</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.n3o7f9yqymnk" style="color:inherit;text-decoration:inherit">Coordinator TransactionalId Expiration</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.iixbdsg65d7k" style="color:inherit;text-decoration:inherit">Added Broker Configurations</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.3q05uee3vqcq" style="color:inherit;text-decoration:inherit">Authorization</a></span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.pabpm8thuoag" style="color:inherit;text-decoration:inherit">Broker</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.mylukj7bg1rf" style="color:inherit;text-decoration:inherit">Transaction Markers</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.8nl3bhqx81oo" style="color:inherit;text-decoration:inherit">Last Stable Offset Tracking</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.g0jqni2vcxg4" style="color:inherit;text-decoration:inherit">Aborted Transaction Index</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.ft6h1rabna7a" style="color:inherit;text-decoration:inherit">Compacting Transactional Data</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.kivcfzwo3zm1" style="color:inherit;text-decoration:inherit">PID-Sequence Management</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.vjqzk4b5fdhg" style="color:inherit;text-decoration:inherit">PID Snapshots</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.loujdamc9ptj" style="color:inherit;text-decoration:inherit">PID Expiration</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.m9yg71bk9idd" style="color:inherit;text-decoration:inherit">Coordinator-Broker request handling</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.d42xl2uz6r8j" style="color:inherit;text-decoration:inherit">Client-Broker request handling</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.cbb5tvp30uqe" style="color:inherit;text-decoration:inherit">Authorization</a></span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.qv0jmz7iwucq" style="color:inherit;text-decoration:inherit">Consumer Coordinator</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.yct0oc2nyy0h" style="color:inherit;text-decoration:inherit">Client-Coordinator request handling</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.ul06rr7fcm7w" style="color:inherit;text-decoration:inherit">Consumer Coordinator Startup</a></span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.od2aaa53rbv" style="color:inherit;text-decoration:inherit">Consumer</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.wvdrakld4019" style="color:inherit;text-decoration:inherit">Added Configurations and Consume Protocol</a></span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.pau6n6buvoee" style="color:inherit;text-decoration:inherit">Message Format</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.tp1lvfionrzv" style="color:inherit;text-decoration:inherit">Message Set Fields</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.c3oktixktv3b" style="color:inherit;text-decoration:inherit">Message Fields</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.fzysbytkejm4" style="color:inherit;text-decoration:inherit">Space Comparison</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.mo0ibmx05lcn" style="color:inherit;text-decoration:inherit">Client API Changes</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.4q83oxy4ofov" style="color:inherit;text-decoration:inherit">Migration Plan</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.u76s202ebj43" style="color:inherit;text-decoration:inherit">Client Compatibility</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.tiigsrv40pcn" style="color:inherit;text-decoration:inherit">Third-party Authorizers</a></span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.68og8h96rdei" style="color:inherit;text-decoration:inherit">RPC Protocol Summary</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.p3hvy6kufvd1" style="color:inherit;text-decoration:inherit">FetchRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.mkk6ckzh7jxl" style="color:inherit;text-decoration:inherit">ProduceRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.d2pvxax47irz" style="color:inherit;text-decoration:inherit">ListOffsetRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.97qeo7mkx9jx" style="color:inherit;text-decoration:inherit">FindCoordinatorRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.z99xar1h2enr" style="color:inherit;text-decoration:inherit">InitPidRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.r6klddrx9ibz" style="color:inherit;text-decoration:inherit">AddPartitionsToTxnRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.cqecubxziwie" style="color:inherit;text-decoration:inherit">AddOffsetsToTxnRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.2dnhvqqi7mr7" style="color:inherit;text-decoration:inherit">EndTxnRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.jtpvkrldhb7" style="color:inherit;text-decoration:inherit">WriteTxnMarkerRequest</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.5695qbm2hne" style="color:inherit;text-decoration:inherit">TxnOffsetCommitRequest</a></span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.hapfg5juqkyc" style="color:inherit;text-decoration:inherit">Future Work</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.oc95ehvigl7v" style="color:inherit;text-decoration:inherit">Recovering from correlated hard failures.</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.u5fw38sut3ef" style="color:inherit;text-decoration:inherit">Producer HeartBeat</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.3ie86d5xx5xx" style="color:inherit;text-decoration:inherit">Update Producer Interceptor</a></span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.eze4c49k73f6" style="color:inherit;text-decoration:inherit">Rejected Alternatives</a></span></p><p style="padding-top:3pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:4pt;line-height:1.0;margin-right:0;margin-left:18pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.lizhp2urqn59" style="color:inherit;text-decoration:inherit">On TransactionalIds and PIDs</a></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h1 id="h.rbxg0at9106a" style="padding-top:20pt;margin:0;color:#000000;padding-left:0;font-size:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:left;padding-right:0"><span>Motivation</span></h1><p style="padding-top:8pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;font-size:10.5pt">This document outlines a proposal for strengthening the message delivery semantics of Kafka. This builds on significant work which has been done previously, specifically, </span><span style="background-color:#ffffff;text-decoration-skip-ink:none;font-size:10.5pt;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://cwiki.apache.org/confluence/display/KAFKA/Idempotent%2BProducer&amp;sa=D&amp;source=editors&amp;ust=1765881840069035&amp;usg=AOvVaw13scqfIdXmwQ3a2pED_mnt" style="color:inherit;text-decoration:inherit">here</a></span><span style="background-color:#ffffff;font-size:10.5pt">&nbsp;and </span><span style="background-color:#ffffff;text-decoration-skip-ink:none;font-size:10.5pt;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://cwiki.apache.org/confluence/display/KAFKA/Transactional%2BMessaging%2Bin%2BKafka&amp;sa=D&amp;source=editors&amp;ust=1765881840069269&amp;usg=AOvVaw3GKVQGLRbpw4cJt_znvIv_" style="color:inherit;text-decoration:inherit">here</a></span><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="background-color:#ffffff;font-size:10.5pt">Kafka currently provides at least once semantics, viz. When tuned for reliability, users are guaranteed that every message write will be persisted at least once, without data loss. Duplicates may occur in the stream due to producer retries. For instance, the broker may crash between committing a message and sending an acknowledgment to the producer, causing the producer to retry and thus resulting in a duplicate message in the stream.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal">Users of messaging systems greatly benefit from the more stringent idempotent producer semantics, viz. Every message write will be persisted exactly once, without duplicates and without data loss -- even in the event of client retries or broker failures. These stronger semantics not only make writing applications easier, they expand the space of applications which can use a given messaging system.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal">However, idempotent producers don’t provide guarantees for writes across multiple TopicPartitions. For this, one needs stronger transactional guarantees, ie. the ability to write to several TopicPartitions atomically. By atomically, we mean the ability to commit a set of messages across TopicPartitions as a unit: either all messages are committed, or none of them are.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal">Stream processing applications, which are a pipelines of ‘consume-transform-produce’ tasks, absolutely require transactional guarantees when duplicate processing of the stream is unacceptable. As such, adding transactional guarantees to Kafka --a streaming platform-- makes it much more useful not just for stream processing, but a variety of other applications.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.dc15d4ckm8e8" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">A little bit about Transactions and Streams. </span></h2><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">In the previous section, we mentioned the main motivation for transactions is to enable exactly once processing in Kafka Streams. It is worth digging into this use case a little more, as it motivates many of the tradeoffs in our design. </span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff">Recall that data transformation using Kafka Streams typically happens through multiple stream processors, each of which is connected by Kafka topics. This setup is known as a stream topology and is basically a DAG where the stream processors are nodes and the connecting Kafka topics are vertices. This pattern is typical of all streaming architectures. You can read more about the Kafka streams architecture </span><span style="background-color:#ffffff;text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://kafka.apache.org/documentation/streams&amp;sa=D&amp;source=editors&amp;ust=1765881840075656&amp;usg=AOvVaw2QDJ_s-COIWCm1TRLWgucR" style="color:inherit;text-decoration:inherit">here</a></span><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff">As such, a transaction for Kafka streams would essentially encompass the input messages, the updates to the local state store, and the output messages. Including input offsets in a transaction motivates adding the </span><span style="background-color:#ffffff;font-weight:400;font-family:&quot;Courier New&quot;">sendOffsets</span><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;API to the Producer interface, described below. Further details will be presented in a separate KIP. </span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Further, stream topologies can get pretty deep --10 stages is not uncommon. If output messages are only materialized on transaction commits, then a topology which is N stages deep will take N x T to process its input, where T is the average time of a single transaction. So Kafka Streams requires speculative execution, where output messages can be read by downstream processors even before they are committed. Otherwise transactions would not be an option for serious streaming applications. This motivates the ‘read uncommitted’ consumer mode described later. </span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">These are two specific instances where we chose to optimize for the streams use case. As the reader works through this document we encourage him/her to keep this use case in mind as it motivated large elements of the proposal. </span></p><h1 id="h.8chv2811xe3p" style="padding-top:20pt;margin:0;color:#000000;padding-left:0;font-size:20pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>S</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:&quot;Arial&quot;;font-style:normal">ummary of Guarantees</span></h1><h2 id="h.p4239g4vpvr7" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Idempotent Producer </span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Guarantees</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>To implement idempotent producer semantics, we introduce the concepts of a </span><span style="font-style:italic">producer</span><span style="font-style:italic">&nbsp;id</span><span style="font-style:italic">, </span><span>henceforth called the </span><span style="font-style:italic">PID</span><span>, and </span><span style="font-style:italic">sequence numbers</span><span>&nbsp;for Kafka messages. Every new producer will be assigned a unique </span><span style="font-style:italic">PID</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;during initialization. The PID assignment is completely transparent to users and is never exposed by clients.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>For a given PID, sequence numbers will start from zero and be monotonically increasing, with one sequence number per topic partition produced to. The sequence number will be incremented for every message sent by the producer. </span><span>Similarly, the broker will increment the sequence number associated with the PID -&gt; topic partition pair for every message it commits for that topic partition.</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp; Finally, the broker will reject a message from a producer unless its sequence number is exactly one greater than the last committed message from that PID -&gt; topic partition pair. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>This ensures that, even though a producer must retry requests upon failures, every message will be persisted in the log exactly once. Further, since each new instance of a producer is assigned a new, unique, PID, we can only guarantee idempotent production within a single producer </span><span>session</span><span>. These semantics have been discussed previously in </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://cwiki.apache.org/confluence/display/KAFKA/Idempotent%2BProducer&amp;sa=D&amp;source=editors&amp;ust=1765881840083464&amp;usg=AOvVaw1DWZtkhbDvbnapIF1kpvMB" style="color:inherit;text-decoration:inherit">this document</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.mmbff48qbcw6" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Transactional Guarantees</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>As mentioned in the Motivation section, </span><span>transactional guarantees enable applications to batch consumed and produced messages into a single atomic unit</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>In particular, a ‘batch’ of messages in a transaction can be consumed from and written to multiple partitions, and are ‘atomic’ in the sense that writes will fail or succeed as a single unit. Consumers may or may not consume these messages atomically, depending on their configuration. This has been previously discussed </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://cwiki.apache.org/confluence/display/KAFKA/Transactional%2BMessaging%2Bin%2BKafka&amp;sa=D&amp;source=editors&amp;ust=1765881840085164&amp;usg=AOvVaw07pD1Xn_jHwYYpBSF3S-1U" style="color:inherit;text-decoration:inherit">here</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Additionally, stateful applications will also be able to ensure continuity across multiple sessions of the application. In other words, Kafka can guarantee idempotent production and transaction recovery across application bounces.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>To achieve this, we require that the application provides a unique id which is stable across all sessions of the application. For the rest of this document, we refer to such an id as the </span><span style="font-style:italic">TransactionalId</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. While there may be a 1-1 mapping between an TransactionalId and the internal PID, the main difference is the the TransactionalId is provided by users, and is what enables idempotent guarantees across producers sessions described below.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>When provided with such an </span><span style="font-style:italic">TransactionalId</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, Kafka will guarantee:</span></p><ol class="lst-kix_vwmkmidzq0q1-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Idempotent production across application sessions.</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;This is achieved by fencing off old generations when a new instance with the same TransactionalId comes online.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Transaction recovery across application sessions. If an application instance dies, the next instance can be guaranteed that any unfinished transactions have been completed (whether aborted or committed), leaving the new instance in a clean state prior to resuming work.</span></li></ol><p style="padding-top:8pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Note that the transactional guarantees mentioned here are from the point of view of the producer. On the consumer side, the guarantees are a bit weaker. In particular, we cannot guarantee that all the messages of a committed transaction will be consumed all together. This is for several reasons:</span></p><ol class="lst-kix_10q7n546cbqj-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:8pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:0pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">For compacted topics, some messages of a transaction maybe overwritten by newer versions.</span></li><li style="padding-top:8pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:0pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Transactions may straddle log segments. Hence when old segments are deleted, we may lose some messages in the first part of a transaction.</span></li><li style="padding-top:8pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:0pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Consumers may seek to arbitrary points within a transaction, hence missing some of the initial messages.</span></li><li style="padding-top:8pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:0pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff">Consumer may not consume from all the partitions which participated in a transaction. Hence they will never be able to read all the messages that comprised the transaction.</span></li></ol><h1 id="h.m6x1258qinxn" style="padding-top:20pt;margin:0;color:#000000;padding-left:0;font-size:20pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:&quot;Arial&quot;;font-style:normal">Design Overview</span></h1><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">In this section, we will present only a very high level overview of the key concepts and data flow of transactions. Further sections flesh these concepts out in detail.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.f0eotchjto1f" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Key Concepts</span></h2><h3 id="h.o8gioa9dcbnm" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">Transactional Messaging</span></h3><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The first part of the design is to enable producers to send a group of messages as a single transaction that either succeeds or fails atomically. In order to achieve this, we introduce a new server-side module called </span><span style="font-weight:700">transaction coordinator</span><span>, to manage transactions of messages sent by producers, and commit / abort the appends of these messages as a whole. The transaction coordinator maintains a </span><span style="font-weight:700">transaction log</span><span>, which is stored as an internal topic (we call it the </span><span style="font-weight:700">transaction topic</span><span>) to persist transaction status for recovery. Similar to the “offsets log” which maintains consumer offsets and group state in the internal </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">__consumer_offsets</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;topic, producers do not read or write directly to the transaction topic. Instead they talk to their transaction coordinator who is the leader broker of the hosted partition of the topic. The coordinator can then append the new state of the indicated transactions to its owned transaction topic partition.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>We will talk about how the transaction coordinator manages the transaction status from producer requests and persist it in the transaction log in the </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.n3o7f9yqymnk" style="color:inherit;text-decoration:inherit">Transaction Coordinator</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;section.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h3 id="h.cjy2azqx9su6" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Offset Commits </span><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">in Transactions</span></h3><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Many applications talking to Kafka include both consumers and producers, where the applications consume messages from input Kafka topics and produce new messages to output Kafka topics. To achieve “</span><span style="font-style:italic">exactly once</span><span>” messaging, we need to make the committing of the consumer offsets part of the producer transactions in order to achieve atomicity. </span><span>Otherwise, if there is a failure between committing the producer transaction and committing the consumer offsets, data duplicates or data loss will incur upon failover depending on the ordering of these two operations: if committing producer transaction executes first, then upon recovery the input messages will be re-consumed since offsets were not committed, hence </span><span style="font-style:italic">data duplicates</span><span>; if committing consumer offsets executes first, then upon recover the output messages that are failed to commit will not be re-send again, hence </span><span style="font-style:italic">data loss</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Therefore, we want to guarantee that </span><span style="background-color:#ffffff;color:#333333">for each message consumed from the input topics, the resulting message(s) from processing this message will be reflected in the output topics exactly once, even under failures.</span><span style="background-color:#ffffff;color:#333333">&nbsp;</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">In order to support this guarantee, we need to include the consumer’s offset commits in the producer’s transaction.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>We will talk about how to enhance the consumer coordinator that takes care of the offset commits to be transaction-aware in the </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.qv0jmz7iwucq" style="color:inherit;text-decoration:inherit">Consumer Coordinator</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;section.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h3 id="h.scppt9di2ipj" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">Control Messages for Transactions</span></h3><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>For messages appended to Kafka log partitions, in order to indicate whether they are committed or aborted, a special type of message called </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://issues.apache.org/jira/browse/KAFKA-1639&amp;sa=D&amp;source=editors&amp;ust=1765881840097668&amp;usg=AOvVaw0tMZZtGeGqWKBXY1yLONhs" style="color:inherit;text-decoration:inherit">control message</a></span><span>&nbsp;will be used (some of the motivations are already discussed in </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://issues.apache.org/jira/browse/KAFKA-1639&amp;sa=D&amp;source=editors&amp;ust=1765881840098082&amp;usg=AOvVaw1XqRbfxwUy85EO3eMwzHw2" style="color:inherit;text-decoration:inherit">KAFKA-1639</a></span><span>). Control messages do not contain application data in the value payload and should not be exposed to applications. It is only used for internal communication between brokers and clients. For producer transactions, we will introduce a set of </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:700;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.mylukj7bg1rf" style="color:inherit;text-decoration:inherit">transaction markers</a></span><span>&nbsp;implemented as control messages, such that the consumer client can </span><span>interpret them to determine whether any given message has been committed or aborted</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. And based on the transaction status, the consumer client can then determine whether and when to return these messages to the application.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>We will talk about how transaction markers are managed in the </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.pabpm8thuoag" style="color:inherit;text-decoration:inherit">Broker</a></span><span>&nbsp;and </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.od2aaa53rbv" style="color:inherit;text-decoration:inherit">Consumer</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;sections.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h3 id="h.azlgwswrwqxk" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">Producer Identifiers and Idempotency</span></h3><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Within a transaction, we also need to make sure that there is no duplicate messages generated by the producer. To achieve this, we are going to add </span><span style="font-weight:700">sequence numbers</span><span>&nbsp;to messages to allow the brokers to de-duplicate messages per producer and topic partition. For each topic partition that is written to, the producer maintains a sequence number counter and assigns the next number in the sequence for each new message. The broker verifies that the next message produced has been assigned the next number and otherwise returns an error. In addition, since the sequence number is per producer and topic partition, we also need to uniquely identify a producer across multiple sessions (i.e. when the producer fails and recreates, etc). Hence we introduce a new </span><span style="font-weight:700">TransactionalId</span><span>&nbsp;to distinguish producers, along with an </span><span style="font-weight:700">epoch number</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;so that zombie writers with the same TransactionalId can be fenced.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">At any given point in time, a producer can only have one ongoing transaction, so we can distinguish messages that belong to different transactions by their respective TransactionalId. Producers with the same TransactionalId will talk to the same transaction coordinator which also keeps track of their TransactionalIds in addition to managing their transaction status. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>We will talk about how transactional producers can interact with the transaction coordinators in the </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.dz78fc8xlsd5" style="color:inherit;text-decoration:inherit">Transactional Producer</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;section.</span></p><h2 id="h.k3ikkiat5ahm" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Data Flow</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="overflow: hidden; display: inline-block; margin: 0.00px -0.00px; border: 1.33px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 473.33px;"><img alt="Kafka Transactions Data Flow.png" src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXf5t1jhOu8H9XjeFiAncZSJPN7r51NebQSgYU_bQLfxNoLt1d-I-zhbs3Khyd05G1kFz5SEHfyII7Dumo8MjvSkgUqMgpvVDIcoiayQ2lVTy-TZPHa6-2nSBADBFh73P-e3QCLMFjEUMIPTPgaCGUW2Aw=s320?key=QkrMD46DCd_cL4t2ruGD7A" style="width: 624.00px; height: 473.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">In the diagram above, the sharp edged boxes represent distinct machines. The rounded boxes at the bottom represent Kafka topic partitions, and the diagonally rounded boxes represent logical entities which run inside brokers.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Each arrow represents either an RPC, or a write to a Kafka topic. These operations occur in the sequence indicated by the numbers next to each arrow. The sections below are numbered to match the operations in the diagram above, and describe the operation in question.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h3 id="h.6u8uypxxs15g" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>1. Finding a transaction coordinator -- the </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.97qeo7mkx9jx" style="color:inherit;text-decoration:inherit">Find</a></span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.97qeo7mkx9jx" style="color:inherit;text-decoration:inherit">CoordinatorRequest</a></span></h3><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Since the transaction coordinator is at the center assigning PIDs and managing transactions,the first thing a producer has to do is issue a </span><span style="font-style:italic">FindCoordinatorRequest</span><span>&nbsp;(previously known as </span><span style="font-style:italic">GroupCoordinatorRequest</span><span>, but renamed for general usage</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">) to any broker to discover the location of its coordinator. Note that if no TransactionalId is specified in the configuration, this step can be skipped.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h3 id="h.dinbsctebcle" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>2. Getting a producer Id -- the </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.z99xar1h2enr" style="color:inherit;text-decoration:inherit">InitPidRequest</a></span></h3><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The producer must send an InitPidRequest to get idempotent delivery or to use transactions. Which semantics are allowed depends on whether or not the </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.g2xsf9n49puh" style="color:inherit;text-decoration:inherit">transactional.id</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;configuration is provided or not.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h4 id="h.o6wvubfhzaqo" style="padding-top:14pt;margin:0;color:#666666;padding-left:0;font-size:12pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#666666;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:&quot;Arial&quot;;font-style:normal">2.1 When a TransactionalId is specified</span></h4><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>After discovering the location of its coordinator, the next step is to retrieve the producer’s </span><span style="font-style:italic">PID</span><span>. This is achieved by sending an </span><span style="font-style:italic">InitPidRequest</span><span>&nbsp;to the transaction coordinator. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The</span><span>&nbsp;TransactionalId </span><span>is </span><span>passed in the </span><span style="font-style:italic">InitPidRequest</span><span>&nbsp;along with the transaction timeout</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, and the mapping to the corresponding PID is logged in the transaction log in step 2a. This enables us to return the same PID for the TransactionalId to future instances of the producer, and hence enables recovering or aborting previously incomplete transactions. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>In addition to returning the PID, the </span><span style="font-style:italic">InitPidRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;performs the following tasks:</span></p><ol class="lst-kix_habx6bj0olf7-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Bumps up the epoch of the PID, so that any previous zombie instance of the producer is fenced off and cannot move forward with its transaction.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Recovers (rolls forward or rolls back) any transaction left incomplete by the previous instance of the producer.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The handling of the </span><span style="font-style:italic">InitPidRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;is synchronous. Once it returns, the producer can send data and start new transactions.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h4 id="h.6562cfctwipz" style="padding-top:14pt;margin:0;color:#666666;padding-left:0;font-size:12pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#666666;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:&quot;Arial&quot;;font-style:normal">2.2 When a TransactionalId is not specified</span></h4><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>If no TransactionalId is specified in the configuration, the </span><span style="font-style:italic">InitPidRequest</span><span>&nbsp;can be sent to any broker. A fresh PID is assigned, and the producer only enjoys idempotent semantics and transactional semantics within a single session. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h3 id="h.z9nopnb9z4o1" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">3. Starting a Transaction -- the beginTransaction API</span></h3><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The new KafkaProducer will have a </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">beginTransaction()</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;method which has to be called to signal the start of a new transaction. The producer records local state indicating that the transaction has begun, but the transaction won’t begin from the coordinator’s perspective until the first record is sent.</span></p><h3 id="h.9nlwbd1bifn0" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">4. The consume-transform-produce loop</span></h3><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">In this stage, the producer begins to consume-transform-produce the messages that comprise the transaction. This is a long phase and is potentially comprised of multiple requests.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h4 id="h.dyen7q27r3i2" style="padding-top:14pt;margin:0;color:#666666;padding-left:0;font-size:12pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>4.1 </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.r6klddrx9ibz" style="color:inherit;text-decoration:inherit">AddPartitionsToTxnRequest</a></span></h4><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The producer sends this request to the transaction coordinator the first time a new TopicPartition is written to as part of a transaction. The addition of this </span><span style="font-style:italic">TopicPartition</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;to the transaction is logged by the coordinator in step 4.1a. We need this information so that we can write the commit or abort markers to each TopicPartition (see section 5.2 for details). If this is the first partition added to the transaction, the coordinator will also start the transaction timer.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h4 id="h.cckv7jc1fsy3" style="padding-top:14pt;margin:0;color:#666666;padding-left:0;font-size:12pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>4.2 </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.mkk6ckzh7jxl" style="color:inherit;text-decoration:inherit">ProduceRequest</a></span></h4><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The producer writes a bunch of messages to the user’s TopicPartitions through one or more </span><span style="font-style:italic">ProduceRequests </span><span>(fired from the </span><span style="font-style:italic">send</span><span>&nbsp;method of the producer). These requests include the PID, </span><span>epoch</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, and sequence number as denoted in 4.2a.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h4 id="h.ggt0dw5tk47r" style="padding-top:14pt;margin:0;color:#666666;padding-left:0;font-size:12pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>4.3 </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.cqecubxziwie" style="color:inherit;text-decoration:inherit">AddOffsetsToTxnRequest</a></span></h4><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The producer has a new </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">sendOffsets</span><span>&nbsp;API method, which enables the batching of consumed and produced messages. This method takes a map of the offsets to commit and a </span><span style="font-style:italic">groupId</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;argument, which corresponds to the name of the associated consumer group.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">sendOffsets</span><span style="font-style:italic">&nbsp;</span><span>method</span><span style="font-style:italic">&nbsp;</span><span>sends an </span><span style="font-style:italic">AddOffsetsToTxnRequests</span><span>&nbsp;with the groupId to the transaction coordinator, from which it can deduce the TopicPartition for this consumer group in the internal </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">__consumer_offsets</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;topic. The transaction coordinator logs the addition of this topic partition to the transaction log in step 4.3a.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h4 id="h.4fiwu5vphzq9" style="padding-top:14pt;margin:0;color:#666666;padding-left:0;font-size:12pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>4.4 </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.5695qbm2hne" style="color:inherit;text-decoration:inherit">TxnOffsetCommitRequest</a></span></h4><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Also as part of </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">sendOffsets</span><span style="font-style:italic">, </span><span>the producer will send a </span><span style="font-style:italic">TxnOffsetCommitRequest</span><span>&nbsp;to the consumer coordinator to persist the offsets in the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">__consumer_offsets</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;topic (step 4.4a). The consumer coordinator validates that the producer is allowed to make this request (and is not a zombie) by using the PID and producer epoch which are sent as part of this request. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The consumed offsets are not visible externally until the transaction is committed, the process for which we will discuss now.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h3 id="h.rhcuthaoajrw" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">5. Committing or Aborting a Transaction</span></h3><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Once the data has been written, the user must call the new </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">commitTransaction</span><span style="font-style:italic">&nbsp;</span><span>or </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">abortTransaction </span><span>methods of the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">KafkaProducer</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. These methods will begin the process of committing or aborting the transaction respectively. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h4 id="h.rr7z72vuy251" style="padding-top:14pt;margin:0;color:#666666;padding-left:0;font-size:12pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>5.1 </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.2dnhvqqi7mr7" style="color:inherit;text-decoration:inherit">EndTxnRequest</a></span></h4><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>When a producer is finished with a transaction, the newly introduced </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">KafkaProducer.commitTranaction</span><span style="font-style:italic">&nbsp;</span><span>or </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">KafkaProducer.abortTransaction</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;must be called. The former makes the data produced in step 4 above available to downstream consumers. The latter effectively erases the produced data from the log: it will never be accessible to the user (at the READ_COMMITTED isolation level), ie. downstream consumers will read and discard the aborted messages.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Regardless of which producer method is called, the producer issues an </span><span style="font-style:italic">EndTxnRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;to the transaction coordinator, with a field indicating whether the transaction is to be committed or aborted. Upon receiving this request, the coordinator:</span></p><ol class="lst-kix_ckxnb6vf7vme-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Writes a </span><span style="font-style:italic">PREPARE_COMMIT </span><span>or </span><span style="font-style:italic">PREPARE_ABORT</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;message to the transaction log. (step 5.1a)</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Begins the process of writing the command messages known as COMMIT (or ABORT) markers to the user logs through the </span><span style="font-style:italic">WriteTxnMarkerRequest. </span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">(see section 5.2 below).</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Finally writes the </span><span style="font-style:italic">COMMITTED</span><span>&nbsp;(or </span><span style="font-style:italic">ABORTED)</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;message to transaction log. (see 5.3 below).</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h4 id="h.bgy58z5pyzw7" style="padding-top:14pt;margin:0;color:#666666;padding-left:0;font-size:12pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>5.2 </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.jtpvkrldhb7" style="color:inherit;text-decoration:inherit">WriteTxnMarker</a></span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.jtpvkrldhb7" style="color:inherit;text-decoration:inherit">Request</a></span></h4><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>This request is issued by the transaction coordinator to the leader of each TopicPartition which is part of the transaction. Upon receiving this request, each broker will write a </span><span style="font-style:italic">COMMIT(PID) </span><span>or </span><span style="font-style:italic">ABORT(PID)</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;control message to the log. (step 5.2a)</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>This message indicates to consumers whether messages with the given PID should be delivered or dropped. As such, the broker will not return messages which have a PID (meaning these messages are part of a transaction) until it reads a corresponding </span><span style="font-style:italic">COMMIT </span><span>or </span><span style="font-style:italic">ABORT</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;message of that PID, at which point it will deliver or skip the messages respectively. In addition, in order to maintain offset ordering in message delivery, brokers would maintain an offset called last stable offset (LSO) below which all transactional messages have either been committed or aborted.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Note that, if the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">__consumer_offsets</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;topic is one of the TopicPartitions in the transaction, the commit (or abort) marker is also written to the log, and the consumer coordinator is notified that it needs to materialize these offsets in the case of a commit or ignore them in the case of an abort (step 5.2a on the left).</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h4 id="h.leodiv40s4w1" style="padding-top:14pt;margin:0;color:#666666;padding-left:0;font-size:12pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#666666;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:&quot;Arial&quot;;font-style:normal">5.3 Writing the final Commit or Abort Message</span></h4><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>After all the commit or abort markers are written the data logs, the transaction coordinator writes the final </span><span style="font-style:italic">COMMITTED </span><span>or </span><span style="font-style:italic">ABORTED</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;message to the transaction log, indicating that the transaction is complete (step 5.3 in the diagram). At this point, most of the messages pertaining to the transaction in the transaction log can be removed. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>We only need to retain the PID of the completed transaction along with a timestamp</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, so we can eventually remove the TransactionalId-&gt;PID mapping for the producer. See the Expiring PIDs section below.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">In the rest of this design doc we will provide a detailed description of the above data flow along with the proposed changes on different modules.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h1 id="h.dz78fc8xlsd5" style="padding-top:20pt;margin:0;color:#000000;padding-left:0;font-size:20pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Transactional </span><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:&quot;Arial&quot;;font-style:normal">Producer</span></h1><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Transactional Producer requires a user-provided </span><span style="font-weight:700">TransactionalId</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;during initialization in order to generate transactions. This guarantees atomicity within the transaction and at the same time fences duplicate messages from zombie writers as long as they are sending transactions.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.9f3l35ifpyku" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Public APIs</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>We first introduce a set of new public APIs to the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">KafkaProducer</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;class, and describe how these APIs will be implemented.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">/* initialize the producer as a transactional producer */</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">initTransactions()</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.ypgqs5sy98rn"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The following steps will be taken when </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">initTransactions</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">()</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;is called:</span></p><ol class="lst-kix_oiuz0iy372u2-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If no TransactionalId has been provided in configuration, </span><span>skip to </span><span>step</span><span>&nbsp;3</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Send a </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.97qeo7mkx9jx" style="color:inherit;text-decoration:inherit">FindCoordinatorRequest</a></span><span>&nbsp;with the configured TransactionalId and with </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">CoordinatorType</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;encoded as “transaction” to a random broker. Block for the corresponding response, which will return the assigned transaction coordinator for this producer.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Send an </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.z99xar1h2enr" style="color:inherit;text-decoration:inherit">InitPidRequest</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;to the transaction coordinator or to a random broker if no TransactionalId was provided in configuration. Block for the corresponding response to get the returned PID.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">/* start a transaction to produce messages */</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">beginTransaction() &nbsp;</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.w4ko2ygwszpn"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The following steps are executed on the producer when </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">beginTransaction</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;is called:</span></p><ol class="lst-kix_3ho157wy3jxf-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Check if the producer is transactional (i.e. </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">init</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;has been called), if not throw an exception (we omit this step in the rest of the APIs, but they all need to execute it).</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Check whether a transaction has already been started. If so, raise an exception.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">/* send offsets for a given consumer group within this transaction */</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">sendOffsetsToTransaction(</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Map&lt;TopicPartition, OffsetAndMetadata&gt; offsets, </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; String consumerGroupId) &nbsp;</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.9soew3kapduv"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The following steps are executed on the producer when </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">sendOffsetsToTransaction</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;is called:</span></p><ol class="lst-kix_ey0jmq1tgbhn-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Check if it is currently within a transaction, if not throw an exception; otherwise proceed to the next step.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Check if this function has ever been called for the given </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">groupId</span><span>&nbsp;within this transaction. If not then send an </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.cqecubxziwie" style="color:inherit;text-decoration:inherit">AddOffsetsToTxnRequest</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;to the transaction coordinator, block until the corresponding response is received; otherwise proceed to the next step.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span>Send a </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.5695qbm2hne" style="color:inherit;text-decoration:inherit">TxnOffsetCommitRequest</a></span><span>&nbsp;to the coordinator return from the response in the previous step, block until the corresponding response is received.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">/* commit the transaction with its produced messages */</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">commitTransaction() </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.d3zdkvqddmf4"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The following steps are executed on the producer when </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">commitTransaction</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;is called:</span></p><ol class="lst-kix_572earllcbds-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Check if there is an active transaction, if not throw an exception; otherwise proceed to the next step.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Call </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">flush</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;to make sure all sent messages in this transactions are acknowledged.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Send an </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.2dnhvqqi7mr7" style="color:inherit;text-decoration:inherit">EndTxnRequest</a></span><span>&nbsp;with </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMMIT</span><span>&nbsp;command to the transaction coordinator, block until the corresponding response is received.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">/* abort the transaction with its produced messages */</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">abortTransaction() &nbsp;</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The following steps are executed on the producer when </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">abortTransaction</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;is called:</span></p><ol class="lst-kix_xrj1sdkp3cni-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Check if there is an active transaction, if not throw an exception; otherwise proceed to the next step.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Immediately fail and drop any buffered messages that are transactional</span><span>.</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;Await any in-flight messages which haven’t been acknowledged. </span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Send an </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.2dnhvqqi7mr7" style="color:inherit;text-decoration:inherit">EndTxnRequest</a></span><span>&nbsp;with </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ABORT</span><span>&nbsp;command to the transaction coordinator, block until the corresponding response is received.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">/* send a record within the transaction */</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">send(ProducerRecord&lt;K, V&gt; record)</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>With an ongoing transaction (i.e. after </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">beginTransaction</span><span>&nbsp;is called but before </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">commitTransaction</span><span>&nbsp;or </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">abortTransaction </span><span>is called), the producer will maintain the set of partitions it has produced to. When </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">send</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;is called, the following steps will be added:</span></p><ol class="lst-kix_4uq1mr5t1xn5-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Check if the producer </span><span>h</span><span>as a PID. If not, send an </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InitPidRequest</span><span>&nbsp;following the </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.ypgqs5sy98rn" style="color:inherit;text-decoration:inherit">procedure</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;above.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Check whether a transaction is ongoing. If so, </span><span>c</span><span>heck if the destination topic partition is in the list of produced partitions. If not, then send an </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.r6klddrx9ibz" style="color:inherit;text-decoration:inherit">AddPartitionToTxnRequest</a></span><span>&nbsp;to the transaction coordinator. </span><span>Block</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;until the corresponding response is received, and update the set. This ensures that the coordinator knows which partitions have been included in the transaction before any data has been written.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Discussion on Thread Safety.</span><span>&nbsp;The transactional producer can only have one outstanding transaction at any given time. A call to </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">beginTransaction()</span><span>&nbsp;with another ongoing transaction is treated as an error. Once a transaction begins, it is possible to use the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">send()</span><span>&nbsp;API from multiple threads, but there must be one and only one subsequent call to</span><span>&nbsp;</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">commitTransaction</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">()</span><span>&nbsp;or </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">abortTransaction()</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Note that with a non-transactional producer, the first </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">send</span><span>&nbsp;call will be blocking for two round trips (</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">GroupCoordinatorRequest</span><span>&nbsp;and </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InitPidRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">).</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.5x3010zgtp7o"></a><h3 id="h.8y3tle2c2qbm" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">Error Handling</span></h3><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Transactional producer handles </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.ps5hofwnw55e" style="color:inherit;text-decoration:inherit">error codes</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;returned from the transaction responses above differently:</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">InvalidProducerEpoch</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">:</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;this is a fatal error, meaning the producer itself is a zombie since another instance of the producer has been up and running, stop this producer and throw an exception.</span></p><a id="id.7ztwi7m2pk9s"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">InvalidPidMapping:</span><span>the coordinator has no current PID mapping for this TransactionalId. &nbsp;Establish a new one via the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InitPidRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;with the TransactionalId.</span></p><a id="id.3el3xfxbx8j5"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">NotCoordinatorForTransactionalId:</span><span>&nbsp;the coordinator is not assigned with the TransactionalId, try to re-discover the transaction coordinator from brokers via the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">FindCoordinatorRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;with the TransactionalId.</span></p><a id="id.fpkb0rxeonhb"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">InvalidTxnRequest:</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;the transaction protocol is violated, this should not happen with the correct client implementation; so if it ever happens it means your client implementation is wrong.</span></p><a id="id.qrl300ydtgko"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">CoordinatorNotAvailable:</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;the transaction coordinator is still initializing, just retry after backing off.</span></p><a id="id.cx6ufvjedx6a"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">DuplicateSequenceNumber</span><span style="background-color:#ffffff;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">: </span><span>t</span><span>he sequence number from </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ProduceRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;is lower than the expected sequence number. In this case, the messages are duplicates and hence the producer can ignore this error and proceed to the next messages queued to be sent.</span></p><a id="id.bj0lez6mjxeb"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">InvalidSequenceNumber</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">: </span><span>this is a fatal error indicating the sequence number from </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ProduceRequest</span><span>&nbsp;is larger than expected sequence number. </span><span>Assuming a correct client, this should only happen if the broker loses data for the respective partition (i.e. log may have been truncated).</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;Hence we should stop this producer and raise to the user as a fatal exception. </span></p><a id="id.nygi4tqp1tbd"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">InvalidTransactionTimeout</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">: fatal error sent from an InitPidRequest indicating that the timeout value passed by the producer is invalid (not within the allowable timeout range).</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Discussion on Invalid Sequence.</span><span>&nbsp;To reduce the likelihood of the </span><span style="background-color:#ffffff;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">InvalidSequenceNumber</span><span>&nbsp;error code, users should have </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">acks=all</span><span>&nbsp;enabled on the producer and unclean leader election should be disabled. It is still possible in some disaster scenarios to lose data in the log. To continue producing in this case, applications must catch the exception and initialize a new producer instance.</span></p><h2 id="h.78p7cgjqcbnx" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Added </span><span>Configurations</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The following configs will be added to the producer client:</span></p><table style="margin-left:auto;border-spacing:0;border-collapse:collapse;margin-right:auto"><tbody><tr style="height:33pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:174pt;border-top-color:#000000;border-bottom-style:solid"><a id="id.qomrk2mk882"></a><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">enable.idempotence</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:295.5pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span>Whether or not idempotence is enabled (</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">false</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;by default). If disabled, the producer will not set the PID field in produce requests and the current producer delivery semantics will be in effect. Note that idempotence must be enabled in order to use transactions.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="background-color:#ffffff;font-size:10.5pt">When idempotence is enabled, we enforce that acks=all, retries &gt; 1, and max.inflight.requests.per.connection=1. Without these values for these configurations, we cannot guarantee idempotence. If these settings are not explicitly overridden by the application, the producer will set acks=all, retries=Integer.MAX_VALUE, and max.inflight.requests.per.connection=1 when idempotence is enabled.</span></p></td></tr><tr style="height:33pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:174pt;border-top-color:#000000;border-bottom-style:solid"><a id="id.jnzinkkapylv"></a><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="font-weight:400;font-family:&quot;Courier New&quot;">transaction.timeout.ms</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:295.5pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The maximum amount of time in ms that the transaction coordinator will for a transaction to be completed by the client before proactively aborting the ongoing transaction.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span>This config value will be sent to the transaction coordinator along with the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.z99xar1h2enr" style="color:inherit;text-decoration:inherit">InitPidRequest</a></span><span>.<br><br>Default is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">60000. </span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">This makes a transaction to not block downstream consumption more than a minute, which is generally allowable in real-time apps.</span></p></td></tr><tr style="height:33pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:174pt;border-top-color:#000000;border-bottom-style:solid"><a id="id.g2xsf9n49puh"></a><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">transactional.id</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:295.5pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The TransactionalId to use for transactional delivery. This enables reliability semantics which span multiple producer sessions since it allows the client to guarantee that transactions using the same TransactionalId have been completed prior to starting any new transactions. If no TransactionalId is provided, then the producer is limited to idempotent delivery.</span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-size:10.5pt">Note that </span><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">enable.idempotence</span><span style="background-color:#ffffff;color:#333333;font-size:10.5pt">&nbsp;must be enabled if a TransactionalId is configured.</span><span><br><br>Default is “”</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">.</span></p></td></tr></tbody></table><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h1 id="h.kcryyiqr0svu" style="padding-top:20pt;margin:0;color:#000000;padding-left:0;font-size:20pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:&quot;Arial&quot;;font-style:normal">Transaction Coordinator</span></h1><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Each broker will construct a transaction coordinator module during the initialization process. The transaction coordinator handles requests from the transactional producer to keep track of their </span><span style="font-weight:700">transaction status</span><span>, and at the same time maintain their </span><span style="font-weight:700">PIDs</span><span>&nbsp;across multiple sessions via client-provided </span><span style="font-weight:700">TransactionalIds</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. The transaction coordinator maintains the following information in memory:</span></p><ol class="lst-kix_s9tg2x8dz8yw-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>A map from TransactionalId to assigned </span><span>PID</span><span style="font-weight:700">,</span><span>&nbsp;plus current epoch number</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, and 2) the transaction timeout value.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>A map from PID to the current ongoing transaction status of the producer indicated by the PID, plus the participant topic-partitions</span><span>, and the last time</span><span>&nbsp;when this status was updated</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">In addition, the transaction coordinator also persists both mappings to the transaction topic partitions it owns, so that they can be used for recovery.</span></p><h2 id="h.lzhx7x34k9er" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Transaction Log</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>As mentioned in the </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.f0eotchjto1f" style="color:inherit;text-decoration:inherit">summary</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, the transaction log is stored as an internal transaction topic partitioned among all the brokers. Log compaction is turned on by default on the transaction topic. Messages stored in this topic have versions for both the key and value fields:</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">/* Producer TransactionalId mapping message */</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Key =&gt; Version TransactionalId &nbsp;</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Version =&gt; 0 (int16)</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; TransactionalId =&gt; String</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Value =&gt; Version ProducerId ProducerEpoch TxnTimeoutDuration TxnStatus [TxnPartitions] TxnEntryLastUpdateTime TxnStartTime</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Version =&gt; 0 (int16)</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ProducerId =&gt; int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ProducerEpoch =&gt; int16</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; TxnTimeoutDuration =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; TxnStatus =&gt; int8</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; TxnPartitions =&gt; [Topic [Partition]]</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; &nbsp;Topic =&gt; String</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; &nbsp;Partition =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; TxnLastUpdateTime =&gt; int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; TxnStartTime =&gt; int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><a id="id.6zixifmk50sp"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>T</span><span>he status field above</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;has the following possible values:</span></p><table style="margin-left:auto;border-spacing:0;border-collapse:collapse;margin-right:auto"><tbody><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:132pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">BEGIN</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:336pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The transaction has started.</span></p></td></tr><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:132pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="font-weight:400;font-family:&quot;Courier New&quot;">PREPARE_COMMIT</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:336pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The transaction will be committed.</span></p></td></tr><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:132pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="font-weight:400;font-family:&quot;Courier New&quot;">PREPARE_ABORT</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:336pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The transaction will be aborted.</span></p></td></tr><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:132pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMPLETE_COMMIT</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:336pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The transaction was committed.</span></p></td></tr><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:132pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">COMPLETE_ABORT</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:336pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The transaction was aborted.</span></p></td></tr></tbody></table><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Writing of the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">PREPARE_XX</span><span>&nbsp;transaction message can be treated as the synchronization point: once it is appended (and replicated) to the log, the transaction is guaranteed </span><span>to </span><span>be committed or aborted. And even when the coordinator fails, upon recovery</span><span>,</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;this transaction will be rolled forward or rolled back as well.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Writing of the TransactionalId message can be treated as persisting the creation or update of the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">TransactionalId -&gt; PID</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;entry. Note that if there are more than one transaction topic partitions owned by the transaction coordinator, the transaction messages are written only to the partition that the TransactionalId entry belongs to.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>We will use the timestamp of the transaction status message in order to determine when the transaction has timed out using the transaction timeout from the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.z99xar1h2enr" style="color:inherit;text-decoration:inherit">InitPidRequest</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;(which is stored in the TransactionalId mapping message). Once the difference between the current time and the timestamp from the status message exceeds the timeout, the transaction will be aborted. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">This works similarly for expiration of the TransactionalId, but note 1) that the transactionalId will not be expired if there is an on-going transaction, and 2) if the client corresponding to a transactionalId has not begun any transactions, we use the timestamp from the mapping message for expiration.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>When a transaction is completed (whether aborted or committed), the transaction state of the producer is changed to </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">Completed</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;and we clear the set of topic partitions associated with the completed transaction.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.bg39k6ipxugn" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Transaction </span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Coordinator Startup</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Upon assignment of one of the transaction log partitions by the controller</span><span>&nbsp;(i.e., upon getting elected as the leader of the partition)</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, the coordinator will execute the following steps:</span></p><ol class="lst-kix_okhvdbx9vxjx-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Read its currently assigned transaction topic partitions and bootstrap the Transaction status cache. The coordinator will scan the transaction log from the beginning, verify basic consistency, and materialize the entries. It performs the following actions as it reads the entries from the transaction log:</span></li></ol><ol class="lst-kix_okhvdbx9vxjx-1 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Check whether there is a previous entry with the same TransactionalId and a higher epoch. If so, </span><span>throw an exception</span><span>. In particular, this indicates the log is corrupt. All future transactional RPCs to this coordintaor will result in a `NotCoordinatorForTransactionalId` error code, and this partition of the log will be effectively disabled.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Update the transaction status cache for the transactionalId in question with the contents of the current log entry, including the last update time, and partitions in the transaction, and status. If there are multiple log entries with the same transactionalId, the last copy will be the one which remains materialized in the cache. The log cleaner will eventually compact out the older copies.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.3af5934pfogc"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">When committing a transaction, the following steps will be executed by the coordinator:</span></p><ol class="lst-kix_j5huq76pqetk-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Send an </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.jtpvkrldhb7" style="color:inherit;text-decoration:inherit">W</a></span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.jtpvkrldhb7" style="color:inherit;text-decoration:inherit">riteTxnMarkerRequest</a></span><span>&nbsp;with the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMMIT marker</span><span>&nbsp;to all the leaders of the t</span><span>ransaction’s added partitions</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>When all the responses have been received, append a </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMPLETE_COMMIT</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">&nbsp;</span><span>transaction message</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;to the transaction topic. We do not need to wait for this record to be fully replicated since otherwise we will just redo this protocol again.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.np4653erbekz"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">When aborting a transaction, the following steps will be executed by the coordinator:</span></p><ol class="lst-kix_rrld09yo0z41-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Send an </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.29i9ru7ev0u" style="color:inherit;text-decoration:inherit">WriteTxnMarkerRequest</a></span><span>&nbsp;with the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ABORT marker</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;to all the host brokers of the transaction partitions.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>When all the responses have been received, append a </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMPLETE_ABORT</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">&nbsp;</span><span>transaction message</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;to the transaction topic. Do not need to wait for this record to be fully replicated since otherwise we will just redo this protocol again.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.ia8lrje8xifh"></a><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="font-weight:700">Discussion on U</span><span style="font-weight:700">navailable Partitions.</span><span style="font-weight:700">&nbsp;</span><span>When committing or aborting a transaction, if one of the partitions involved in the commit is unavailable, then the transaction will be unable to be completed. Concretely, say that we have appended a </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">PREPARE_COMMIT</span><span>&nbsp;message to the transaction log, and we are about to send the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">WriteTxnMarker</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">Request</span><span>, but one of the partitions is unavailable. We cannot complete the commit until the partition comes back online, at which point the “roll forward” logic will be executed again. This may cause a transaction to be delayed longer than the transaction timeout, but there is no alternative since consumers may be blocking awaiting the transaction’s completion. </span><span style="font-weight:700">It is important to keep in mind that we &nbsp;strongly rely on partition availability for progress.</span><span>&nbsp;Note, however, that consumers in </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">READ_COMMITTED</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;mode will only be blocked from consumption on the unavailable partition; other partitions included in the transaction can be consumed before the transaction has finished rolling forward.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.mcphg8e8gg24" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Transaction </span><span>Coordinator Request Handling</span></h2><a id="id.jro89lml46du"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>When receiving the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.z99xar1h2enr" style="color:inherit;text-decoration:inherit">InitPidRequest</a></span><span style="font-weight:400;font-family:&quot;Courier New&quot;">&nbsp;</span><span>from a producer </span><span style="font-style:italic">with a non-empty TransactionalId </span><span>(see </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#kix.oz3ruj5vub78" style="color:inherit;text-decoration:inherit">here</a></span><span>&nbsp;for handling the empty case)</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, the following steps will be executed in order to send back the response:</span></p><ol class="lst-kix_b4yhtr5n7hga-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Check if it is the assigned transaction coordinator for the TransactionalId, if not reply with the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">NotCoordinatorForTransactionalId </span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">error code.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If there is already an entry with the TransactionalId in the mapping, check whether there is an ongoing transaction for the PID. If there is and it has not been completed, then follow the abort logic. </span><span>If the transaction has been prepared, but not completed, await its completion.</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;We will only move to the next step after there is no incomplete transaction for the PID.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Increment the epoch number, append the updated </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">TransactionalId message</span><span>. If there is no entry with the TransactionalId in the mapping, construct a PID with the initialized epoch number; append an </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">TransactionalId message</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;into the transaction topic, insert into the mapping and reply with the PID / epoch / timestamp. </span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Respond with the latest PID and Epoch for the TransactionalId.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Note that coordinator’s PID construction logic does NOT guarantee that it will always result in the same PID for a given TransactionalId (more details discussed </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#kix.uu5bwrue4nmm" style="color:inherit;text-decoration:inherit">here</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">). In fact, in this design we make minimal assumptions about the PID returned from this API, other than that it is unique (across the Kafka cluster) and will never be assigned twice. One potential way to do this is to use Zookeeper to reserve blocks of the PID space on each coordinator. For example, when broker 0 is first initialized, it can reserve PIDs 0-100, while broker 1 can reserve 101-200. In this way, the broker can ensure that it provides unique PIDs without incurring too much additional overhead.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.aywz22lp6tma"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>When receiving the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.r6klddrx9ibz" style="color:inherit;text-decoration:inherit">AddPartitionsToTxnRequest</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;from a producer, the following steps will be executed in order to send back the response.</span></p><ol class="lst-kix_m3mg1m14r0ox-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the TransactionalId does not exist in the TransactionalId mapping or if the mapped PID is different from that in the request, reply with </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.7ztwi7m2pk9s" style="color:inherit;text-decoration:inherit">InvalidPidMapping</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">; otherwise proceed to next step.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the PID’s epoch number is </span><span>different from </span><span>the </span><span>current </span><span>TransactionalId </span><span>PID </span><span>mapping, reply with the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InvalidProducerEpoch</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;error code; otherwise proceed to next step.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Check if there is already an entry in the transaction status mapping.</span></li></ol><ol class="lst-kix_m3mg1m14r0ox-1 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If there is already an entry in the transaction status mapping, check if its status is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">BEGIN</span><span>&nbsp;and the epoch number is correct, if yes append an </span><span>transaction status message into the transaction topic</span><span>&nbsp;with the updated partition list, wait for this message to be replicated, update the transaction status entry and timestamp in the TransactionalId map and reply OK; otherwise reply with </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InvalidTxnRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;error code.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Otherwise append a </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">BEGIN </span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">transaction message into the transaction topic, wait for this message to be replicated and then insert it into the transaction status mapping and update the timestamp in the TransactionalId map and reply OK.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.5xa2hzric4h0"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>When receiving the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.cqecubxziwie" style="color:inherit;text-decoration:inherit">AddOffsetsToTxnRequest</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;from a producer, the following steps will be executed in order to send back the response.</span></p><ol class="lst-kix_n1ny3uif9c2q-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the TransactionalId does not exist in the TransactionalId mapping or if the mapped PID is different from that in the request, reply with </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.7ztwi7m2pk9s" style="color:inherit;text-decoration:inherit">InvalidPidMapping</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">; otherwise proceed to next step.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the PID’s epoch number is </span><span>different from</span><span>&nbsp;the</span><span>&nbsp;current</span><span>&nbsp;TransactionalId mapping, reply with the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InvalidProducerEpoch</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;error code; otherwise proceed to next step.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If there is already an entry in the transaction status mapping, check if its status is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">BEGIN</span><span>&nbsp;and the epoch number is correct, if yes calculate the internal offset topic partition based on the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ConsumerGroupID</span><span>&nbsp;field, append a </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">BEGIN</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">&nbsp;transaction message</span><span>&nbsp;into the transaction topic </span><span>with updated partition list, wait for this message to be replicated, update the transaction status entry and the timestamp in the TransactionalId map and reply OK with the calculated partition’s lead broker as the consumer coordinator; otherwise reply with </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InvalidTxnRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;error code.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If there is no entry in the transaction status mapping reply with </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InvalidTxnRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;error code.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.aqrq1dgbix3a"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>When receiving the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.2dnhvqqi7mr7" style="color:inherit;text-decoration:inherit">EndTxnRequest</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;from a producer, the following steps will be executed in order to send back the response.</span></p><ol class="lst-kix_nqdkqsc3oqx4-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the TransactionalId does not exist in the TransactionalId mapping or if the mapped PID is different from that in the request, reply with </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.7ztwi7m2pk9s" style="color:inherit;text-decoration:inherit">InvalidPidMapping</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">; otherwise proceed to next step.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Check if the PID’s epoch number is correct against the TransactionalId mapping. If not, reply with the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InvalidProducerEpoch</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;error code; otherwise proceed to the next step.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">If there is already an entry in the transaction status mapping, check its status</span></li></ol><ol class="lst-kix_nqdkqsc3oqx4-1 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the status is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">BEGIN</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, go on to step 4.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the status is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMPLETE_COMMIT</span><span>&nbsp;and the command from the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">EndTxnRequest</span><span>&nbsp;is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMMIT</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, return OK.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the status is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMPLETE_ABORT</span><span>&nbsp;and the command from the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">EndTxnRequest</span><span>&nbsp;is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ABORT</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, return OK.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Otherwise, reply with </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InvalidTxnRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;error code.</span></li></ol><ol class="lst-kix_nqdkqsc3oqx4-0" start="4" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Update the timestamp in the TransactionalId map.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Depending on the command field of the request, append a </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">PREPARE_XX transaction message</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;to the transaction topic with all the transaction partitions kept in the transaction status map, wait until the message is replicated.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.3af5934pfogc" style="color:inherit;text-decoration:inherit">Commit</a></span><span>&nbsp;or </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.np4653erbekz" style="color:inherit;text-decoration:inherit">abort</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;the transaction following the procedure depending on the command field. </span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Reply OK.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Discussion on Coordinator Committing Transactions.</span><span>&nbsp;The main motivation for having the transaction coordinator complete the commit / abort protocol after the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">PREPARE_XXX</span><span>&nbsp;transaction message is appended to the transaction log is to keep the producer client thin (i.e. not letting producers to send the request to brokers to write </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.mylukj7bg1rf" style="color:inherit;text-decoration:inherit">transaction markers</a></span><span>), and to ensure that transactions will always eventually be completed. However, it comes with an overhead of increased inter-broker communication traffic: suppose there are </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">N</span><span>&nbsp;producers sending messages in transactions, and each producer’s transaction rate is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">M/sec</span><span>, and each transaction touches </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">P</span><span>&nbsp;topic partitions on average, inter-broker communications will be increased by </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">M * N * P</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;round trips per sec. We need to conduct some system performance test to make sure this additional inter-broker traffic would not largely impact the broker cluster.</span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Discussion on Coordinator Failure During Transaction Completion</span><span>: It is possible for the coordinator to fail at any time during the completion of a transaction. In general, the client responds by finding the new coordinator and retrying the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">EndTxnRequest</span><span>. If the coordinator had already written the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">PREPARE_COMMIT</span><span>&nbsp;or </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">PREPARE_ABORT</span><span>&nbsp;status to the transaction log, and had begun writing the corresponding markers to the data partitions, then the new coordinator may repeat some of this work (i.e. there may be duplicate COMMIT or ABORT markers in the log), but this is not a problem as long as no new transactions have been started by the same producer. It is also possible for the coordinator to fail after writing the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMPLETE_COMMIT</span><span>&nbsp;or </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMPLETE_ABORT</span><span>&nbsp;status, but before the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">EndTxnRequest</span><span>&nbsp;had returned to the user. In this case, the client will retry the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">EndTxnRequest</span><span>&nbsp;after finding the new coordinator. As long as the command matches the completed state of the transaction after coordinator recovery, the coordinator will return a successful response. If not for this, there would be no way for the client to determine what happened to the transaction.</span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;line-height:1.0;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.tqy9gm4d8r26" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Coordinator-side Transaction Expiration</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">When a producer fails, its transaction coordinator should be able to pro-actively expire its ongoing transaction. In order to do so, the transaction coordinator will periodically trigger the following procedure:</span></p><ol class="lst-kix_l80e6xnoww9k-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Scan the transaction status map in memory. For each transaction:</span></li></ol><ol class="lst-kix_l80e6xnoww9k-1 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If its status is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">BEGIN</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, and its corresponding expire timestamp is smaller than the current timestamp, pro-actively expire the transaction by doing the following:</span></li></ol><ol class="lst-kix_l80e6xnoww9k-2 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:108pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">First void the PID by bumping up the epoch number in the TransactionalId map and writing a new TransactionalId message into the transaction log. Wait for it to be fully replicated.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:108pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Then </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.a171p1veet5u" style="color:inherit;text-decoration:inherit">rollback</a></span><span>&nbsp;the transaction following the procedure </span><span style="font-weight:700">with the bumped up epoch number</span><span>, so that brokers can update their cached PID as well </span><span>in order to fence Zombie writers</span><span>&nbsp;(see more discussions </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#kix.uu5bwrue4nmm" style="color:inherit;text-decoration:inherit">below</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">).</span></li></ol><ol class="lst-kix_l80e6xnoww9k-1" start="2" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If its status is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">PREPARE_COMMIT</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, then complete the committing process of the transaction.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If its status is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">PREPARE_ABORT</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, then complete the aborting process of the transaction.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.n3o7f9yqymnk" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Coordinator TransactionalId Expiration</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Ideally, we would like to keep TransactionalId entries in the mapping forever, but for practical purposes we want to evict the ones that are not used any longer to avoid having the mapping growing without bounds. Consequently, we need a mechanism to detect inactivity and evict the corresponding identifiers. In order to do so, the transaction coordinator will periodically trigger the following procedure:</span></p><ol class="lst-kix_tj22yequgne3-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Scan the TransactionalId map in memory. For each </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">TransactionalId -&gt; PID</span><span>&nbsp;entry, </span><span>if it does NOT have a current ongoing transaction in the transaction status map, AND the age of the last completed transaction is greater than the</span><span>&nbsp;</span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.nfan5rg6kjgk" style="color:inherit;text-decoration:inherit">TransactionalId expiration config</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, remove the entry from the map. We will write the tombstone for the TransactionalId, but do not care if it fails, since in the worst case the TransactionalId will persist for a little longer (ie. the transactional.id.expration.ms duration).</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Discussion on PID Expiration</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">: It is possible for a producer to continue using the PID that its TransactionalId was mapped to in a non-transactional way even after the TransactionalId has been expired. If the producer continues writing to partitions without starting a new transaction, its PID will remain in the broker’s sequence table as long as the messages are still present in the log. It is possible for another producer using the same TransactionalId to then acquire a new PID from the transaction coordinator and either begin using transactions or “idempotent mode.” This does not violate any of the guarantees of either the idempotent or transactional producers. </span></p><ol class="lst-kix_gpfkle35f9g6-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">For the transactional producer, we guarantee that there can be only one active producer at any time. Since we ensure that active transactions are completed before expiring an TransactionalId, we can guarantee that a zombie producer will be fenced when it tries to start another one (whether or not a new producer with the same TransactionalId has generated a new PID mapping).</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>For the idempotent producer (i.e., producer that do not use transactional APIs), currently we do not make any cross-session guarantees in any case</span><span>. In the future, we can extend this guarantee by having the producer to periodically send </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InitPidRequest</span><span>&nbsp;to the transaction coordinator to keep the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">TransactionalId</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;from expiring, which preserves the producer’s zombie defence.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>See </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.loujdamc9ptj" style="color:inherit;text-decoration:inherit">below</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;for more detail on how PID expiration works.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.iixbdsg65d7k" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Added Broker Configurations</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The following configs will be added to the broker:</span></p><table style="margin-left:auto;border-spacing:0;border-collapse:collapse;margin-right:auto"><tbody><tr style="height:33pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:228pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="font-weight:400;font-family:&quot;Courier New&quot;">transactional.id.expiration.ms</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:240.8pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The maximum amount of time in ms that the transaction coordinator will wait before proactively expire a producer TransactionalId without receiving any transaction status updates from it.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span>Default is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">604800000 </span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">(7 days). This allows periodic weekly producer jobs to maintain its id.</span></p></td></tr><tr style="height:33pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:228pt;border-top-color:#000000;border-bottom-style:solid"><a id="id.kbzoiyjf76y"></a><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">max.transaction.timeout.ms</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:240.8pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span>The maximum allowed timeout for transactions. If a client’s requested transaction time exceeds this, then the broker will return an error in </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InitPidRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. This prevents a client from too large of a timeout, which can stall consumers reading from topics included in the transaction.</span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span>Default is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">900000 </span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">(15 min). This is a conservative upper bound on the period of time a transaction of messages will need to be sent.</span></p></td></tr><tr style="height:33pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:228pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">transaction.state.log.min.isr</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:240.8pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal">The minimum number of insync replicas for the transaction state topic. </span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;height:11pt;text-align:justify"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal">Default: 2</span></p></td></tr><tr style="height:33pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:228pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">transaction.state.log.replication.factor</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:240.8pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal">The number of replicas for the transaction state topic.</span></p><p style="padding-top:8pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-size:10.5pt">Default: 3</span></p></td></tr><tr style="height:33pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:228pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">transaction.state.log.num.partitions</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:240.8pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal">The number of partitions for the transaction state topic.</span></p><p style="padding-top:8pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-size:10.5pt">Default: 50</span></p></td></tr><tr style="height:33pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:228pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">transaction.state.log.segment.bytes</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:240.8pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal">The segment size for the transaction state topic.</span></p><p style="padding-top:8pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-size:10.5pt">Default: </span><span style="background-color:#ffffff;color:#222222;font-size:10.5pt">104857600 bytes.</span></p></td></tr><tr style="height:33pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:228pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:10pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:left;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">transaction.state.log.load.buffer.size</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:240.8pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal">The loading buffer size for the transaction stat topic.</span></p><p style="padding-top:8pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-size:10.5pt">Default: </span><span style="background-color:#ffffff;color:#222222;font-size:10.5pt">5242880 bytes.</span></p></td></tr></tbody></table><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.3q05uee3vqcq" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Authorization</span></h2><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">It is desirable to control access to the transaction log to ensure that clients cannot intentionally or unintentionally interfere with each other’s transactions. In this work, we introduce a new resource type to represent the TransactionalId tied to transactional producers, and an associated error code for authorization failures.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.vg8ouwgaahtr"></a><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">case object ProducerTransactionalId extends ResourceType {</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; val name = "ProducerTransactionalId"</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; val errorCode = Errors.TRANSACTIONAL_ID_AUTHORIZATION_FAILED.code</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">}</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span>The transaction coordinator handles each of the following requests: </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.z99xar1h2enr" style="color:inherit;text-decoration:inherit">InitPID</a></span><span>, </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.r6klddrx9ibz" style="color:inherit;text-decoration:inherit">AddPartitionsToTxn</a></span><span>, </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.cqecubxziwie" style="color:inherit;text-decoration:inherit">AddOffsetsToTxn</a></span><span>, and </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.2dnhvqqi7mr7" style="color:inherit;text-decoration:inherit">EndTxn</a></span><span>. Each request to the transaction coordinator includes the producer’s TransactionalId and can be used for authorization. Each of these requests mutates the transaction state of the producer, so they all require </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">Write</span><span>&nbsp;access to the corresponding </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ProducerTransactionalId</span><span>&nbsp;resource. Additionally, the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">AddPartitionsToTxn</span><span>&nbsp;API requires Write access to the topics corresponding to the included partitions, and the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">AddOffsetsToTxn</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;API requires Read access to the group included in the request.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.8rr1zeeiqr32"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Discussion on limitations of coordinator authorization</span><span>: Although we can control access to the transaction log using the TransactionalId, we cannot prevent a malicious producer from hijacking the PID of another producer and writing data to the log. This would allow the attacker to either insert bad data into an active transaction or to fence the authorized producer by forcing an epoch bump. It is not possible for the malicious producer to finish a transaction, however, because the brokers do not allow clients to write control messages. Note also that the malicious producer would have to have </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">Write</span><span>&nbsp;permission to the same set of topics used by the legitimate producer, so it is still possible to use topic ACLs combined with TransactionalId ACLs to protect sensitive topics. The brokers can verify the TransactionalId in produce requests, which ensures that the client has been authorized for transactions, but does not authorize the PID directly. Future work can explore protecting the binding between TransactionalId and PID (e.g. through the use of message authentication codes such as in </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://cwiki.apache.org/confluence/display/KAFKA/KIP-48%2BDelegation%2Btoken%2Bsupport%2Bfor%2BKafka&amp;sa=D&amp;source=editors&amp;ust=1765881840218428&amp;usg=AOvVaw0oQm5z1V33TN_SDgJ3OVJX" style="color:inherit;text-decoration:inherit">KIP-48</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">).</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h1 id="h.pabpm8thuoag" style="padding-top:20pt;margin:0;color:#000000;padding-left:0;font-size:20pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:&quot;Arial&quot;;font-style:normal">Broker</span></h1><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Besides fencing duplicate messages and Zombie writers based on the PID, epoch and sequence number in the produce request as described in the </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.dz78fc8xlsd5" style="color:inherit;text-decoration:inherit">Transactional Producer</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;section, each broker must also handle requests sent from the transaction coordinators for writing the commit and abort markers into the log.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">At the same time, brokers also need to handle requests from clients asking for their assigned coordinator, which will be the leader broker of the transaction topic’s partition calculated from the producer’s TransactionalId.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.mylukj7bg1rf" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Transaction Markers</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Transaction markers are written by the brokers themselves as control messages. As described in the </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.pau6n6buvoee" style="color:inherit;text-decoration:inherit">Message Format</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;section, we will refactor the on-disk message format by separating the message level and message-set level schema, and one of the changes is to use 2 bytes for the message set level attributes (previously it was only one byte). We use one bit from these attributes to indicate that the message set is transactional (i.e. it contains messages which are part of a transaction).</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><table style="border-spacing:0;border-collapse:collapse;margin-right:auto"><tbody><tr style="height:24pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:103.5pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Compression (3)</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:117.8pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Timestamp type (1)</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:99.8pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Transactional (1)</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:144.8pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Unused (11)</span></p></td></tr></tbody></table><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Transaction control messages are normal Kafka messages, but we use one bit in the message-level attributes to indicate that the message is a control message.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><table style="border-spacing:0;border-collapse:collapse;margin-right:auto"><tbody><tr style="height:21pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:105.8pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:left"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Control Flag (1)</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:359.2pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Unused (7)</span></p></td></tr></tbody></table><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The type of the control message is packed into the message key. This proposal adds two </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.4vuehwc5b7s" style="color:inherit;text-decoration:inherit">control message types</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">:</span></p><ol class="lst-kix_85dwzw7kxv5h-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>COMMIT (</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ControlMessageType</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;= 0)</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>ABORT (</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ControlMessageType</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;= 1)</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The schema of the control message value field is specific to the control message type. Generally we assume this schema is opaque to clients. For the transaction markers, we use the following schema:</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">TransactionControlMessageValue =&gt; Version CoordinatorEpoch</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Version =&gt; int16</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; CoordinatorEpoch =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The timestamp in these control messages will always be the log append time. However, this timestamp will not be indexed, and hence seeking by timestamp will ignore control messages. </span></p><a id="id.ptdscx8pzota"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Discussion on Coordinator Fencing: </span><span>The transaction coordinator uses the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.jtpvkrldhb7" style="color:inherit;text-decoration:inherit">WriteTxnMarker</a></span><span>&nbsp;API to write the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMMIT</span><span>&nbsp;and </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ABORT</span><span>&nbsp;control messages to the leaders of partitions included in the transaction. It is possible for an unexpected pause on the coordinator to cause that request to be delivered after another transaction coordinator has been promoted (through partition leader election), and even after the pending transaction was completed and a new transaction begun. The partition leader must be able to detect this situation and reject the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">WriteTxnMarker</span><span>&nbsp;request from the zombie coordinator or the current transaction could be inadvertently committed or aborted. This is the purpose of the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">CoordinatorEpoch</span><span>&nbsp;field that we have included in the control messages. The value of this field corresponds to the leader epoch of the partition in the transaction log topic that the given producer was assigned to. Producers which were assigned different transaction coordinators can (and will) write to the same data partition, so coordinator epoch tracking is per-producer, as is shown in the section below on </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.kivcfzwo3zm1" style="color:inherit;text-decoration:inherit">PID sequence management</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><h3 id="h.8nl3bhqx81oo" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">Last Stable Offset Tracking</span></h3><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span>We require the broker to track the </span><span style="font-style:italic">last stable offset</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;(LSO) for each partition. The LSO is defined as the latest offset such that the status of all transactional messages at lower offsets have been determined (i.e. committed or aborted). &nbsp;To do this, the broker must maintain in memory the set of active transactions along with their initial offsets. The LSO is always equal to the minimum of the initial offsets across all active transactions. This serves two purposes:</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><ol class="lst-kix_mnp305eqj1wg-0 start" start="1" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>In the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">READ_COMMITTED</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;isolation level, only offsets lower than the LSO are exposed to consumers.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The LSO and the initial offset of each transaction is needed when writing entries to the aborted transaction index (discussed in the next section).</span></li></ol><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h3 id="h.g0jqni2vcxg4" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">Aborted Transaction Index</span></h3><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span>In addition to writing the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ABORT</span><span>&nbsp;and </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMMIT</span><span>&nbsp;control messages when receiving </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.bgy58z5pyzw7" style="color:inherit;text-decoration:inherit">WriteTxnMarker</a></span><span>&nbsp;requests from the transaction coordinator, each broker maintains a separate index to keep track of aborted transactions. This facilitates the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.nogouvgyxtup" style="color:inherit;text-decoration:inherit">READ_COMMITTED</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;isolation level for consumers.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Each log segment for a partition is given a separate append-only file to serve as an index for all transactions which were aborted in the corresponding log segment. This file is created lazily upon the first aborted transaction written to each log segment. We assume generally that aborted transactions are rare, so this file should stay small.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The schema for the entries in this index is the following:</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">TransactionEntry =&gt; </span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Version =&gt; int16</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; PID =&gt; int64</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; FirstOffset =&gt; int64</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; LastOffset =&gt; int64</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="font-weight:400;font-family:&quot;Courier New&quot;">&nbsp; LastStableOffset =&gt; int64</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The LSO written in each entry is relative to the time that the entry was inserted. This allows the broker to efficiently scan through the aborted transactions corresponding to a fetch range in order to find the list of transactions from that range which were aborted. The first and last offset are used to filter the transactions which are actually needed for a given fetch response.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">When log segments are deleted, so is the corresponding aborted transaction index. </span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h3 id="h.ft6h1rabna7a" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:left;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">Compacting Transactional Data</span></h3><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The presence of transaction markers creates two challenges for the log cleaner:</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><ol class="lst-kix_5270cv8i6nuv-0 start" start="1" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The log cleaner must be transaction-aware. Messages from aborted transactions should not cause the removal of any messages from committed transactions.</span></li></ol><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><ol class="lst-kix_5270cv8i6nuv-0" start="2" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Care must be taken when removing transaction markers. If the messages from an aborted transaction is removed at or around the same time as the ABORT marker itself, it is possible for a consumer to see the aborted data, yet miss the marker. </span></li></ol><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Making the log cleaner transaction-aware is straightforward. Since we have the aborted transaction index, we can remove the messages from aborted transactions by following the entries from the index (in much the same way that a consumer would). The only restriction is that we cannot clean beyond the LSO. This is unlikely to be much of a restriction in practice since we usually expect the LSO to be contained in the active segment, which is not currently not cleaned.</span></p><p style="padding-top:8pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The second issue is similar to a known </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://issues.apache.org/jira/browse/KAFKA-4545&amp;sa=D&amp;source=editors&amp;ust=1765881840236686&amp;usg=AOvVaw23OI36cAaoxPQri45Nyvuh" style="color:inherit;text-decoration:inherit">bug</a></span><span>&nbsp;in the log cleaner, and we propose to piggyback on top of the solution to address it.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.kivcfzwo3zm1" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">PID-Sequence Management</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>For each topic partition, the broker will maintain a mapping in memory from the PID to the epoch, sequence number, the last offset successfully written to the log, and the coordinator epoch from each producer (for transactional producers). T</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">he source of truth for this information is always the log itself.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h3 id="h.vjqzk4b5fdhg" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">PID Snapshots</span></h3><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>When a broker is restarted, it is possible to recreate the entire map of PIDs and corresponding sequence numbers by scanning the full log. However, it is more efficient to write periodic checkpoints to disk containing the state of the map at a given offset.</span><span>&nbsp;We </span><span>call this </span><span>a </span><span style="font-style:italic">PID Snapshot</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. When the broker resumes, it only needs to read the latest snapshot and scan the remainder of the log from the corresponding snapshot offset. This is similar to how the log cleaner works. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>If for whatever reason, the snapshot file is deleted or the checkpointed offset is out of range, we can rebuild the map by scanning the full log</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. This can happen, for example, in a power failure scenario if the log has not been flushed to disk. To make it more likely that we can recover without requiring a full scan, we can keep several checkpoint files: if the last checkpointed offset is out of range, we can try one of the earlier ones. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The schema for the PID snapshot file is provided below:</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">PidSnapshot =&gt; Version CRC [PidEntry]</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Version =&gt; int16</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; CRC =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; PidEntry =&gt; PID Epoch Sequence LastOffset</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; PID =&gt; int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; Epoch =&gt; int16</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; Sequence =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; LastOffset =&gt; int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; CoordinatorEpoch =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The name of the snapshot files indicates the corresponding offset from the log that the snapshot was taken from. For example, “000000000050.pidsnapshot” indicates the snapshot was taken from offset 50 (in general, we will include 20 characters for the offset as is currently done with log segments). </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>In the interests of not scanning too far back in the log on startup or when log truncation happens during leader failover, we will create snapshots on a periodic basis. A reasonable period seems to be 30 to 60 seconds. We will maintain the two most recent snapshots so that in the worst case, we would have to scan at most 60 to 120 seconds of the log to rebuild the new Pid-Sequence mapping.</span></p><h3 id="h.loujdamc9ptj" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">PID Expiration</span></h3><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>It would be undesirable to let the PID-sequence map grew indefinitely, so we need a mechanism for </span><span style="font-weight:700">PID expiration</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. We expire producerId’s when the age of the last message with that producerId exceeds the transactionalId expiration time or the topic’s retention time, whichever happens sooner. This rule applies even for non-transactional producers.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>If the transactionalId expiration time is less than the topic’s retention time, then the producerId will be ‘logically’ expired. In particular, its information will not be materialized in the producerId-&gt;sequence mapping, but the messages with that producerId would remain in the log until they are eventually removed.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Discussion on PID expiration and Request Rejection.</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;Suppose that a producer sends no writes to a topic partition for a long enough duration that its PID is expired by the leader of that partition. If it then attempts to send another write using the next expected sequence number, the broker must reject it with an error indicating the sequence number is out of range. If not, we risk violating deduplication guarantees since we cannot know if the new message is a duplicate of a message which was already deleted. This may cause “false negatives” since the broker could be unnecessarily rejecting the request, but users can control the risk of this through the topic’s retention settings.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Discussion on PID Expiration for Compacted Topics</span><span>.</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;PID expiration on compacted topics is a bit trickier since messages may be deleted in a different order than they were written by the producer. Hence we take a slightly different approach: before beginning a round of cleaning, we build a set of candidate PIDs for expiration. For example, we can populate the candidates with the PIDs which have not written to the latest log segment. As we iterate through the messages of the log, we remove entries from the candidate set as soon as we find any entry which will be retained. Once we reach the end, we know that any remaining PIDs can be removed as long as the last written offset is smaller than the next dirty offset.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The difficulty with this approach is that the amount of elapsed time before PID expiration is then nondeterministic. If a producer is “unlucky,” its last message may be overwritten by another producer shortly after its own write. If this was its only entry in the log and we expire the PID, then the producer will receive an </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.bj0lez6mjxeb" style="color:inherit;text-decoration:inherit">InvalidSequenceNumber</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;error on its next produce attempt. We therefore need to ensure that the last sequence number for each producer is retained in the log for a deterministic amount of time. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">To address this problem, we propose to preserve the last epoch and sequence number written by each producer. This is allowed by the new message format we are proposing in this document. As before, we retain this message until the transactionalId expiration timeout or the topic’s retention time elapses, whichever happens sooner. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.m9yg71bk9idd" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Coordinator-Broker request handling</span></h2><a id="id.x3qeh1kmz4ka"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>When receiving the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.jtpvkrldhb7" style="color:inherit;text-decoration:inherit">WriteTxnMarkerRequest</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;from a transaction coordinator, the following steps will be executed to send back the response.</span></p><ol class="lst-kix_dcv7ib5lvp4v-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the broker has a corresponding PID, verify that the received producer epoch is greater than or equal to the current epoch. If not, return </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.7mxekgcpri9x" style="color:inherit;text-decoration:inherit">InvalidProducerEpoch</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. Otherwise, insert the PID to its maintained list and update the epoch if necessary.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Append a </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMMIT</span><span>&nbsp;or </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ABORT transaction marker</span><span>&nbsp;as a control message to each of the indicated partitions in the request, depending on the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">Marker</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;field of the request. Wait for the message to be fully replicated and then reply OK.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">Marker</span><span>&nbsp;field is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMMIT</span><span>&nbsp;and partition lists include the internal offset topic, then proceed to </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.55yzhvkppi6m" style="color:inherit;text-decoration:inherit">reflect</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;the committed offsets into its consumer coordinator’s cache.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">Marker</span><span>&nbsp;field is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ABORT</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, add an entry to the aborted transaction index using the current LSO and the starting and ending offsets from the transaction.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Update the LSO for the partition if necessary (i.e. if the current LSO is one less than the initial offset of the completed transaction).</span></li></ol><a id="kix.uu5bwrue4nmm"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Discussion on Transaction-based Fencing</span><span style="font-weight:700">. </span><span>Upon failure recovery, a producer instance needs to fence off earlier instances before it resumes producing new data. It does it through the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.z99xar1h2enr" style="color:inherit;text-decoration:inherit">InitPidRequest</a></span><span>&nbsp;as the epoch number returned in the response is strictly greater than any previous epochs that has been ever returned in other </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InitPIDResponse</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;for this TransactionalId.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Now the question is, with TransactionalId expiration based on its producer’s transaction activity, i.e., if the producer does not send any of the transaction requests to the coordinator for some period of time, then its </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">TransactionalId -&gt; PID</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;will expire, so is zombie writer fencing still effective? The short answer is “yes” and the long answer goes in two folds:</span></p><ol class="lst-kix_gn9iznjyvy0-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>After the producer has already lost its TransactionalId entry (and hence becomes a zombie), if the producer ever tries to start a new transaction, it must talk to the coordinator and hence will be notified that its PID is no longer valid. </span><span style="font-style:italic">If the producer does not ever start a transaction again, then it can continue sending messages with the old PID and this zombie writer is hence not fenced, which is OK according to our semantics. </span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">We only guarantee that two producers sharing the same TransactionalId are not allowed to execute transactions concurrently.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the zombie has an ongoing transaction at the time its TransactionalId mapping is expired, we know that the transaction would have been aborted first since we ensure that the TransactionalId expiration time is strictly larger than the transaction timeout. Hence, any future transactional requests will receive the fatal </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ProducerFencedException</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, and the producer will abort. </span></li></ol><h2 id="h.d42xl2uz6r8j" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Client-Broker request handling</span></h2><a id="kix.oz3ruj5vub78"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>When receiving the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.z99xar1h2enr" style="color:inherit;text-decoration:inherit">InitPidRequest</a></span><span style="font-weight:400;font-family:&quot;Courier New&quot;">&nbsp;</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">from a producer, the following steps will be executed in order to send back the response:</span></p><ol class="lst-kix_3ndwxni7n3wv-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the TransactionalId is provided, forward the request to the transaction coordinator module and follow the procedure </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.jro89lml46du" style="color:inherit;text-decoration:inherit">here</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><ol class="lst-kix_3ndwxni7n3wv-0" start="2" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Assign a new PID to the producer and send a response.</span></li></ol><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.8biz78fs2t9"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>When receiving the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.97qeo7mkx9jx" style="color:inherit;text-decoration:inherit">GroupCoordinatorRequest</a></span><span>&nbsp;from a producer with the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">CoordinatorType</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;as “transaction,” the following steps will be executed to send back the response.</span></p><ol class="lst-kix_sq2mty8y4cla-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Compute the partition id based on the provided TransactionalId.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Check its metadata for the topic-partition’s leader, if exist then return the broker information; otherwise reply </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">CoordinatorNotAvailable</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;error.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="kix.x4k78mufyunt"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>When receiving a </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.mkk6ckzh7jxl" style="color:inherit;text-decoration:inherit">ProduceRequest</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;from a producer, the following steps will be executed to send back the response.</span></p><ol class="lst-kix_xqezlaka82l9-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Check whether the produce request has a PID. </span></li></ol><ol class="lst-kix_xqezlaka82l9-1 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Clients which have upgraded, but which are not yet using idempotent or transactional features will have an invalid PID and will go through the normal produce logic. </span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the request has a PID, check whether the topic supports the new message format. If not, respond with the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">UNSUPPORTED_FOR_MESSAGE_FORMAT</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;error.</span></li></ol><ol class="lst-kix_xqezlaka82l9-0" start="2" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Check the sequence number map to determine if the PID is already present. </span></li></ol><ol class="lst-kix_xqezlaka82l9-1 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">If it is not, check sequence number. </span></li></ol><ol class="lst-kix_xqezlaka82l9-2 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:108pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">If it is 0, insert the PID, epoch, and sequence number into the PID mapping table and proceed to append the entries.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:108pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the sequence is not zero, return the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.bj0lez6mjxeb" style="color:inherit;text-decoration:inherit">InvalidSequenceNumber</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;error code.</span></li></ol><ol class="lst-kix_xqezlaka82l9-1" start="2" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:72pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">If the PID is present in the mapping, check the epoch. </span></li></ol><ol class="lst-kix_xqezlaka82l9-2 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:108pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the epoch is older than the current one, return </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.7mxekgcpri9x" style="color:inherit;text-decoration:inherit">InvalidProducerEpoch</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;error code.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:108pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">If the epoch matches the current epoch, check the sequence number:</span></li></ol><ol class="lst-kix_xqezlaka82l9-3 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:144pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">If it matches the current sequence number, allow the append. </span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:144pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the sequence number is older than the current sequence number, return </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.cx6ufvjedx6a" style="color:inherit;text-decoration:inherit">DuplicateSequenceNumber</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. </span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:144pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If it is newer, return </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InvalidSequenceNumber</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></li></ol><ol class="lst-kix_xqezlaka82l9-2" start="3" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:108pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>If the epoch is newer, check the sequence number. If it is 0, update the mapping and allow the append. If it is not 0, return </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">InvalidSequenceNumber</span><span>.</span></li></ol><a id="id.hg94n33p3rmp"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>When receiving a </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.p3hvy6kufvd1" style="color:inherit;text-decoration:inherit">FetchRequest</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;from a consumer, the following steps will be executed to send back the response:</span></p><ol class="lst-kix_lcuwlsa6z8uz-0 start" start="1" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>If the isolation level of the request is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">READ_UNCOMMITTED</span><span>, follow the normal fetch flow. In the remaining steps, we assume </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">READ_COMMITTED</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></li></ol><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><ol class="lst-kix_lcuwlsa6z8uz-0" start="2" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Fetch the data from the log according to existing logic. The initial offset is taken from the fetch request and we use the max fetch size to find the range of the log file to return in the fetch response.</span></li></ol><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><ol class="lst-kix_lcuwlsa6z8uz-0" start="3" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Determine the range of offsets from the fetched data. We know the initial offset from the request, but we need to do some work to find the final offset. We propose to use the offset index to lookup an approximate upper bound for the last offset in the fetch range using the last byte position in the log file included in the fetched data.</span></li></ol><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><ol class="lst-kix_lcuwlsa6z8uz-0" start="4" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Scan the aborted transaction indices of all log segments greater than or equal to the segment including the first fetched offset. Build a list of all aborted transactions which intersect the fetch range. We can stop when we have either reached an entry with an LSO greater than or equal to the last offset in the fetch, or when there are no more segment indices to scan.</span></li></ol><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><ol class="lst-kix_lcuwlsa6z8uz-0" start="5" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Return the fetched data and the list of aborted transactions to the client.</span></li></ol><h2 id="h.cbb5tvp30uqe" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Authorization</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">From a security perspective, there are three main points we need to address:</span></p><ul class="lst-kix_3oqw8rm66zow-0 start" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Authorize clients to produce to a topic (including the writing of control messages)</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Authorize clients to consume from a topic</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Authorize clients to access the transaction log (via coordinator only)</span></li></ul><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">We can address the first two points primarily by relying on ACLs that grant read/write access to topics. There is no change required to the security framework in the case we use read/write operations with the topic resource. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>However, we will introduce additional authorization to produce transactional data. This can be used to minimize the risk of an “endless transaction attack,” in which a malicious producer writes transactional data without corresponding </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMMIT</span><span>&nbsp;or </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ABORT</span><span>&nbsp;markers in order to prevent the LSO from advancing and consumers from making progress. We can use the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.vg8ouwgaahtr" style="color:inherit;text-decoration:inherit">ProducerTransactionalId</a></span><span>&nbsp;resource introduced above to ensure that the producer is authorized to write transactional data. The producer’s </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">TransactionalId</span><span>&nbsp;is also included in the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.mkk6ckzh7jxl" style="color:inherit;text-decoration:inherit">ProduceRequest</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;schema. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Additionally, since the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.jtpvkrldhb7" style="color:inherit;text-decoration:inherit">WriteTxnMarker</a></span><span>&nbsp;API should only be allowed if the request came from another broker, the client must have </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ClusterAction</span><span>&nbsp;authorization on the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">Cluster</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;resource. This is the same way that other inter-broker APIs are protected. Also note that this is the only API through which a control message can be added to the log. An attempt to do so through the Produce API will be rejected.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>For the transaction log, we can also use ACLs that grant read/write access to the transaction log, </span><span>although in this case access is through the coordinator and the coordinator is responsible for authorizing access</span><span>&nbsp;through authorization of the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">TransactionalId</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. Clients will not be allowed to write directly to the transaction log using the Produce API, though it is useful to make it accessible to consumers with Read permission for the purpose of debugging.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">In addition, this design protocol does not prevent a malicious producer client from “hijacking” another producer’s PID and hence its transactions (since the PID itself is a random 64-bit, in practice it should be very rare), as long as it is authorized to use transaction and / or write to one of the corresponding data partitions. We leave this for future work.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h1 id="h.qv0jmz7iwucq" style="padding-top:20pt;margin:0;color:#000000;padding-left:0;font-size:20pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:&quot;Arial&quot;;font-style:normal">Consumer Coordinator</span></h1><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>As mentioned in the </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.f0eotchjto1f" style="color:inherit;text-decoration:inherit">summary</a></span><span>, many Kafka streaming applications need to both consume from input topics and produce to output topics at the same time. When consumer offsets are committed for the input topics, they need to be done along with the produced transactions as well, such that </span><span style="background-color:#ffffff;color:#333333;font-style:italic">for each message consumed from the input Kafka topics, the result message(s) of processing this message will be reflected in the output Kafka topics exactly once, even under failures</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>In order to support this scenario, we need to make the consumer coordinator transaction-aware. More specifically, we need a new API which allows the producer to send offset commits as part of a transaction. For this we introduce the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.5695qbm2hne" style="color:inherit;text-decoration:inherit">TxnOffsetCommitRequest</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;API.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.yct0oc2nyy0h" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Client-Coordinator request handling</span></h2><a id="id.55yzhvkppi6m"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>When receiving the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.5695qbm2hne" style="color:inherit;text-decoration:inherit">TxnOffsetCommitRequest</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;from a producer, the following steps will be added before proceed to the checking consumer group metadata.</span></p><ol class="lst-kix_gzdu38n4pxir-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Skip the check for whether or not the consumer is valid for the current generation id and the member list (the request does actually not contain this information), i.e. blindly accept the request and proceed to the next step directly.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Check if the specified </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">PID</span><span>&nbsp;is recognized and the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">Epoch</span><span>&nbsp;is correct</span><span>, if not reply with </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.7mxekgcpri9x" style="color:inherit;text-decoration:inherit">InvalidProducerEpoch</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">; otherwise proceed to the next step.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Append to the offset topic, but skip updating the offset cache in the delayed produce callback, until a </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.jtpvkrldhb7" style="color:inherit;text-decoration:inherit">WriteTxnMarker</a></span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.jtpvkrldhb7" style="color:inherit;text-decoration:inherit">Request</a></span><span>&nbsp;from the transaction coordinator is </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.x3qeh1kmz4ka" style="color:inherit;text-decoration:inherit">received</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;including the offset topic partitions.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Discussion on NOT Checking Consumer Status for Transactional Offset Commits.</span><span>&nbsp;</span><span>Note that in the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.5695qbm2hne" style="color:inherit;text-decoration:inherit">TxnOffsetCommitRequest</a></span><span>&nbsp;we do not include the consumer group memberID and the generationID fields, and hence the consumer coordinator cannot validate this information upon receiving the request as we do in the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">OffsetCommitRequest</span><span>. This is not necessary because if a rebalance has happened and this consumer instance becomes a zombie, even if this offset message is appended in the offset topic, the transaction will be rejected later on when it tries to commit the transaction via the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.2dnhvqqi7mr7" style="color:inherit;text-decoration:inherit">EndTxnRequest</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.ul06rr7fcm7w" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Consumer Coordinator Startup</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">In addition, when initializing the consumer coordinator by bootstrapping from the offset topic, we also need to change the procedure as follows:</span></p><ol class="lst-kix_xc5d5ew3cd2w-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>For each consumer offset message read from the offset topic, check if </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">PID</span><span>&nbsp;and </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">Epoch</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;fields are specified, if yes hold it from putting into the cache.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>For each control message read from the offset topic, if it is a </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMMIT</span><span>&nbsp;transaction marker then put the previously kept offset entry into the cache; if it is an </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ABORT</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;transaction maker then forget the previously kept offset entry.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.39evp18kkic5"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Discussion on Reusing Offset Topics within Transactions</span><span>. An alternative approach to enable applications to commit input topic offsets as part of an output transaction is to use a separate topic. More specifically, suppose an application task that consumes from a topic </span><span style="font-style:italic">T</span><span style="vertical-align:sub;font-style:italic">C</span><span style="font-style:italic">, </span><span>processes the input messages, and produces to a topic </span><span style="font-style:italic">T</span><span style="vertical-align:sub;font-style:italic">P</span><span style="font-style:italic">. </span><span>The application task can use a separate topic, e.g., </span><span style="font-style:italic">T</span><span style="vertical-align:sub;font-style:italic">io </span><span>, to store the input offsets. The application persists the consumed offsets in this way so that the output messages and messages containing the input offsets are produced as a transaction of messages atomically: </span><span>the output messages are successfully produced to </span><span style="font-style:italic">T</span><span style="vertical-align:sub;font-style:italic">p</span><span>&nbsp;iff the input offset messages are successfully produced (committed) to </span><span style="font-style:italic">T</span><span style="vertical-align:sub;font-style:italic">io</span><span>. There are pros and cons for this alternative approaches regarding implementation complexity, operations / tooling, and security, etc, which is summarized in this </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://docs.google.com/document/d/1m62JZGDnAURKZbtlVMokhDk-0RG3qGysyesEPeRrPqQ&amp;sa=D&amp;source=editors&amp;ust=1765881840285032&amp;usg=AOvVaw3wthspWBffEwviZkTM9SRq" style="color:inherit;text-decoration:inherit">doc</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. We decided to reuse the offset topic primarily for its tooling and operation simplicity.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h1 id="h.od2aaa53rbv" style="padding-top:20pt;margin:0;color:#000000;padding-left:0;font-size:20pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:&quot;Arial&quot;;font-style:normal">Consumer</span></h1><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Consumers need to recognize the </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.mylukj7bg1rf" style="color:inherit;text-decoration:inherit">transaction marker</a></span><span>&nbsp;control messages when fetching from the brokers, and based on its configuration parameter to determine whether it wants to return committed messages only or all messages (no matter if they are already committed or not). In either case, messages are always delivered in </span><span>offset</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;order.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.wvdrakld4019" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Added Configurations and Consume Protocol</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The following configs will be added to the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">KafkaConsumer</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;client:</span></p><table style="margin-left:auto;border-spacing:0;border-collapse:collapse;margin-right:auto"><tbody><tr style="height:33pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:123pt;border-top-color:#000000;border-bottom-style:solid"><a id="id.nogouvgyxtup"></a><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="font-weight:400;font-family:&quot;Courier New&quot;">isolation</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">.</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">level</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:342pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Here are the possible values:</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="font-weight:400;font-family:&quot;Courier New&quot;">read</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">_</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">uncommitted</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">:</span><span>&nbsp;</span><span>consume all available messages in offset ordering</span><span>. </span><span>This is the default value.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="font-weight:400;font-family:&quot;Courier New&quot;">read_</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">committed</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">:</span><span>&nbsp;</span><span>only consume non-transactional messages or transactional messages that are already committed, in offset ordering.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span>Default: </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">read_uncommitted</span></p></td></tr></tbody></table><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The isolation level is passed to the brokers in the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.p3hvy6kufvd1" style="color:inherit;text-decoration:inherit">FetchRequest</a></span><span>. </span><span>For </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">READ_UNCOMMITTED</span><span>, the consumer uses the same fetch logic as previous versions of Kafka</span><span>. For </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">READ_COMMITTED</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, the consumer must do some extra work to filter aborted transactions. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Recall that the fetch response contains a list of the aborted transactions which intersect with the fetch range. Any transactions included in a fetch which are not among the aborted transactions are assumed to be committed. The broker will not return records from any offsets lower than the current LSO in </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">READ_COMMITTED</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, so we are guaranteed that all transactions received in the fetch have been completed.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Initially, the aborted transactions from the fetch response are arranged in a minheap, which is</span><span>&nbsp;</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">ordered by their initial offsets. Separately, we maintain a set of the PIDs which have aborted transaction ranges which contain the consumer’s current position. The logic to follow when processing the fetched data is as follows:</span></p><ol class="lst-kix_m7gyp3gged0c-0 start" start="1" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>If the message is a transaction control message, and the status is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ABORT</span><span>, then remove the corresponding PID from the set of PIDs with active aborted transactions. If the status is </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMMIT</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, ignore the message.</span></li></ol><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><ol class="lst-kix_m7gyp3gged0c-0" start="2" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">If the message is a normal message, compare the offset and PID with the head of the aborted transaction minheap. If the PID matches and the offset is greater than or equal to the corresponding initial offset from the aborted transaction entry, remove the head from the minheap and insert the PID into the set of PIDs with aborted transactions.</span></li></ol><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><ol class="lst-kix_m7gyp3gged0c-0" start="3" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Check whether the PID is contained in the aborted transaction set. If so, discard the record set; otherwise, add it to the records to be returned to the user.</span></li></ol><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">When seeking to a new offset, the consumer will clear the transaction state for that partition. It can always rebuild it after the next fetch response is received.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.h19xy0kiexf0"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Discussion on Seeks.</span><span>&nbsp;The isolation level </span><span>will be used to determine the behavior of seeks. In </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">READ_UNCOMMITTED</span><span>, the seek API behaves exactly as it does currently. In </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">READ_COMMITTED</span><span>, the only difference is that the consumer is not allowed to seek beyond the log’s LSO. In other words, a call to </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">seekToEnd()</span><span>&nbsp;will result in the offset being set to the LSO instead of the log end offset. For this, we have updated the </span><span style="text-decoration-skip-ink:none;font-family:&quot;Courier New&quot;;-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.d2pvxax47irz" style="color:inherit;text-decoration:inherit">ListOffsets</a></span><span>&nbsp;API to support retrieval of the LSO.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Discussion on Pro-active Transaction Timeout.</span><span>&nbsp;One motivation to let transaction coordinator to pro-actively timeout transactions is that upon producer failure, we do not want to rely on the producer eventually recovering and completing the transaction: for example, if a producer fails within a transaction and the coordinator does not pro-actively abort it, this transaction will become a “dangling” transaction that will not be completed until the producer resumes with the same TransactionalId, and any consumers fetching on the partitions included in this transaction in </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">READ_COMMITTED</span><span>&nbsp;will be effectively blocked waiting for the LSO to advance. This issue will be more severe if one topic partition has </span><span>multiple transactional producers writing to it in an interleaving manner</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, since one dangling transaction will cause all other transactions to not be able to be consumed due to the offset ordering.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>One question though, is whether a pro-active timeout of a transaction will still fence a zombie writer. The short answer is yes. Upon timing out and aborting the transaction, the coordinator will bump the epoch associated with the PID and write </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ABORT</span><span>&nbsp;markers to all partitions which had been included in the transaction. If the zombie is still attempting to write to any of these partitions, it will be fenced as soon as the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ABORT</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;marker is written. Alternatively, if it attempts to commit or abort the transaction, it will also be fenced by the coordinator.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.z9b0a6k2a3zm"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Discussion on Transaction Ordering. </span><span>In this design, we are assuming that the consumer delivers messages in offset order to preserve the behavior that Kafka users currently expect. A different way is to deliver messages in “transaction order”: as the consumer fetches commit markers, it enables the corresponding messages to be consumed. For example, say that we have two TransactionalIds </span><span style="font-style:italic">P</span><span style="vertical-align:sub;font-style:italic">1</span><span>&nbsp;and </span><span style="font-style:italic">P</span><span style="vertical-align:sub;font-style:italic">2</span><span>&nbsp;both producing to the same given topic partition and the messages of these two TransactionalIds are interleaved in the log. A consumer of this partition allocates a buffer for the messages of </span><span style="font-style:italic">P</span><span style="vertical-align:sub;font-style:italic">1</span><span>&nbsp;and another for the messages of </span><span style="font-style:italic">P</span><span style="vertical-align:sub;font-style:italic">2</span><span>. Upon receiving a commit marker for </span><span style="font-style:italic">P</span><span style="vertical-align:sub">2</span><span>, the consumer delivers the buffered messages of </span><span style="font-style:italic">P</span><span style="vertical-align:sub;font-style:italic">2</span><span>&nbsp;immediately. If it receives a commit marker for </span><span style="font-style:italic">P</span><span style="vertical-align:sub;font-style:italic">1</span><span>&nbsp;while delivering the messages of </span><span style="font-style:italic">P</span><span style="vertical-align:sub;font-style:italic">2</span><span>, then it queues the messages of </span><span style="font-style:italic">P</span><span style="vertical-align:sub;font-style:italic">1</span><span>&nbsp;to be delivered after the ones of </span><span style="font-style:italic">P</span><span style="vertical-align:sub">2</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">One main advantage of this approach is that it delivers messages as soon as the commit marker is processed, and hence improves latency. The main reason for stepping away from this option is offset management: because consumed messages do not follow offset order, an application that manually manages offsets needs to store more information than just the last offset consumed. The application needs to at least keep the first missing message and all other messages it has already processed; when automating offset commits for commit order delivery, we must track the offset of the last commit marker processed. Upon resuming a consumer for the partition, we need to start processing commit markers from the last persisted, and for every new commit marker the consumer processes, it needs to scan the logs backwards to find the messages to deliver, assuming they are not already buffered. If they are already buffered, then it is just a matter of delivering. To illustrate the worst case scenario, say we have the following content in the log:</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.0;text-indent:36pt;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span>C</span><span style="vertical-align:sub">2</span><span>, M</span><span style="vertical-align:sub">3</span><span>, C</span><span style="vertical-align:sub">1</span><span>, M</span><span style="vertical-align:sub">2</span><span>, M</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:sub;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">1</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><ul class="lst-kix_olo1v9h26sum-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>M</span><span style="vertical-align:sub">1</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;is the head (offset 0) </span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>M</span><span style="vertical-align:sub">1</span><span>&nbsp;is associated to commit C</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:sub;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">1</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>M</span><span style="vertical-align:sub">2</span><span>&nbsp;and M</span><span style="vertical-align:sub">3</span><span>&nbsp;are associated to commit C</span><span style="vertical-align:sub">2</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;</span></li></ul><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.0;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Say that a consumer reads </span><span style="font-style:italic">C</span><span style="vertical-align:sub;font-style:italic">1</span><span>, </span><span style="font-style:italic">M</span><span style="vertical-align:sub;font-style:italic">2</span><span>, </span><span style="font-style:italic">M</span><span style="vertical-align:sub;font-style:italic">1</span><span>&nbsp;and delivers </span><span style="font-style:italic">M</span><span style="vertical-align:sub;font-style:italic">1</span><span>&nbsp;after processing </span><span style="font-style:italic">C</span><span style="vertical-align:sub;font-style:italic">1</span><span>. The consumer commits the offset for </span><span style="font-style:italic">C</span><span style="vertical-align:sub;font-style:italic">1</span><span>, which is 2. The consumer crashes and some other consumer in the group picks up the partition. The new consumer resumes from offset 2, it reads </span><span style="font-style:italic">C</span><span style="vertical-align:sub;font-style:italic">2</span><span>&nbsp;and</span><span style="font-style:italic">&nbsp;M</span><span style="vertical-align:sub;font-style:italic">3</span><span>, but once it processes the commit marker, it does not know what other messages from that transaction it is missing. In particular, it is missing </span><span style="font-style:italic">M</span><span style="vertical-align:sub;font-style:italic">2</span><span>&nbsp;and it needs to scan backwards from C1 to find </span><span style="font-style:italic">M</span><span style="vertical-align:sub;font-style:italic">2</span><span>. Once it finds </span><span style="font-style:italic">M</span><span style="vertical-align:sub;font-style:italic">2</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">, it continues to scan backwards depending on the commit sequence number of the message: if it is greater than zero, then it needs to keep scanning.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">It is important to note that this behavior can be implemented at a later time if we determine that it is useful and critical for the success of the feature. For the moment, given that we have no strong evidence that applications can benefit from the commit order option, we opted for not implementing it. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.0;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h1 id="h.pau6n6buvoee" style="padding-top:20pt;margin:0;color:#000000;padding-left:0;font-size:20pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:&quot;Arial&quot;;font-style:normal">Message Format</span></h1><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">In order to add new fields such as PID and epoch into the produced messages for transactional messaging and de-duplication, we need to change Kafka’s message format and bump up its version (i.e. the “magic byte”). More specifically, we need to add the following fields into each message:</span></p><ul class="lst-kix_o2mt2qmw9cun-0 start" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">PID =&gt; int64</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">Epoch =&gt; </span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">int16</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Sequence number =&gt; int32</span></li></ul><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Adding these fields on the message-level format schema potentially adds a considerable amount of overhead; on the other hand, at least the PID and epoch will never change within a set of messages from a given producer. We therefore propose to enhance the current concept of a </span><span style="font-weight:700">message set</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;by giving it a separate schema from an individual message. In this way, we can locate these fields only at the message set level which allows the additional overhead to be amortized across batches of messages rather than paying the cost for each message separately. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Both the epoch and sequence number will wrap around once int16_max and int32_max are reached. Since there is a single point of allocation and validation for both the epoch and sequence number, wrapping these values will not break either the idempotent or transactional semantics. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">For reference, the current message format (v1) is the following:</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">MessageSet =&gt; [Offset MessageSize Message]</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Offset =&gt; int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; MessageSize =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">Message =&gt; Crc Magic Attributes Timestamp Key Value</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Crc =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Magic =&gt; int8</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Attributes =&gt; int8</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Timestamp =&gt; int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Key =&gt; bytes</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Value =&gt; bytes</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>A message set is a sequence of messages. To support compression, we currently play a trick with this format and allow the compressed output of a message set to be embedded in the value field of another message (a.k.a., the “wrapper message”). In this design, we propose to extend this concept to non-compressed messages and to decouple the schema for the message wrapper (which contains the compressed message set). This allows us to maintain a separate set of fields at the message set level and avoid some costly redundancy (old fields in </span><span style="color:#0000ff">blue</span><span>, changes in </span><span style="color:#ff0000">red</span><span>):</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#0000ff;font-weight:400;font-family:&quot;Courier New&quot;">MessageSet</span><span style="color:#0000ff;font-weight:400;font-family:&quot;Courier New&quot;">&nbsp;=&gt;</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp;</span></p><ul class="lst-kix_c537b0yjw9gz-0 start" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#0000ff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">FirstOffset =&gt; int64</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#0000ff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Length =&gt; int32</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#0000ff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">CRC =&gt; int32</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#0000ff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Magic =&gt; int8 &nbsp;/* bump up to “2” */</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Attributes =&gt; int16</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">LastOffsetDelta =&gt; int32</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">FirstTimestamp =&gt; int64</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">MaxTimestamp =&gt; int64</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">PID =&gt; int64</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Epoch =&gt; int16</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">FirstSequence =&gt; int32</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;font-family:&quot;Courier New&quot;">Messages =&gt; </span><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Message1, Message2, … , MessageN</span></li></ul><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#0000ff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Message =&gt;</span></p><ul class="lst-kix_o0kdhzzdksr6-0 start" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Length =&gt; varint</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Attributes =&gt; int8</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">TimestampDelta =&gt; varint</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">OffsetDelta =&gt; varint</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">KeyLen =&gt; varint</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Key =&gt; data</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">ValueLen =&gt; varint</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Value =&gt; data</span></li></ul><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The ability to store some fields only at the message set level allows us to conserve space considerably when batching messages into a message set. For example, there is no need to write the PID within each message since it will always be the same for all messages within each message set. In addition, by separating the message level format and message set format, now we can also use variable-length types for the inner (relative) offsets and save considerably over a fixed 8-byte field size. Note also that there is only a single CRC computed for the full message set.</span></p><h2 id="h.tp1lvfionrzv" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Message Set Fields</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The first four fields of a message set in this format </span><span style="font-style:italic">must to</span><span>&nbsp;be the same as the existing format because any fields before the magic byte cannot be changed in order to provide a path for upgrades following a similar approach as was used in </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://cwiki.apache.org/confluence/display/KAFKA/KIP-32%2B-%2BAdd%2Btimestamps%2Bto%2BKafka%2Bmessage&amp;sa=D&amp;source=editors&amp;ust=1765881840319109&amp;usg=AOvVaw0KzRALjT5ZyE6HtIZZANCk" style="color:inherit;text-decoration:inherit">KIP-32</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. Clients which request an older version of the format will require conversion on the broker.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The offset provided in the message set header represents the offset </span><span style="font-weight:700">of the first message in the set</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. Similarly, we the sequence number field represents the sequence number of the first message. We also include an “offset delta” at the message set level to provide an easy way to compute the last offset / sequence number in the set: i.e. the starting offset of the next message set should be “offset + offset delta”. This also allows us to search for the message set corresponding to a particular offset without scanning the individual messages, which may or may not be compressed. Similarly, we can use this to easily compute the next expected sequence number.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The message set also includes the timestamp of the first message included in the message set. All message timestamps are computed relative to this timestamp (note that the timestamp delta in each message is a signed integer since timestamps are not assumed to be monotonic). The max timestamp, which is needed for indexing, can be derived by summing the initial timestamp and the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">MaxTimestampDelta</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;field, which is exposed in the message set.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The offset, sequence number, and offset delta values of the message set </span><span style="font-style:italic">never</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;change after the creation of the message set. The log cleaner may remove individual messages from the message set, and it may remove the message set itself once all messages have been removed, but we must preserve the range of sequence numbers that were ever used in a message set since we depend on this to determine the next sequence number expected for each PID.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Message Set Attributes</span><span>: The message set attributes are essentially the same as in the existing format, though we have added an additional byte for future use. In addition to the existing 3 bits used to indicate the compression codec &nbsp;and 1 bit for timestamp type, we will use another bit to indicate that the message set is transactional (see </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.mylukj7bg1rf" style="color:inherit;text-decoration:inherit">Transaction Markers</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;section). This lets consumers in READ_COMMITTED know whether a transaction marker is expected for a given message set.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><table style="border-spacing:0;border-collapse:collapse;margin-right:auto"><tbody><tr style="height:24pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:103.5pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Compression (3)</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:117.8pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Timestamp type (1)</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:99.8pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Transactional (1)</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:144.8pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Unused (11)</span></p></td></tr></tbody></table><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:justify"><span style="background-color:#ffffff;color:#333333;font-weight:700">Discussion on Maximum Message Size</span><span style="background-color:#ffffff;color:#333333">. The broker’s configuration </span><span style="background-color:#ffffff;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">max.message.size</span><span style="background-color:#ffffff;color:#333333">&nbsp;previously controlled the maximum size of a single uncompressed message or a compressed set of messages. With this design, it now controls the maximum message set size, compressed or not. In practice, the difference is minor because a single message can be written as a singleton message set, with the small increase in overhead mentioned above. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.c3oktixktv3b" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Message Fields</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>The length field of the message format is encoded as an unsigned variable-length int, abbr. “uintVar”. Similarly the offset delta and key length fields are encoded as unitVar as well. The message’s offset can then be calculated as the offset of the message set + offset delta. At the end we still maintains a message-level CRC (reason discussed </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.ap7gcx6kudun" style="color:inherit;text-decoration:inherit">below</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">).</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Message Attributes</span><span>: In this format, we have also added a single byte for individual message attributes. Only message sets can be compressed, so there is no need to reserve some of these attributes for the compression type. The control flag indicates that the message is a control message, which means it is not intended for application consumption. The remaining bits are currently unused, though one could be used for </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://cwiki.apache.org/confluence/display/KAFKA/KIP-87%2B-%2BAdd%2BCompaction%2BTombstone%2BFlag&amp;sa=D&amp;source=editors&amp;ust=1765881840330539&amp;usg=AOvVaw3VNhORLSzM_VVR5o8ez0V2" style="color:inherit;text-decoration:inherit">KIP-87</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;(message tombstone marker).</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><table style="border-spacing:0;border-collapse:collapse;margin-right:auto"><tbody><tr style="height:21pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:105pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Control Flag (1)</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:middle;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:210pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Unused (7)</span></p></td></tr></tbody></table><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span>Control messages will always have a non-null key, which is used to indicate the type of </span><a id="id.4vuehwc5b7s"></a><span style="font-weight:700">control message type</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;with the following schema:</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">ControlMessageKey =&gt; Version ControlMessageType</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Version =&gt; int16</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">&nbsp; ControlMessageType =&gt; int16</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span>In this proposal, a control message type of 0 indicates a </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">COMMIT</span><span>&nbsp;marker, and a control message type of 1 indicates an </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ABORT</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;marker. The schema for control values is generally specific to the control message type.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><a id="id.ap7gcx6kudun"></a><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:700">Discussion on Message-level Schema.</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;A few additional notes about this schema:</span></p><ol class="lst-kix_c7313u9pplkk-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Having easy access to the offset of the first message allows us to stream messages to the user on demand. In the existing format, we only know the last offset in each message set, so we have to read the messages fully into memory in order to compute the offset of the first message to be returned to the user.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">As before, the message set header has a fixed size. This is important because it allows us to do in-place offset/timestamp assignment on the broker before writing to disk. </span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">We have removed the per-message CRC in this format. We hesitated initially to do so because of its use in some auditing applications for end-to-end validation. The problem is that it is not safe, even currently, to assume that the CRC seen by the producer will match that seen by the consumer. One case where it is not preserved is when the topic is configured to use the log append time. Another is when messages need to be up-converted prior to appending to the log. For these reasons, and to conserve space and save computation, we have removed the CRC and deprecated client usage of these fields.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The message set CRC covers the header and message data. Alternatively, we could let it cover only the header, but if compressed data is corrupted, then decompression may fail with obscure errors. Additionally, that would require us to add the message-level CRC back to the message.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Individual messages within a message set have their full size (including header, key, and value) as the first field. This is designed to make deserialization efficient. As we do for the message set itself, we can read the size from the input stream, allocate memory accordingly, and do a single read up to the end of the message. This also makes it easier to skip over the messages if we are looking for a particular one, which potentially saves us from copying the key and value. </span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">We have not included a field for the size of the value in the message schema since it can be computed directly using the message size and the length of the header and key. </span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">We have used a variable length integer to represent timestamps. Our approach is to let the first message </span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.fzysbytkejm4" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Space Comparison</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>As the batch size increases, the overhead of the new format grows smaller compared to the old format because of the eliminated redundancy. The overhead per message in the old format is fixed at 34 bytes. For the new format, the message set overhead is 53 bytes, while per-message overhead ranges from 6 to 25 bytes. This makes it more costly to send individual messages, but space is quickly recovered with even modest batching. </span><span>For example, assuming a fixed message size of 1K with 100 byte keys and reasonably close timestamps, the overhead increases by only 7 bytes for each additional batched message (2 bytes for the message size, 1 byte for attributes, 2 bytes for timestamp delta, 1 byte for offset delta, and 1 byte for key size) :</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><table style="border-spacing:0;border-collapse:collapse;margin-right:auto"><tbody><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:88.5pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Batch Size</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:126pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Old Format Overhead</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:132pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">New Format Overhead</span></p></td></tr><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:88.5pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">1</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:126pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">34*1 = 34</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:132pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">53 + 1*7 = 60</span></p></td></tr><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:88.5pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">3</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:126pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">34*3 = 102</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:132pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">53 + 3*7 = 74</span></p></td></tr><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:88.5pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">10</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:126pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">34*10 = 340</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:132pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">53 + 10*7 = 123</span></p></td></tr><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:88.5pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">50</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:126pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">34*50 = 1700</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:132pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">53 + 50*7 = 403</span></p></td></tr><tr style="height:0pt"><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:88.5pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">100</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:126pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">34*100 = 3400</span></p></td><td colspan="1" rowspan="1" style="border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:132pt;border-top-color:#000000;border-bottom-style:solid"><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.0;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">45 + 100*7 = 745</span></p></td></tr></tbody></table><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.mo0ibmx05lcn" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Client API Changes</span></h2><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span>As noted above, we have removed the individual message CRC computation from the message format. This is currently exposed in the client API in </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">RecordMetadata</span><span>&nbsp;on the producer and in </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ConsumerRecord</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;on the consumer. We intend to deprecate these APIs:</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="font-weight:400;font-family:&quot;Courier New&quot;">c</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">lass RecordMetadata {</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; @Deprecated</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="font-weight:400;font-family:&quot;Courier New&quot;">&nbsp; </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">l</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">ong checksum();</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">}</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="font-weight:400;font-family:&quot;Courier New&quot;">c</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">lass ConsumerRecord {</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; @Deprecated</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; long checksum();</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">}</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Until these methods are removed, we should continue to support these APIs. We propose the following:</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><ol class="lst-kix_q9wm09yqvpbs-0 start" start="1" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">For old magic values (version 0 and 1), the checksum will continue to return the CRC from the message itself.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>For the new version, we will compute a checksum on-demand using the message key, value and timestamp.</span></li></ol><a id="id.3s6zgsaq9cep"></a><h2 id="h.4q83oxy4ofov" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Migration Plan</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>We follow the same approach used in </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://www.google.com/url?q=https://cwiki.apache.org/confluence/display/KAFKA/KIP-32%2B-%2BAdd%2Btimestamps%2Bto%2BKafka%2Bmessage&amp;sa=D&amp;source=editors&amp;ust=1765881840348631&amp;usg=AOvVaw3ufU5C6h3K0vmHCo2exSqp" style="color:inherit;text-decoration:inherit">KIP-32</a></span><span>. T</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">o upgrade from a previous message format version, users should:</span></p><ol class="lst-kix_ljmndakz6mcr-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Upgrade the brokers once with the inter-broker protocol set to the previous deployed version.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Upgrade the brokers again with an updated inter-broker protocol, but leaving the message format unchanged.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Upgrade all or most clients, but continue with idempotence/transactions disabled. Clients which attempt to use idempotent or transactional features will be rejected by the broker.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span>Restart the brokers, with the message format version set to the latest. It is also possible to enable the new message format on topics individually.</span></li><li style="padding-top:0pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Once the message format is upgraded, clients can enable idempotence/transactions production.</span></li></ol><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The reason for step 3 is to avoid the performance cost for down-converting messages to an older format, which effectively loses the “zero-copy” optimization. Ideally, all consumers are upgraded before the producers even begin writing to the new message format.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h3 id="h.u76s202ebj43" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">Client Compatibility</span></h3><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">In KIP-97, the Java client enabled support for compatibility across different versions of the broker. Below we describe the behavior for several important cases:</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><ol class="lst-kix_uqyylbhn1m4k-0 start" start="1" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>Since we were only supporting versions later than 0.10.0.0, we have so far only needed to deal with one message format version. After this KIP, the producer will need to support magic version 1 (the current version), and magic version 2 (proposed here). The version to use will depend on the version of the </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ProduceRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;that the broker supports. A challenge here is that we need to know the supported version at the time record accumulation begins. Our initial plan to address this is to connect to the partition leader prior to beginning accumulation for that partition.</span></li></ol><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><ol class="lst-kix_uqyylbhn1m4k-0" start="2" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Old versions of the broker will obviously not support idempotent producing or transactions. If either of these facilities are enabled and we encounter a broker which does not support them, an exception will be raised to the user.</span></li></ol><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><ol class="lst-kix_uqyylbhn1m4k-0" start="3" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>When fetching from an older broker (with an older message format), </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">READ_COMMITED</span><span>&nbsp;behaves exactly the same as </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">READ_UNCOMMITTED</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. The behavior only differs for messages which have the transactional bit set.</span></li></ol><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><ol class="lst-kix_uqyylbhn1m4k-0" start="4" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left"><span>When in </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">READ_COMMITTED</span><span>&nbsp;mode, the behavior of </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">seekToEnd</span><span>&nbsp;is modified to seek to the LSO. For older brokers which do not support the new </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">ListOffsetRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;version (which allows fetching the LSO), we will retain the current behavior of seeking to the log end offset.</span></li></ol><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h3 id="h.tiigsrv40pcn" style="padding-top:16pt;margin:0;color:#434343;padding-left:0;font-size:14pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:left;padding-right:0"><span>Third-party </span><span style="color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:&quot;Arial&quot;;font-style:normal">Authorizers</span></h3><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The addition of the ProducerTransactionalId resource means that third-party authorizers will need to be updated before requests to the transaction coordinator can be protected. In general we should emphasize that authorizers should reject authorization requests for unknown resource types.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h1 id="h.68og8h96rdei" style="padding-top:20pt;margin:0;color:#000000;padding-left:0;font-size:20pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:&quot;Arial&quot;;font-style:normal">RPC Protocol Summary</span></h1><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">We summarize all the new request / response pairs as well as modified requests in this section. </span></p><h2 id="h.p3hvy6kufvd1" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Courier New&quot;;font-style:normal">FetchRequest</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Sent by the consumer to any partition leaders to fetch messages. We bump the API version to allow the consumer to specify the required </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.nogouvgyxtup" style="color:inherit;text-decoration:inherit">isolation level</a></span><span>. &nbsp;We also modify the response schema to include the list of aborted transactions included in the range of fetched messages.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">// FetchRequest v4</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">FetchRequest =&gt; ReplicaId MaxWaitTime MinBytes MaxBytes IsolationLevel [TopicName [Partition FetchOffset MaxBytes]]</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ReplicaId =&gt; int32</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; MaxWaitTime =&gt; int32</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:700">&nbsp; </span><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">MinBytes =&gt; int32</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">&nbsp; </span><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:700">IsolationLevel =&gt; int8 (READ_COMMITTED | READ_UNCOMMITTED)</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; TopicName =&gt; string</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Partition =&gt; int32</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; FetchOffset =&gt; int64</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; MaxBytes =&gt; int32</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">&nbsp; </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">// FetchResponse v4</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">FetchResponse =&gt; ThrottleTime [TopicName [Partition ErrorCode HighwaterMarkOffset </span><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:700">LastStableOffset AbortedTransactions</span><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">&nbsp;</span><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">MessageSetSize MessageSet]]</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ThrottleTime =&gt; int32</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; TopicName =&gt; string</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Partition =&gt; int32</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ErrorCode =&gt; int16</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; HighwaterMarkOffset =&gt; int64</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">&nbsp; </span><span style="background-color:#ffffff;color:#333333;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">LastStableOffset =&gt; int64</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">&nbsp; </span><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:700">AbortedTransactions =&gt; [PID </span><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:700">FirstOffset</span><span style="background-color:#ffffff;color:#333333;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">]</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; PID =&gt; int64</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; FirstOffset =&gt; int64</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; MessageSetSize =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">When the consumer sends a request for an older version, the broker assumes the READ_UNCOMMITTED isolation level and converts the message set to the appropriate format before sending back the response. Hence zero-copy cannot be used. This conversion can be costly when compression is enabled, so it is important to update the client as soon as possible.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">We have also added the LSO to the fetch response. In READ_COMMMITED, the consumer will use this to compute lag instead of the high watermark.</span></p><h2 id="h.mkk6ckzh7jxl" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Courier New&quot;;font-style:normal">ProduceRequest</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Sent by the producer to any brokers to produce messages. Instead of allowing the protocol to send multiple message sets for each partition, we change the handling of this request to only allow one message set for each partition. &nbsp;As long as there is only one message set to be written to the log, partial produce failures are no longer possible. The full message set is either successfully written to the log (and replicated) or it is not.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">We include the TransactionalId in order to ensure that producers using transactional messages (i.e. those with the transaction bit set in the attributes) are authorized to do so. If the client is not using transactions, this field should be null.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">// ProduceRequest v3</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">ProduceRequest =&gt; </span><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:700">TransactionalId</span><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp;</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">RequiredAcks</span></p><p style="padding-top:0pt;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.3636363636363635;margin-right:0;margin-left:108pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp;Timeout</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [TopicName [Partition </span><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">MessageSetSize</span><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp;MessageSet]]</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">&nbsp; </span><span style="background-color:#ffffff;color:#333333;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">TransactionalId =&gt; nullableString</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; RequiredAcks =&gt; int16</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Timeout =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Partition =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">&nbsp; </span><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">MessageSetSize =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; MessageSet =&gt; bytes</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.3636363636363635;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">// ProduceResponse v3</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">ProduceResponse =&gt; [TopicName [Partition ErrorCode Offset Timestamp]]</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ThrottleTime</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; TopicName =&gt; string</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Partition =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ErrorCode =&gt; int16</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Offset =&gt; int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Timestamp =&gt; int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ThrottleTime =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Error code:</span></p><ul class="lst-kix_olegludlmu4-0 start" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">DuplicateSequenceNumber [NEW]</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">InvalidSequenceNumber [NEW]</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">InvalidProducerEpoch [NEW]</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">UNSUPPORTED_FOR_MESSAGE_FORMAT</span></li></ul><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.3636363636363635;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Note that clients sending version 3 of the produce request MUST use the new </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#h.pau6n6buvoee" style="color:inherit;text-decoration:inherit">message set format</a></span><span>. The broker may still down-convert the message to an older format when writing to the log, depending on the internal message format specified.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.d2pvxax47irz" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Courier New&quot;;font-style:normal">ListOffsetRequest</span></h2><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span>Sent by the client to search offsets by timestamp and to find the first and last offsets for a partition. In this proposal, we modify this request to also support retrieval of the last stable offset, which is needed by the consumer to implement </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">seekToEnd()</span><span>&nbsp;in </span><span style="font-weight:400;font-family:&quot;Courier New&quot;">READ_COMMITTED</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;mode.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">// v2</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">ListOffsetRequest =&gt; ReplicaId [TopicName [Partition Time]]</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ReplicaId =&gt; int32</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; TopicName =&gt; string</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Partition =&gt; int32</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Time =&gt; int64</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">ListOffsetResponse =&gt; [TopicName [PartitionOffsets]]</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; PartitionOffsets =&gt; Partition ErrorCode Timestamp [Offset]</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Partition =&gt; int32</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ErrorCode =&gt; int16</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Timestamp =&gt; int64</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Offset =&gt; int64</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:left"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span>The schema is exactly the same as version 1, but we now support a new sentinel timestamp in the request (-3) to retrieve the LSO.</span></p><h2 id="h.97qeo7mkx9jx" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">FindCoordinatorRequest</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Sent by client to any broker to find the corresponding coordinator. This is the same API that was previously used to find the group coordinator, but we have changed the name to reflect the more general usage (there is no group for transactional producers). We bump up the version of the request and add a new field indicating the group type, which can be either Consumer or Txn. Request handling details can be found </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.8biz78fs2t9" style="color:inherit;text-decoration:inherit">here</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.3636363636363635;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;font-size:10.5pt;font-family:&quot;Courier New&quot;;color:#333333;font-weight:400">// v2</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">FindCoordinatorRequest =&gt; CoordinatorKey CoordinatorType</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; CoordinatorKey =&gt; string</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; CoordinatorType =&gt; byte&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* 0: consumer, 1: transaction */</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;text-indent:31.5pt;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">FindCoordinatorResponse =&gt; ErrorCode Coordinator</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ErrorCode =&gt; int16</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Coordinator =&gt; NodeId Host Port</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; NodeId =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; Host =&gt; string</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; Port =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Error code:</span></p><ul class="lst-kix_olegludlmu4-0" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Ok</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">CoordinatorNotAvailable</span></li></ul><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">The node id is the identifier of the broker. We use the coordinator id to identify the connection to the corresponding broker.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.z99xar1h2enr" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Courier New&quot;;font-style:normal">InitPidRequest</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Sent by producer to its transaction coordinator to to get the assigned PID, increment its epoch, and fence any previous producers sharing the same TransactionalId. Request handling details can be found </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.jro89lml46du" style="color:inherit;text-decoration:inherit">here</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">InitPidRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp;=&gt; TransactionalId TransactionTimeoutMs</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; TransactionalId =&gt; String</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; TransactionTimeoutMs =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">Init</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">PidResponse =&gt; Error PID</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp;Epoch</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Error =&gt; Int16</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; PID =&gt; Int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Epoch =&gt; Int16</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:left;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Error code:</span></p><ul class="lst-kix_olegludlmu4-0" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Ok</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">NotCoordinatorForTransactionalId</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">CoordinatorNotAvailable</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">ConcurrentTransactions</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">InvalidTransactionTimeout</span></li></ul><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.r6klddrx9ibz" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Courier New&quot;;font-style:normal">AddPartitionsToTxnRequest</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Sent by producer to its transaction coordinator to add a partition to the current ongoing transaction. Request handling details can be found </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.aywz22lp6tma" style="color:inherit;text-decoration:inherit">here</a></span><span>.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">AddPartitionsToTxnRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp;=&gt; TransactionalId PID Epoch [Topic [Partition]]</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; TransactionalId =&gt; string</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; PID =&gt; int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Epoch =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Topic =&gt; string</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Partition =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;text-indent:31.5pt;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">AddPartitionsToTxnResponse =&gt; ErrorCode</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ErrorCode: int16</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;text-indent:31.5pt;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Error code:</span></p><ul class="lst-kix_55mhn1ecd8zq-0 start" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Ok</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">InvalidProducerEpoch</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">InvalidPidMapping</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">NotCoordinatorForTransactionalId</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">CoordinatorNotAvailable</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">ConcurrentTransactions</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">InvalidTxnRequest</span></li></ul><h4 id="h.lm1uwwnjchsq" style="padding-top:14pt;margin:0;color:#666666;padding-left:0;font-size:12pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:12pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></h4><h2 id="h.cqecubxziwie" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Courier New&quot;;font-style:normal">AddOffsetsToTxnRequest</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Sent by the producer to its transaction coordinator t</span><span>o indicate a consumer offset commit operation is called as part of the current ongoing transaction. Request handling details can be found </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.5xa2hzric4h0" style="color:inherit;text-decoration:inherit">here</a></span><span>.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">AddOffsetsToTxnRequest</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp;=&gt; TransactionalId PID Epoch ConsumerGroupID</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; TransactionalId =&gt; string</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; PID =&gt; int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Epoch =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ConsumerGroupID =&gt; string</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;text-indent:31.5pt;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">AddOffsetsToTxn</span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Response =&gt; ErrorCode</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ErrorCode: int16</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;text-indent:31.5pt;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Error code:</span></p><ul class="lst-kix_55mhn1ecd8zq-0" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Ok</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">InvalidProducerEpoch</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">InvalidPidMapping</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">ConcurrentTransactions</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">NotCoordinatorForTransactionalId</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">CoordinatorNotAvailable</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">InvalidTxnRequest</span></li></ul><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.2dnhvqqi7mr7" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">EndTxnRequest</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Sent by producer to its transaction coordinator to prepare committing or aborting the current ongoing transaction. Request handling details can be found </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.aqrq1dgbix3a" style="color:inherit;text-decoration:inherit">here</a></span><span>.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">EndTxnRequest =&gt; TransactionalId PID Epoch Command</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; TransactionalId =&gt; string</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; PID =&gt; int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Epoch =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Command =&gt; boolean (0 means ABORT, 1 means COMMIT)</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">EndTxnResponse =&gt; ErrorCode</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ErrorCode =&gt; int16</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Error code:</span></p><ul class="lst-kix_olegludlmu4-0" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Ok</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">InvalidProducerEpoch</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">InvalidPidMapping</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">CoordinatorNotAvailable</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">ConcurrentTransactions</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">NotCoordinatorForTransactionalId</span></li><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">InvalidTxnRequest</span></li></ul><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.jtpvkrldhb7" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">WriteTxnMarker</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">Request</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Sent by transaction coordinator to broker to commit the transaction. Request handling details can be found </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.x3qeh1kmz4ka" style="color:inherit;text-decoration:inherit">here</a></span><span>.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">WriteTxnMarkerRequest =&gt; [PID Epoch Marker CoordinatorEpoch [Topic [Partition]]]</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; PID =&gt; int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Epoch =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; CoordinatorEpoch =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Marker =&gt; int8 (0 = COMMIT, 1 = ABORT)</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Topic =&gt; string</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Partition =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">WriteTxnMarkerResponse =&gt; [Pid [Topic [Partition ErrorCode]]]</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Topic =&gt; string</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Partition =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ErrorCode =&gt; int16</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Error code:</span></p><ul class="lst-kix_olegludlmu4-0" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Ok</span></li></ul><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.5695qbm2hne" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">TxnOffsetCommitRequest</span></h2><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Sent by transactional producers to consumer group coordinator to commit offsets within a single transaction. Request handling details can be found </span><span style="text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline"><a href="https://docs.google.com/document/u/0/d/11Jqy_GjUGtdXJK94XGsEIK7CP1SnQGdp2eF0wSw9ra8/mobilebasic?pli=1#id.55yzhvkppi6m" style="color:inherit;text-decoration:inherit">here</a></span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">. </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span>Note that just like consumers, users will not be exposed to set the retention time explicitly, and the default value (</span><span style="font-weight:400;font-family:&quot;Courier New&quot;">-1</span><span>) will always be used which lets broker to determine its retention time.</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">TxnOffsetCommitRequest &nbsp; =&gt; ConsumerGroupID </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PID</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Epoch</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RetentionTime</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OffsetAndMetadata </span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ConsumerGroupID =&gt; string</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; PID =&gt; int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Epoch =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; RetentionTime =&gt; int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; OffsetAndMetadata =&gt; [TopicName [Partition Offset Metadata]]</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; TopicName =&gt; string</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; Partition =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; Offset =&gt; int64</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; &nbsp; Metadata =&gt; string</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="font-weight:400;font-family:&quot;Courier New&quot;">Txn</span><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">OffsetCommitResponse =&gt; [TopicName [Partition ErrorCode]]]</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; TopicName =&gt; string</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; Partition =&gt; int32</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Courier New&quot;;font-style:normal">&nbsp; ErrorCode =&gt; int16</span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;line-height:1.15;font-family:&quot;Arial&quot;;orphans:2;widows:2;height:11pt;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal"></span></p><p style="padding-top:0pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:10pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">Error code:</span></p><ul class="lst-kix_olegludlmu4-0" style="padding:0;margin:0"><li style="padding-top:0pt;color:#000000;padding-left:-13.5pt;font-size:11pt;padding-bottom:10pt;line-height:1.15;margin-right:0;margin-left:49.5pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Courier New&quot;;font-style:normal">InvalidProducerEpoch</span></li></ul><h1 id="h.epod1jnz2d5" style="padding-top:20pt;margin:0;color:#000000;padding-left:0;font-size:20pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:&quot;Arial&quot;;font-style:normal">Metrics</span></h1><p style="padding-top:8pt;margin:0;color:#000000;padding-left:0;font-size:11pt;padding-bottom:0pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal">As part of this work, we would need to expose new metrics to make the system operable. These would include:</span></p><ol class="lst-kix_pwbhslrd67om-0 start" start="1" style="padding:0;margin:0"><li style="padding-top:8pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:0pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal">Number of live PIDs (a proxy for the size of the PID-&gt;Sequence map)</span></li><li style="padding-top:8pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:0pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10.5pt;font-family:&quot;Arial&quot;;font-style:normal">Current LSO per partition (useful to detect stuck consumers and lost commit/abort markers).</span></li><li style="padding-top:8pt;color:#000000;padding-left:0pt;font-size:11pt;padding-bottom:0pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span style="background-color:#ffffff;color:#333333;font-size:10.5pt">Number of active transactionalIds (proxy for the memory consumed by the transaction coordinator).</span></li></ol><h1 id="h.hapfg5juqkyc" style="padding-top:20pt;margin:0;color:#000000;padding-left:0;font-size:20pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:&quot;Arial&quot;;font-style:normal">Future Work </span></h1><h2 id="h.oc95ehvigl7v" style="padding-top:18pt;color:#000000;padding-left:0;font-size:16pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;margin-right:0;margin-left:4pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:left;padding-right:0"><span>Recovering from correlated hard failures.</span></h2><p style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:4pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="background-color:#ffffff;color:#222222">When there is a correlated hard failure (e.g., power outage), it's possible that an existing commit/abort marker is lost in all replicas.</span><span style="background-color:#ffffff;color:#222222;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">&nbsp;This may not be fixed by the transaction coordinator automatically and the consumer may get stuck on that incomplete transaction forever. </span></p><p style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:4pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;height:11pt;text-align:justify"><span style="background-color:#ffffff;color:#222222;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:4pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="background-color:#ffffff;color:#222222;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">In particular, if a correlated hard failure causes us to lose the markers everywhere, the LSO on the broker would not advance and consumers would block (but not buffer). This would be a noticeable situation.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="background-color:#ffffff;color:#222222;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="background-color:#ffffff;color:#222222;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">A simple tool may make use of internal functions to effectively do a 'beginTransaction', 'AddTopicPartitiontoTransaction', 'commitTransaction'. This would ensure that the markers are rewritten to all partitions by the transaction coordinator.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="background-color:#ffffff;color:#222222;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="background-color:#ffffff;color:#222222;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">To make this workable, we need to make sure that the transaction coordinator adds a sufficient logging so that we know the TransactionalId -&gt; PID mapping as well as the partitions participating in each transaction. The broker should also probably log information so that we know which unfinished transaction (ie. which PID) is preventing the LSO from moving forward. Both these things will make it fairly easy to configure the tool. </span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="background-color:#ffffff;color:#222222;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="background-color:#ffffff;color:#222222;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Of course, it is possible for the producer to continue onto another transaction before the tool is run, in which case the data will be corrupt since the second transaction will include messages from the first. But this is no worse than Kafka's existing durability semantics which this proposal relies on.</span></p><h2 id="h.u5fw38sut3ef" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Producer HeartBeat</span></h2><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="background-color:#ffffff;color:#222222;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Currently, there is no check for producer liveness. This means that if a producer has not been sending transactional requests for a long time, its TransactionalId will be expired by the coordinator, making it a zombie who can no longer initiate transactions. Adding a heartbeat thread would solve this problem and avoid surprises for applications.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="background-color:#ffffff;color:#222222;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="background-color:#ffffff;color:#222222;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">Another use case of producer heartbeat is that we can then do not let the “newcomers” (i.e. a new client with the same TransactionalId) to always kick out the old ones, which will be useful in some single-writer scenario.</span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="background-color:#ffffff;color:#222222;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><h2 id="h.3ie86d5xx5xx" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">Update Producer Interceptor</span></h2><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:left"><span>It would make sense to add new APIs to the producer interceptor to expose the transaction lifecycle (i.e. beginning, committing, and aborting transactions). A challenge here is the fact that the client will not necessarily receive a commit or abort event in the case of a failure. </span></p><h1 id="h.eze4c49k73f6" style="padding-top:20pt;margin:0;color:#000000;padding-left:0;font-size:20pt;padding-bottom:10pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:&quot;Arial&quot;;font-style:normal">Rejected Alternatives</span></h1><a id="id.6uypa62m3vgw"></a><h2 id="h.lizhp2urqn59" style="padding-top:18pt;margin:0;color:#000000;padding-left:0;font-size:16pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;font-family:&quot;Arial&quot;;orphans:2;widows:2;text-align:justify;padding-right:0"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:&quot;Arial&quot;;font-style:normal">On TransactionalIds and PIDs</span></h2><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">There have been multiple questions about the notions of TransactionalId and PID: about whether we need both, and if we need both, then can we generate the PID from the TransactionalId by some hash function on the client (vs. a broker side zookeeper based mapping). </span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;text-align:justify"><span>The reason we went with a user-provided TransactionalId that maps to a broker-generated PID is the following: </span></p><ul class="lst-kix_cmz9dkb8w9u4-0 start" style="padding:0;margin:0"><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">A persistent identifier for a producer is essential for transactions to be recoverable across producer sessions. For a generated identifier, the application must be responsible for its persistence. In some cases, this is quite difficult. For example, in Kafka Streams, we would like for each task to have its own transactional identifier. If it is generated, then we must create a separate topic to map the taskId to the generated identifier so that we can always lookup the transactional id when a task is restarted. This leads to a “bootstrapping problem” in which two instances of the same task (say one of them is a zombie) may both try to generate the identifier at the same time. We cannot let them both succeed since we can only have one writer for each task. One way to resolve this is to use a datastore with “first-write-wins” semantics, but this is awkward at best if implemented using a Kafka topic. In any case, it seemed much simpler for the task to simply derive its transactional identifier from the taskId itself.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">We would like to be able to &nbsp;restrict access to the transaction log. Doing so requires that we define the “resource” we are trying to protect. For consumers, we have the consumer groupID, but producers would not have anything similar to use if the transactional ids were generated. We could create a producer group, but it is quite awkward to need to introduce this concept only for the sake of authorization. On the other hand, the TransactionalId gives us exactly what we need. Authorizing a principal for a given TransactionalId gives them access to write to the transaction log using that TransactionalId.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span>We chose not to use the externally created TransactionalId directly in the message set because size is a premium. The TransactionalId is a variable length string, and could be </span><span>very </span><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">long, so we were concerned about the increased overhead. Hence we chose to store an internally generated PID in the message set instead.</span></li><li style="padding:0;color:#000000;font-size:11pt;line-height:1.15;margin-right:0;margin-left:36pt;font-family:&quot;Arial&quot;;margin-top:0;orphans:2;margin-bottom:0;widows:2;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal">We chose to generate the PID on the broker using zookeeper versus doing a static hash of TransactionalId to PID on the producer because we did not want to risk collisions. When PIDs collide, one producer will fence the other off, and the only solution would be to restart one of the producers with a new TransactionalId with the hope that it doesn’t clash either. This failure mode is non intuitive and potentially hard to fix. Hence we decided not to use any sort of static hashing to map the TransactionalId to PID. </span></li></ul><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p><p style="padding:0;margin:0;color:#000000;font-size:11pt;font-family:&quot;Arial&quot;;line-height:1.15;orphans:2;widows:2;height:11pt;text-align:justify"><span style="color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:&quot;Arial&quot;;font-style:normal"></span></p></div></div></div></div></body></html>
------MultipartBoundary--l5EobY2HOwU8mZA5J1Z99hAuscRO8VrQdxYCAoloXq----
Content-Type: image/png
Content-Transfer-Encoding: binary
Content-Location: https://lh7-rt.googleusercontent.com/docsz/AD_4nXf5t1jhOu8H9XjeFiAncZSJPN7r51NebQSgYU_bQLfxNoLt1d-I-zhbs3Khyd05G1kFz5SEHfyII7Dumo8MjvSkgUqMgpvVDIcoiayQ2lVTy-TZPHa6-2nSBADBFh73P-e3QCLMFjEUMIPTPgaCGUW2Aw=s320?key=QkrMD46DCd_cL4t2ruGD7A

PNG

   IHDR  @         sBIT|d    IDATxw|{EwK$ްM0PJB$% !H 	$PBh	ld˖mɒޮ9ɲ,ٺI'K|ۻۙ}{͛7o@W[ B KNP(T3(J*R
bB(P(,J*R
bB(P(,J**SèL9pO p "vXo6 q'pP#^.n`/lD*׀ z8P
\X3@Q,@E_D+`6[3{'
J*np2R |BZvHX}Ȯ~+^<B{-B,@B1`Q
PPX(6ۙ"} sؗ78p2THߡ |O@q,@E_#9-p2/AP/{rq~#OI(Nk"ZJkpr7Xݏ=i@Z/_y(
Et6
ڐGd!@53=GZHئB+=P݊~+@qA
ŀE)@B1`Q
PPXT( 
ŀE)@B1`Q
PPXT(  
Rp09WWP(O *RKU*Gre7"u#1n2-Q5ՕW[rJ=wre9E?E)fdf[
P4,2Mٹm5%QZOsO_EH0M4VHB7C||>B,j#;j٧m{˲Z~?"Q`Ey?e:l6hۍ:fW*N Bȿ \ͭeu!6,@E!hnn4N:&M=[l
CmMooNn^CGP_WKdTi0qɔ/pr֫/2lhYp>CfU}~ BA-R[Ss/fN=
"&&LaZ&NgvM8s99L?}&'r{vjnUd˾aiEP
P4eEސ³្EZ ^_5Jgpx,Y8]a3l6;rLuPrOY=>r"4]aaz:xi>Mh?Xny=[bXuiBzķ-N@*=8l6;`ee߷Gh[JS݃SFe-P
CL\`M#"22b(z )I)$﬿:U*-P
bY&ẻΧ~
Q( 
ŀE)@B1`Q
PPXT( 
ŀE)@B1`Q
PmZխPRn!vQ[SݥeR[SE]m^1jBJ*X4C)6ncw8pݼsTqvi}
oaǖMTvZmhSV"T8E!x޹z'{
Gȱhnl{7_	SL[n!QG\|"o֯ZNƠ.<HHJs/bUƙaI{ozŗDEEs<@SC=i
á)BYFmœ=:9;qe
?@|v܎n֬Xÿ/7nΎm~LtFYm/x:bB3Imu(+P T|;1|ٶi=u8N ÐIYOÐ[?P Υ|>&yKn,,AzMJ)CYWs3e%Lv
CU˾dگx_kVF[/=9U*\0v;Q1tYb	陃Xr)W RR_Lџ˲ş2vI8N.ItBh5Pʚ --M?> ?Z|AoB%x<.v'Bkl:X2/E4]q]2Mm-8."hڏZ䚛@`Z&6o!bvC/4d7Wv4Mtղ3}"mQR(A)@EHNtrtZhĎRh+%9*-B(P(,J*R
bB(P(,*:4QA:'>JSV.,SЄ.pˢYL=ҳTrhέ.fq=R00fa!dђi5e[WY0 )z
Pt!MMlݸ؀ihdEcC}"mkݾ|oᷜՃ+z F{(ٷt^{9ػKQvj,϶M_g
!۷@-].ػp }pEϣ"$躍%-*DضykW.c9Xr^}];gwN"""y1MyƆz>X8<^Ivl{4iT`J8P !LvqR[[gig/?g8s1Ku(+=0k\l\Kɾdd`>Θu>11N!E(B\c2M"#t%W29Kw$)%<{hB.xnYOT4[S0ˢ*J2v#Q	L5]rɅ2=׃@4(LZi:;mⲳtQ9SeOoX{QR6mCb%SܮekG
	!8PG1%Pe!
E3.2	8 ʵ+sOtxQ^f H	\` $Q=	BA0$Xrp$10`qpqQ
x( Q!Hk(x5?oQօTOT"E` (܂l u	z%BH%R8J@vc5-}S!Hѣ(xs
  V!(<R=R'6Á`}g|\Db䠊R' Jw

Dٝ?QJϣϑ
k::5%5L(xb2[ ʮE󫁱k[P3JR'Qo[E ~lp8^5MAǯ,5>)r9<-	shq[)@~|8ӿmkSgO R
<`?RV7`"p4}@EP
:esM?F6xHXk0ҿ]	Fv58ޝv7# +uE~1(nC.Rq-FQNK(s6_  k`
rLjz2x=]~<@yyW߻J?:ݮvsrH0p X_! v rViK6<BE2=\xB1 0Fq\I
#	.#zKL=n!pFdQ}!ӆp87'LDLDQ
s;72EҀ6ꯐ1SC&" <
,B(I	<23t0 9e컜|ZtDx2]B)Ip2A`?'A~^у(7Dd2]A躢(
XԴΡX?}{MJsR}d`iG#H(qQESDr+kA!^pPg3N^ZdaF erοBp^@q -9!+XlnEy?\H=ȀQHU, G]b!8"_Ƚ#f"&
'm3մp2/"tK"1E/0wH`[vxDgGp?[.8ȇLZ_v>prr0dr7,&]-9[fdF#0tu7ZXh@-E(/!E7~?u9CSHNM'6.ʊ$c]KH"	Ӊ&G`'`YaBh]>4%+<hdCes=\=P!c~/XȨn]O\wxEke5}vνyeY)Xu}!::F*>SԮ$$&aYBty9tDFV6ߺO?6.tb=LG$ahiJv!F#SńD@$iVt'^st<+)T5V4u/ӏEZJq滀S~}XZD~>c'&$gp8`aww!y@qE#GC9۞A<]|%>Zu	˲q݃X9sdFi!tEμ>S,B=sdI0n	o?N;Zr	&OCXA?"-@/nflYM!DH7MgOu3z<ZXMӹk?ǆ"'wĵ 7}P+BT`B
B#MxӪ+jjR	 ^\\<6S%x,x|Sq+XELl\\#1t;=3;[Ń E=4L ;PBs&N13~qܤ~hgc'NdTXX|"ELv*6;vl
9<tڌs;Ӛ9}䴌,:!8
+(,4e!:
r^t57GĪ2&ә_0ɩi8 H>|Xi*/8^)D_I"PUG##!^d7Qd%*(X0|trl\e*Ld8܂(Nҽ 8J:`;5z8EhIzut(&OW8pҟQ@m^^P	UA)#`iN8?"3O  CeY$%|nY":Z()=]PKd%aߠ,@d W&  ׁe
T7M0!Zް4!,MQS2;R!@)@E@hFQ""2&&4V%(4#.z$D$rZeA"ټa5cO#hSBSDexg4d464Pd1B<n7.W3U6>:6jm9\o/v7^zCeXfZl6nW3U**(Pe3"4R39o/>n>&N=,dpp6]/Ƥ~
tFdd֮d;o0j$zEn5Օ,Y)Q\Y7_]0K}ʽxL*Oe	*D)@EXXٺa\y-L2C4Q]UEVY_Ldtׯ&-cE9mlN۶P}=ì9s9m9.4-ko.ulXF˯d|^l6[ON+FpQ
P47%s-Dum@uٵ0|>/eBZF2.W3x+CG!2*[J(+_"*:ښj<n7cٹuMMDEP_[g\%U2iA[<8%6M>-پBTR,fK|2P\THi>f3XR@::l\׾-</~Ř	CZz&}E_KSS#K9K9v|	ˮ_v lS߷uF-逽_jѮ; SdLW~AP
PuFhC @0>@ӴVُijͅNB0ٿ(Ol\<	sZ q NhMsɵ-L40MS Y%O0fXQF-C u]gM,sv;^~q-i,,xp!Lۆa 4J 4˔>']YK6[M|B"^~6;f+in[6Q__Sf64UV!63tV9[C;9wu4[C[:[jy<\Zw.ӶΖՊPP4J7༹W;ob&Iξ=YdՇ*0+Pm3R 짶];u:vvrl6JYhMMVWyj*bؼ~1Yb	f.Z@}-bŗTUiJjkٲa7od1i46Ss˿Gl,[vl?=0Mng/|,ahnjag˲şɇhK~/ZaߞݸB;z_C^]fu qDQ.i6͎ۺ;k~\#Hjk8B߼^}$6oXæu?$pYl1u5TWWRVZ²/>ؾe%Yr9o.6]ɻo¨qo`Úغ	3!{
r|>Fg8F_cÚXp>9xn
JYj9⌈`ٱe#_.O\B">z?cI461lv`Ӻդ/wBcd̄IEY	uq}{v!ivQkW->պ~nQuRlv;/I|^/iP\]a^jkijln4+'4%yW/xYtnZKu塾~="@h"1)JtQc9i,ϸS_0eiT3ｷinj$""RuF 1'ȱ2-P[Sͪ_2j$&241]`׃f4MV|9X?t(9CN9sCF`׎vMۘ<T6χn'O#+;Ws3v78$QY^ĩ0z6XO3"b@v(.*ē)p\/-ŋy]ػ'?Ꮟk;Qy\7[7Ħy|^%%goط>(kZƳO<¡8#Ҩ}!PTc_ ~m6Ug͊TfZ-6[{͆W0^Àa4>yş~/<F    IDAT";7bp0.iv6]E\|&ng,Y8JÇaz3M{Z,4Nqx,[?=	I$g7xyWb|N>l*6]u779u9UcZ7o )%E?d,Gt?-Yh\v57}n}grE2ilٸ˯	˜Kˮ&%5χi9<.*6[C$%Ru駑c}\g֍|7dx_!cF**QB0`8FaihBCu~aYl\%n|6htWK+sK/`?}~4߿k<#a<"?{}{a^2j$R32wrO"%-=;$+;; nW3'OC4"zDf3thw݇p_5#(.ŭ1	I۩M}]-d1~tN'Nλ^o;wظҳr`*1,1z<U|<2sٷg7%ػ{'eZ&M;MN^>>x*+ò,<n7!Ck?456PϾ=9XRƵ+=~iaVZ&\<oغiW-⫮fws`]q[6~׮IBb|L]M5wA?)>[n!=;mf͊wq57𫧟d^<7QaiS+@˲# 
a!G璒S04L o0 |>ɩAá1R2\p0t(g9*2hDFE3d(,畳eY^HHJ4Mb>/r9' 9˲&%50Hk&[ETt,{?K#&&LdO܋.@^>}.:cp573Qc'P}3)̘}^+o#FłJBR2ٹT3KwwHTT=aßqUc|<O8TVI'Adte%1v<^!^")9R<n7h'	I|0`(ΈH,$95åW746=s*m|Wm"mߙGMlX~~ұeZeVN:%&pU7>t]缹Wex]ai0"L0O0eiW^w5Iv8T{P,,9u:6[nPi9?;8<-^hjloaŒE,#&O;J[Oa۩(=ܺ?{c/fXVwU6EPX;<';g[cZw5Zk)-xlbYiTVfѧГ!!)+G^0.F*jkpr7kVz&z\r
0|d!5=]w	r>jl>p
4\0{~k@Zavy0e:O?XaL?}&Ao߉a88o[nϞ3s.`J*#V3Z-6m[k؎(.B(P(,J*R
bB(P(,J*R
bBqR v!8X
l v C\}:Ws^/|}bQ
0esBie_,G)#T-"p|Λۀ7-Q
0XEyYi5PnYaYzOg[E!MMwdQtmܳ><в&4="U?EyYT$G!4,])^s3K/Xxu73æi(+oR!BuJ}0Ύk B_)(Ǔe4ؾeu;GR:4z}VBSu.\x\x?7;"*,˴y=YA769fBi%0.W3" Vh]ѱmݯ%PʠS8Q
m6q4M)ڵus\^p7p?g /6D0g݊~Q
>%>ao@Bcq{c{f%0g݊~DG>]pY7vϳN1Hhe$,-"i@Qs۾}`!	n
{P!Bhq i-{`8wAE/>1/>ʍ~h0-"4:U.*Ο|wvд^Gaz&rC0?:˙(utᬻ0c<,CpE{xއN2ar?Xp;z 5o0!vٿpFu(zd2B(z$䵞Ggnp@K4B' \yLQ@ISC#LC6߿1Fy074(zp5۪}``[D@) ̿1F:;mnʢlȔ0*-@<>SQ!&|
TQM% %mjA穞	=qt`<pp2RLQiA?E*ů랉^)t\TNGFwD%2L#w?
d~'P% #JVMT`W1Qt,h[lG!0r	!XE~	RQ)w0ÿ=e4ڢg;
ϱ=@]f{UG*`ș#_ZQ&g氯сTCsHtP6yn#ә{22Fa>_{^EBQmg KX`2t4LifYـ
/g+X=]7'r& GZ+V>ow}u`"ҷYAZJ:.JrkzsC>DZ/#ZUH[X#	."t¿٘7r#ҟX&&-UHVȱrn]TB+_g= Uܿ{@hZg)2C>"Rxx
q0z.D*x-,]LdOTEq$y?#W\ϑ]QJ0p_OqOʆ̯l!c@AnH'3Aduwв yX1/$"<߾'pmdTdR10T62ؽ;#{>k92utrةy72 ejH{(,>X82E4Z"}Ðm<9F--}*4dj2 ȧ;c)HHC(kD99.BZ9.̫KW`q8#(-7l|-ע16xt4%hwg@ϮZ9V-֒~?(_`o3.DYt7y,^,']Um-@iFN"p"8.dl]UtϡpY7+9X,"6}vEڐ#ݡFq&'ݳː̞Ч2Ҳhwyx%u):gl5)Ӷu"3j?]rsc=kFs4Yw-;ynwHfn_9aǂ+h݅~t#-wE>6>g*) <_{|3>o;XEҮ E>JJG!g-#3W[wx_6Bm3E7_ -#+";7eZL?m0ai3cg3n2{5߅qwr8",Ǫ!t>z. ׋ vDa4\medn'_{/ o	!xOO'iO!Ų,=?Q.YݖB2A}D:_Da=Ҳ23ߐP{bM/7K۳R\nrL떖0×fv5zHтޢ+B2aY[1941L!4l%}!GgǞ s_9\zqm*B,˲w,@=-2-k׮M:4S4|^]mu2Bkk O}fBY[ ښ*31SW o?yz0Ys޾?`HtMGh4M:W,ah=$I`gu/.bۦ{e|?'u]g9Gzٶy=K~w	v%>i(`[[~96itMgL2#'WOȱ~WL<O>)yǮQ㧿~#u!hlh`݌;1 =n4MN9sVAG+MMhTͨq;Ng;^F&57G/+6;⁠0l^lv{Ց?d	IMft\`93:e0󼋎z+/~i=pSt0nT0:I{Rֺ'ɺ'M;5kĘan%|s%Waf-!0LÐݽ_PO,U.0o=_341\r?y_|qSA=	v{Т8=N#!1-ݵ,KBb2zJ|#Nv۪010GZBvO:yB-rt]6fMӰ,]u2ү}h\Tw"^)MӰJqz˲ege/ >Mӻhe똦e"Ӷeqhj'yw5MGMd =+g;;
i4M;}σn:aP/vgM>/6t݆iE?p>/|E(CUeEٲ,c7iZFYoڣi.]G^:ۿj&scww![7:~g6l\GYl6ZK9[:2TWa|<}m6u5LyT`QuV/4پy=uٵ3G4ZG˫RFB;>;Dy;V6 4-u_-cĘq.Z33gP/Зϣ]Hl\>4)=c7|!GIC]9jnfoQ!f*+HDeE1.etNnЀBTd	DE0q:",ٹhNc10lYXqf4$$%z!!7HMMu%	IDDFDdTnAYJ)+9Ht.t>e$=8{y+`Pd4u346Գu:LӤWs3)iAmu11T*g捌0Az jz=L뺍''5_-%;7:~1q?!4h\ٷw7CGU]:K- ""X<n79y"4L*-2k\cb;ټGtvR"2*,*+)ܾh"-#ş~DVLbbp8j)Ge)XA4M#sPnw3E̹*mU)+=@l\<9󉈊b=ٵWs3O"6.+QS]In&fux^4ገ -cٹv|>	IXEmuq: $࿯1tMC}-)i.IUeyCwI
!6[7$MQ6rr3ϙC]m6>fp0FpT}^49Tv
2/|dǖ̽v݈$;7,n**+""im욮Sʊ2FGyY))dөgFFGq*|^/eL=L*Q&EɾBPQVy{oJN^11|i_wfjIHI)iT*gӨ"2*ԌL죩a`;m6n7)deb)i餤wK !#ƌgղ/99hΐ`	^D, )9ÁظxǼ&7oHPW˲HHLfܤ4]tFZ<-^'$ d㡺tjkGu|$0'2|8oـ3"RTvL<n7.ܮf|x>\upR륲K5U8'6.G49f<ܼ!k!p57c$&PYQN^N=ed%66HSTN9#4C6	'MǴ,Owgy2dHJc9sm6"""!1)!	QQvԴN#+>rH9 ܂h~gg[òGS-"%5.\*!cz=gȺ7**jO0u=heIN'^W6:ϋfkMgop2&%r!زqc&LfO~YZܲ,""#9{\0z$f{AH7Lz2ٹyT]	IITtA6cĘX%>X`Yv$!F`I2-"i8/WkLPoW1Mh)Gvҥ{Ӳp8464`>bb4j",ǩ")%e1(7cAJZFX,5;|!;
hZ+.&o0.{wdXIrjZkeK i"4[7ijbʡ'$ȱ8V!-# -ֲon|!GRY^a\!mVV4u1&SWSø)p8N,DoZgSc4'fn1|v2I+D+?hݪxnhnj$!1%HI %5#F&KF!ul\7ظxm@FV6CGCG|ZZZ9 ;@^'-#GMU%6!É"*:[zu)nBrJ	I#5-Srމ9(C}ƒLN^A@B&4߱yY}{wIJzkV|m=z#|^ &&hng1==BDrJ*gawauXjU|,l;aӱkjld>s}  IDATղ,]~E6_WKQz`7o`Œs;-<FWKPaDFFϡ:c].jkt/	QT\0Rp]̬9siPSpA4vnیEYz9#{p>ՕXjy
!8Xz՟:yکAސ#1){Ў1IB4yq57SW[mMDd$ׯAӻB9)Cu|>_,x#Ghtl6;&Mz@mmNm$3";7A,[4<n`ss\~CG3̬֮\ƄNqxBٴn%&
w`Į[:<``	q/4bb:|MMM]Kjn&-#Κڕ˱Db;_ FΜu>NAjz&ad|rH.vp:#OL⒫nRבxA˲HIK'5-^DBR
9p57	AБ7y*M)ڹȨ耂-ɰ4͟|dճO<|aGeO 2R*/cē=ʪs;(~2.wiY\c˖V,]4-seVhԪVji/T
L#S,RFAaggw_0?ku̹g}X|5SuoL\p
7کؼi=EťbL!/@+HTVQ^9:cggř%1jN'ͥjXFaMimyUcUܱGqI)hmzNgPL%ǩZOIYPTRA󆷼q 8p8̨1h=&MeZ<SۆHCc2z'y;5S0&+1Avjax<'n}1J+*)*GZA`=H$Baq	ю(u.hp$º7C g[B}JxE?XvKǘ9
GG"5gqgC<QX#2>]ON'P -)ld@l A,6ĢQʫvtPRVIiy%㏚4Rϰ<(啔UTDQ?i(*Hǂуn://odh߷o7#fB[vhf>b#;l</GzMqi=G"wMc sۙPVQnD00>(Oi¦,[B ~D`Ԙ^e>Bi=jߍ)<}hZ٘R?>㜹x:+Чi~7$z1X{;:ҿă~ >˨鋃=oU/X׿y/츑E3՝%fd74^}g>y9>9&|zv6߭3ξnڌ՗uJT6|	|]J_ߟDr;79cLd'l6秸L׽IqiYzC}vlJbٕbzizੴ%ޝ{nqⅿs}#8''4j۴qCէ#~ҧoK4:e"KUڕ]3knc3=oeZ gƪ-.lY9uMVʚo:3eH.$J{t!s82@lgp87lgp&Pp8avGH%Z āׁ_%GClgpT-|`#p60C^_SF3_DW`55oH 	$bF2$  { m=	q7_C7 5js8o
9|&0e\I(" W!"oІD/O_F"kASȣHt*+ըm,2Eʊ @>ES7ZqpM&L>Po2a0>zzHkDc*Y݁f{W*' /f;C"\2f& ;dOq8ʸ	EBw #=ϢSwp&Q[\hM2|o:QIuz*{lF{lN.2#Yځ5Sj0ըclCe_ߑP;X
AZ3Hp|~n#8X<
	בP:r7
ͨ@e:J UW}dEQi߆L.}]D S_?$4ԣmFDT)V"4Ӂ#f"FV_ԡwyPl~T̫B"*ʸ
X?D!!uDCHF[*LCҋ9\|8#"$g#S9(\.  ?AoԡsLԘ֥1?|jt*NQdִkϡFREZ@eߐ -A sF"k#44ƋH#L=!cG]η {+ȏۿm]y,8>p	0
Eوld݋R@=l8	W(&|6ZrD8$DT`:	pzgMȜϠ Yn' r2}CZC:	%|nC+lHʪ&T
ݗ 7#35HȜi	ߡ!|rj`"md""0#k9-Nmp@&H	\Yy?m{ܞdOREbvz6ȒƝHKtW8%%JT!g#I 2]ү#319GL`ޑ4.'۴F31t+u8>\J볝d;p8H<Ag    IENDB`
------MultipartBoundary--l5EobY2HOwU8mZA5J1Z99hAuscRO8VrQdxYCAoloXq----
Content-Type: text/css
Content-Transfer-Encoding: binary
Content-Location: cid:css-14ef40e0-09cd-463b-ba26-3f887f67df80@mhtml.blink

@charset "utf-8";

ol.lst-kix_bvmitnb5swh8-5.start { counter-reset: lst-ctn-kix_bvmitnb5swh8-5 0; }

.lst-kix_m7gyp3gged0c-3 > li::before { content: "" counter(lst-ctn-kix_m7gyp3gged0c-3) ". "; }

.lst-kix_m7gyp3gged0c-7 > li::before { content: "" counter(lst-ctn-kix_m7gyp3gged0c-7, lower-latin) ". "; }

.lst-kix_gn9iznjyvy0-3 > li::before { content: "" counter(lst-ctn-kix_gn9iznjyvy0-3) ". "; }

.lst-kix_uqyylbhn1m4k-3 > li { counter-increment: lst-ctn-kix_uqyylbhn1m4k-3 1; }

ol.lst-kix_3ho157wy3jxf-7.start { counter-reset: lst-ctn-kix_3ho157wy3jxf-7 0; }

ol.lst-kix_okhvdbx9vxjx-8.start { counter-reset: lst-ctn-kix_okhvdbx9vxjx-8 0; }

ol.lst-kix_ckxnb6vf7vme-1.start { counter-reset: lst-ctn-kix_ckxnb6vf7vme-1 0; }

.lst-kix_m7gyp3gged0c-5 > li::before { content: "" counter(lst-ctn-kix_m7gyp3gged0c-5, lower-roman) ". "; }

.lst-kix_gn9iznjyvy0-5 > li::before { content: "" counter(lst-ctn-kix_gn9iznjyvy0-5, lower-roman) ". "; }

.lst-kix_gn9iznjyvy0-7 > li::before { content: "" counter(lst-ctn-kix_gn9iznjyvy0-7, lower-latin) ". "; }

ol.lst-kix_ruhin6837alc-6.start { counter-reset: lst-ctn-kix_ruhin6837alc-6 0; }

.lst-kix_ljmndakz6mcr-2 > li { counter-increment: lst-ctn-kix_ljmndakz6mcr-2 1; }

.lst-kix_lcuwlsa6z8uz-1 > li { counter-increment: lst-ctn-kix_lcuwlsa6z8uz-1 1; }

.lst-kix_sijhq5esqs8x-8 > li::before { content: "■  "; }

.lst-kix_q3b8r3xg1qkx-1 > li { counter-increment: lst-ctn-kix_q3b8r3xg1qkx-1 1; }

.lst-kix_3ndwxni7n3wv-1 > li { counter-increment: lst-ctn-kix_3ndwxni7n3wv-1 1; }

.lst-kix_tj22yequgne3-7 > li { counter-increment: lst-ctn-kix_tj22yequgne3-7 1; }

.lst-kix_c537b0yjw9gz-5 > li::before { content: "■  "; }

ol.lst-kix_vwmkmidzq0q1-1.start { counter-reset: lst-ctn-kix_vwmkmidzq0q1-1 0; }

.lst-kix_c537b0yjw9gz-1 > li::before { content: "○  "; }

.lst-kix_c537b0yjw9gz-3 > li::before { content: "●  "; }

.lst-kix_ksgcgd9whg8s-0 > li { counter-increment: lst-ctn-kix_ksgcgd9whg8s-0 1; }

ol.lst-kix_bvmitnb5swh8-0.start { counter-reset: lst-ctn-kix_bvmitnb5swh8-0 0; }

.lst-kix_m7gyp3gged0c-0 > li { counter-increment: lst-ctn-kix_m7gyp3gged0c-0 1; }

.lst-kix_nit8j66s93ag-8 > li::before { content: "■  "; }

ol.lst-kix_ckxnb6vf7vme-6.start { counter-reset: lst-ctn-kix_ckxnb6vf7vme-6 0; }

.lst-kix_3ndwxni7n3wv-8 > li { counter-increment: lst-ctn-kix_3ndwxni7n3wv-8 1; }

.lst-kix_rrld09yo0z41-4 > li { counter-increment: lst-ctn-kix_rrld09yo0z41-4 1; }

ol.lst-kix_ksgcgd9whg8s-5 { list-style-type: none; }

ol.lst-kix_ksgcgd9whg8s-4 { list-style-type: none; }

ol.lst-kix_ksgcgd9whg8s-3 { list-style-type: none; }

ol.lst-kix_ksgcgd9whg8s-2 { list-style-type: none; }

ol.lst-kix_ksgcgd9whg8s-1 { list-style-type: none; }

ol.lst-kix_ksgcgd9whg8s-0 { list-style-type: none; }

ol.lst-kix_3ho157wy3jxf-2.start { counter-reset: lst-ctn-kix_3ho157wy3jxf-2 0; }

.lst-kix_m3mg1m14r0ox-2 > li { counter-increment: lst-ctn-kix_m3mg1m14r0ox-2 1; }

ol.lst-kix_ruhin6837alc-1.start { counter-reset: lst-ctn-kix_ruhin6837alc-1 0; }

.lst-kix_m4p7szoqaqik-6 > li::before { content: "●  "; }

ol.lst-kix_ksgcgd9whg8s-8 { list-style-type: none; }

ol.lst-kix_ksgcgd9whg8s-7 { list-style-type: none; }

ol.lst-kix_ksgcgd9whg8s-6 { list-style-type: none; }

.lst-kix_m4p7szoqaqik-4 > li::before { content: "○  "; }

.lst-kix_c537b0yjw9gz-7 > li::before { content: "○  "; }

.lst-kix_xc5d5ew3cd2w-6 > li { counter-increment: lst-ctn-kix_xc5d5ew3cd2w-6 1; }

.lst-kix_bvmitnb5swh8-1 > li::before { content: "" counter(lst-ctn-kix_bvmitnb5swh8-1, lower-latin) ". "; }

.lst-kix_m4p7szoqaqik-0 > li::before { content: "●  "; }

.lst-kix_m4p7szoqaqik-2 > li::before { content: "■  "; }

.lst-kix_bvmitnb5swh8-3 > li::before { content: "" counter(lst-ctn-kix_bvmitnb5swh8-3) ". "; }

.lst-kix_bvmitnb5swh8-5 > li::before { content: "" counter(lst-ctn-kix_bvmitnb5swh8-5, lower-roman) ". "; }

.lst-kix_c7313u9pplkk-7 > li { counter-increment: lst-ctn-kix_c7313u9pplkk-7 1; }

.lst-kix_bvmitnb5swh8-7 > li::before { content: "" counter(lst-ctn-kix_bvmitnb5swh8-7, lower-latin) ". "; }

.lst-kix_q9wm09yqvpbs-1 > li { counter-increment: lst-ctn-kix_q9wm09yqvpbs-1 1; }

.lst-kix_yt60ymksdnh5-3 > li { counter-increment: lst-ctn-kix_yt60ymksdnh5-3 1; }

.lst-kix_ckxnb6vf7vme-2 > li { counter-increment: lst-ctn-kix_ckxnb6vf7vme-2 1; }

.lst-kix_ksgcgd9whg8s-2 > li::before { content: "" counter(lst-ctn-kix_ksgcgd9whg8s-2, lower-roman) ". "; }

.lst-kix_n1ny3uif9c2q-6 > li { counter-increment: lst-ctn-kix_n1ny3uif9c2q-6 1; }

.lst-kix_lcuwlsa6z8uz-8 > li { counter-increment: lst-ctn-kix_lcuwlsa6z8uz-8 1; }

.lst-kix_q3b8r3xg1qkx-8 > li { counter-increment: lst-ctn-kix_q3b8r3xg1qkx-8 1; }

ol.lst-kix_3ndwxni7n3wv-6.start { counter-reset: lst-ctn-kix_3ndwxni7n3wv-6 0; }

.lst-kix_ksgcgd9whg8s-0 > li::before { content: "" counter(lst-ctn-kix_ksgcgd9whg8s-0) ". "; }

.lst-kix_gzdu38n4pxir-0 > li { counter-increment: lst-ctn-kix_gzdu38n4pxir-0 1; }

.lst-kix_10q7n546cbqj-6 > li { counter-increment: lst-ctn-kix_10q7n546cbqj-6 1; }

ol.lst-kix_pwbhslrd67om-0.start { counter-reset: lst-ctn-kix_pwbhslrd67om-0 0; }

ul.lst-kix_olo1v9h26sum-8 { list-style-type: none; }

ol.lst-kix_sq2mty8y4cla-7.start { counter-reset: lst-ctn-kix_sq2mty8y4cla-7 0; }

ul.lst-kix_olo1v9h26sum-0 { list-style-type: none; }

.lst-kix_c7313u9pplkk-0 > li { counter-increment: lst-ctn-kix_c7313u9pplkk-0 1; }

ol.lst-kix_ljmndakz6mcr-6.start { counter-reset: lst-ctn-kix_ljmndakz6mcr-6 0; }

ul.lst-kix_olo1v9h26sum-1 { list-style-type: none; }

ul.lst-kix_olo1v9h26sum-2 { list-style-type: none; }

ul.lst-kix_olo1v9h26sum-3 { list-style-type: none; }

ol.lst-kix_dcv7ib5lvp4v-7.start { counter-reset: lst-ctn-kix_dcv7ib5lvp4v-7 0; }

ul.lst-kix_olo1v9h26sum-4 { list-style-type: none; }

ul.lst-kix_olo1v9h26sum-5 { list-style-type: none; }

ul.lst-kix_olo1v9h26sum-6 { list-style-type: none; }

ul.lst-kix_olo1v9h26sum-7 { list-style-type: none; }

ol.lst-kix_mnp305eqj1wg-1.start { counter-reset: lst-ctn-kix_mnp305eqj1wg-1 0; }

.lst-kix_nit8j66s93ag-6 > li::before { content: "●  "; }

ol.lst-kix_w4jnjjd4slk1-0.start { counter-reset: lst-ctn-kix_w4jnjjd4slk1-0 0; }

.lst-kix_bseh3kjlzqme-1 > li::before { content: "" counter(lst-ctn-kix_bseh3kjlzqme-1, lower-latin) ". "; }

.lst-kix_bseh3kjlzqme-3 > li::before { content: "" counter(lst-ctn-kix_bseh3kjlzqme-3) ". "; }

.lst-kix_nit8j66s93ag-4 > li::before { content: "○  "; }

.lst-kix_f9adxqm8wtcr-3 > li::before { content: "●  "; }

.lst-kix_e1iec80scof-8 > li::before { content: "■  "; }

.lst-kix_nit8j66s93ag-2 > li::before { content: "■  "; }

.lst-kix_bseh3kjlzqme-5 > li::before { content: "" counter(lst-ctn-kix_bseh3kjlzqme-5, lower-roman) ". "; }

.lst-kix_bseh3kjlzqme-7 > li::before { content: "" counter(lst-ctn-kix_bseh3kjlzqme-7, lower-latin) ". "; }

ol.lst-kix_okhvdbx9vxjx-3.start { counter-reset: lst-ctn-kix_okhvdbx9vxjx-3 0; }

.lst-kix_mnp305eqj1wg-8 > li { counter-increment: lst-ctn-kix_mnp305eqj1wg-8 1; }

.lst-kix_f9adxqm8wtcr-1 > li::before { content: "○  "; }

.lst-kix_nit8j66s93ag-0 > li::before { content: "●  "; }

.lst-kix_okhvdbx9vxjx-7 > li { counter-increment: lst-ctn-kix_okhvdbx9vxjx-7 1; }

.lst-kix_oiuz0iy372u2-8 > li { counter-increment: lst-ctn-kix_oiuz0iy372u2-8 1; }

.lst-kix_mnp305eqj1wg-1 > li { counter-increment: lst-ctn-kix_mnp305eqj1wg-1 1; }

.lst-kix_okhvdbx9vxjx-0 > li { counter-increment: lst-ctn-kix_okhvdbx9vxjx-0 1; }

.lst-kix_fcu0owu0u5lm-8 > li { counter-increment: lst-ctn-kix_fcu0owu0u5lm-8 1; }

.lst-kix_w4jnjjd4slk1-0 > li { counter-increment: lst-ctn-kix_w4jnjjd4slk1-0 1; }

.lst-kix_e1iec80scof-0 > li::before { content: "●  "; }

.lst-kix_sijhq5esqs8x-6 > li::before { content: "●  "; }

.lst-kix_sijhq5esqs8x-4 > li::before { content: "○  "; }

.lst-kix_e1iec80scof-4 > li::before { content: "○  "; }

.lst-kix_sijhq5esqs8x-2 > li::before { content: "■  "; }

.lst-kix_ey0jmq1tgbhn-3 > li { counter-increment: lst-ctn-kix_ey0jmq1tgbhn-3 1; }

ol.lst-kix_q9wm09yqvpbs-8.start { counter-reset: lst-ctn-kix_q9wm09yqvpbs-8 0; }

.lst-kix_4uq1mr5t1xn5-5 > li { counter-increment: lst-ctn-kix_4uq1mr5t1xn5-5 1; }

.lst-kix_e1iec80scof-2 > li::before { content: "■  "; }

.lst-kix_e1iec80scof-6 > li::before { content: "●  "; }

.lst-kix_f9adxqm8wtcr-7 > li::before { content: "○  "; }

.lst-kix_gn9iznjyvy0-1 > li::before { content: "" counter(lst-ctn-kix_gn9iznjyvy0-1, lower-latin) ". "; }

.lst-kix_sijhq5esqs8x-0 > li::before { content: "●  "; }

.lst-kix_gzdu38n4pxir-7 > li { counter-increment: lst-ctn-kix_gzdu38n4pxir-7 1; }

.lst-kix_f9adxqm8wtcr-5 > li::before { content: "■  "; }

ol.lst-kix_rrld09yo0z41-7 { list-style-type: none; }

ol.lst-kix_rrld09yo0z41-8 { list-style-type: none; }

ol.lst-kix_rrld09yo0z41-5 { list-style-type: none; }

ol.lst-kix_rrld09yo0z41-6 { list-style-type: none; }

ol.lst-kix_rrld09yo0z41-3 { list-style-type: none; }

ol.lst-kix_rrld09yo0z41-4 { list-style-type: none; }

ol.lst-kix_rrld09yo0z41-1 { list-style-type: none; }

.lst-kix_ey0jmq1tgbhn-2 > li::before { content: "" counter(lst-ctn-kix_ey0jmq1tgbhn-2, lower-roman) ". "; }

ol.lst-kix_rrld09yo0z41-2 { list-style-type: none; }

ol.lst-kix_5270cv8i6nuv-8.start { counter-reset: lst-ctn-kix_5270cv8i6nuv-8 0; }

ol.lst-kix_rrld09yo0z41-0 { list-style-type: none; }

ol.lst-kix_xqezlaka82l9-0.start { counter-reset: lst-ctn-kix_xqezlaka82l9-0 0; }

ol.lst-kix_w9tqx4187f4c-8.start { counter-reset: lst-ctn-kix_w9tqx4187f4c-8 0; }

.lst-kix_xqezlaka82l9-0 > li::before { content: "" counter(lst-ctn-kix_xqezlaka82l9-0) ". "; }

.lst-kix_3ndwxni7n3wv-6 > li::before { content: "" counter(lst-ctn-kix_3ndwxni7n3wv-6) ". "; }

.lst-kix_ey0jmq1tgbhn-6 > li::before { content: "" counter(lst-ctn-kix_ey0jmq1tgbhn-6) ". "; }

.lst-kix_nqdkqsc3oqx4-6 > li { counter-increment: lst-ctn-kix_nqdkqsc3oqx4-6 1; }

ol.lst-kix_bseh3kjlzqme-0.start { counter-reset: lst-ctn-kix_bseh3kjlzqme-0 0; }

ol.lst-kix_tj22yequgne3-3.start { counter-reset: lst-ctn-kix_tj22yequgne3-3 0; }

ol.lst-kix_lcuwlsa6z8uz-0.start { counter-reset: lst-ctn-kix_lcuwlsa6z8uz-0 0; }

.lst-kix_gn9iznjyvy0-1 > li { counter-increment: lst-ctn-kix_gn9iznjyvy0-1 1; }

.lst-kix_lcuwlsa6z8uz-3 > li::before { content: "" counter(lst-ctn-kix_lcuwlsa6z8uz-3) ". "; }

ol.lst-kix_nqdkqsc3oqx4-6.start { counter-reset: lst-ctn-kix_nqdkqsc3oqx4-6 0; }

ul.lst-kix_or4x01rk566h-0 { list-style-type: none; }

ul.lst-kix_or4x01rk566h-1 { list-style-type: none; }

ul.lst-kix_or4x01rk566h-2 { list-style-type: none; }

ul.lst-kix_or4x01rk566h-3 { list-style-type: none; }

ul.lst-kix_or4x01rk566h-4 { list-style-type: none; }

ul.lst-kix_or4x01rk566h-5 { list-style-type: none; }

.lst-kix_gn9iznjyvy0-3 > li { counter-increment: lst-ctn-kix_gn9iznjyvy0-3 1; }

.lst-kix_3ho157wy3jxf-8 > li { counter-increment: lst-ctn-kix_3ho157wy3jxf-8 1; }

ul.lst-kix_or4x01rk566h-6 { list-style-type: none; }

ul.lst-kix_or4x01rk566h-7 { list-style-type: none; }

.lst-kix_572earllcbds-1 > li { counter-increment: lst-ctn-kix_572earllcbds-1 1; }

ul.lst-kix_or4x01rk566h-8 { list-style-type: none; }

.lst-kix_habx6bj0olf7-5 > li { counter-increment: lst-ctn-kix_habx6bj0olf7-5 1; }

ul.lst-kix_69cgk215qz5l-3 { list-style-type: none; }

ul.lst-kix_69cgk215qz5l-4 { list-style-type: none; }

ol.lst-kix_ksgcgd9whg8s-2.start { counter-reset: lst-ctn-kix_ksgcgd9whg8s-2 0; }

ul.lst-kix_69cgk215qz5l-5 { list-style-type: none; }

ul.lst-kix_69cgk215qz5l-6 { list-style-type: none; }

ul.lst-kix_69cgk215qz5l-0 { list-style-type: none; }

ul.lst-kix_69cgk215qz5l-1 { list-style-type: none; }

ul.lst-kix_69cgk215qz5l-2 { list-style-type: none; }

ol.lst-kix_m3mg1m14r0ox-8.start { counter-reset: lst-ctn-kix_m3mg1m14r0ox-8 0; }

ul.lst-kix_69cgk215qz5l-7 { list-style-type: none; }

ul.lst-kix_69cgk215qz5l-8 { list-style-type: none; }

.lst-kix_3ndwxni7n3wv-2 > li::before { content: "" counter(lst-ctn-kix_3ndwxni7n3wv-2, lower-roman) ". "; }

.lst-kix_l80e6xnoww9k-0 > li { counter-increment: lst-ctn-kix_l80e6xnoww9k-0 1; }

.lst-kix_xqezlaka82l9-2 > li { counter-increment: lst-ctn-kix_xqezlaka82l9-2 1; }

ol.lst-kix_habx6bj0olf7-1.start { counter-reset: lst-ctn-kix_habx6bj0olf7-1 0; }

ol.lst-kix_xc5d5ew3cd2w-7.start { counter-reset: lst-ctn-kix_xc5d5ew3cd2w-7 0; }

.lst-kix_10q7n546cbqj-5 > li::before { content: "" counter(lst-ctn-kix_10q7n546cbqj-5, lower-roman) ". "; }

ol.lst-kix_oiuz0iy372u2-6.start { counter-reset: lst-ctn-kix_oiuz0iy372u2-6 0; }

ol.lst-kix_lcuwlsa6z8uz-5.start { counter-reset: lst-ctn-kix_lcuwlsa6z8uz-5 0; }

ol.lst-kix_xqezlaka82l9-5.start { counter-reset: lst-ctn-kix_xqezlaka82l9-5 0; }

ol.lst-kix_rrld09yo0z41-2.start { counter-reset: lst-ctn-kix_rrld09yo0z41-2 0; }

ol.lst-kix_b4yhtr5n7hga-6.start { counter-reset: lst-ctn-kix_b4yhtr5n7hga-6 0; }

.lst-kix_572earllcbds-8 > li { counter-increment: lst-ctn-kix_572earllcbds-8 1; }

.lst-kix_t1ql394g7cq6-5 > li { counter-increment: lst-ctn-kix_t1ql394g7cq6-5 1; }

.lst-kix_w4jnjjd4slk1-7 > li { counter-increment: lst-ctn-kix_w4jnjjd4slk1-7 1; }

.lst-kix_3ho157wy3jxf-1 > li { counter-increment: lst-ctn-kix_3ho157wy3jxf-1 1; }

ol.lst-kix_572earllcbds-4.start { counter-reset: lst-ctn-kix_572earllcbds-4 0; }

ol.lst-kix_10q7n546cbqj-8.start { counter-reset: lst-ctn-kix_10q7n546cbqj-8 0; }

ol.lst-kix_q3b8r3xg1qkx-0.start { counter-reset: lst-ctn-kix_q3b8r3xg1qkx-0 0; }

.lst-kix_m7gyp3gged0c-7 > li { counter-increment: lst-ctn-kix_m7gyp3gged0c-7 1; }

.lst-kix_10q7n546cbqj-1 > li::before { content: "" counter(lst-ctn-kix_10q7n546cbqj-1, lower-latin) ". "; }

.lst-kix_85dwzw7kxv5h-4 > li { counter-increment: lst-ctn-kix_85dwzw7kxv5h-4 1; }

.lst-kix_85dwzw7kxv5h-2 > li::before { content: "" counter(lst-ctn-kix_85dwzw7kxv5h-2, lower-roman) ". "; }

.lst-kix_ksgcgd9whg8s-6 > li::before { content: "" counter(lst-ctn-kix_ksgcgd9whg8s-6) ". "; }

.lst-kix_xqezlaka82l9-8 > li::before { content: "" counter(lst-ctn-kix_xqezlaka82l9-8, lower-roman) ". "; }

.lst-kix_lcuwlsa6z8uz-7 > li::before { content: "" counter(lst-ctn-kix_lcuwlsa6z8uz-7, lower-latin) ". "; }

.lst-kix_85dwzw7kxv5h-6 > li::before { content: "" counter(lst-ctn-kix_85dwzw7kxv5h-6) ". "; }

.lst-kix_q9wm09yqvpbs-8 > li { counter-increment: lst-ctn-kix_q9wm09yqvpbs-8 1; }

.lst-kix_xqezlaka82l9-4 > li::before { content: "" counter(lst-ctn-kix_xqezlaka82l9-4, lower-latin) ". "; }

ol.lst-kix_habx6bj0olf7-6.start { counter-reset: lst-ctn-kix_habx6bj0olf7-6 0; }

.lst-kix_or4x01rk566h-3 > li::before { content: "●  "; }

.lst-kix_xc5d5ew3cd2w-3 > li::before { content: "" counter(lst-ctn-kix_xc5d5ew3cd2w-3) ". "; }

ol.lst-kix_mnp305eqj1wg-6.start { counter-reset: lst-ctn-kix_mnp305eqj1wg-6 0; }

ol.lst-kix_dcv7ib5lvp4v-2.start { counter-reset: lst-ctn-kix_dcv7ib5lvp4v-2 0; }

.lst-kix_3ho157wy3jxf-3 > li { counter-increment: lst-ctn-kix_3ho157wy3jxf-3 1; }

ol.lst-kix_85dwzw7kxv5h-4.start { counter-reset: lst-ctn-kix_85dwzw7kxv5h-4 0; }

ol.lst-kix_t1ql394g7cq6-1.start { counter-reset: lst-ctn-kix_t1ql394g7cq6-1 0; }

.lst-kix_b4yhtr5n7hga-7 > li { counter-increment: lst-ctn-kix_b4yhtr5n7hga-7 1; }

.lst-kix_ljmndakz6mcr-3 > li::before { content: "" counter(lst-ctn-kix_ljmndakz6mcr-3) ". "; }

.lst-kix_gn9iznjyvy0-8 > li { counter-increment: lst-ctn-kix_gn9iznjyvy0-8 1; }

ul.lst-kix_zgiykejnxm8t-5 { list-style-type: none; }

ul.lst-kix_zgiykejnxm8t-6 { list-style-type: none; }

ul.lst-kix_zgiykejnxm8t-7 { list-style-type: none; }

ul.lst-kix_zgiykejnxm8t-8 { list-style-type: none; }

ul.lst-kix_zgiykejnxm8t-1 { list-style-type: none; }

ul.lst-kix_zgiykejnxm8t-2 { list-style-type: none; }

ul.lst-kix_zgiykejnxm8t-3 { list-style-type: none; }

ul.lst-kix_zgiykejnxm8t-4 { list-style-type: none; }

.lst-kix_ljmndakz6mcr-7 > li::before { content: "" counter(lst-ctn-kix_ljmndakz6mcr-7, lower-latin) ". "; }

ol.lst-kix_ey0jmq1tgbhn-8.start { counter-reset: lst-ctn-kix_ey0jmq1tgbhn-8 0; }

ul.lst-kix_zgiykejnxm8t-0 { list-style-type: none; }

.lst-kix_or4x01rk566h-7 > li::before { content: "○  "; }

ol.lst-kix_sq2mty8y4cla-8 { list-style-type: none; }

ol.lst-kix_sq2mty8y4cla-5 { list-style-type: none; }

ol.lst-kix_sq2mty8y4cla-4 { list-style-type: none; }

ol.lst-kix_sq2mty8y4cla-7 { list-style-type: none; }

ol.lst-kix_sq2mty8y4cla-6 { list-style-type: none; }

ol.lst-kix_sq2mty8y4cla-1 { list-style-type: none; }

ol.lst-kix_sq2mty8y4cla-0 { list-style-type: none; }

.lst-kix_j5huq76pqetk-5 > li { counter-increment: lst-ctn-kix_j5huq76pqetk-5 1; }

ol.lst-kix_sq2mty8y4cla-3 { list-style-type: none; }

ol.lst-kix_sq2mty8y4cla-2 { list-style-type: none; }

ol.lst-kix_uqyylbhn1m4k-2.start { counter-reset: lst-ctn-kix_uqyylbhn1m4k-2 0; }

.lst-kix_pwbhslrd67om-0 > li { counter-increment: lst-ctn-kix_pwbhslrd67om-0 1; }

ol.lst-kix_q3b8r3xg1qkx-5.start { counter-reset: lst-ctn-kix_q3b8r3xg1qkx-5 0; }

ol.lst-kix_n1ny3uif9c2q-3.start { counter-reset: lst-ctn-kix_n1ny3uif9c2q-3 0; }

ol.lst-kix_gpfkle35f9g6-6.start { counter-reset: lst-ctn-kix_gpfkle35f9g6-6 0; }

.lst-kix_xqezlaka82l9-4 > li { counter-increment: lst-ctn-kix_xqezlaka82l9-4 1; }

ol.lst-kix_xc5d5ew3cd2w-2.start { counter-reset: lst-ctn-kix_xc5d5ew3cd2w-2 0; }

ol.lst-kix_10q7n546cbqj-3.start { counter-reset: lst-ctn-kix_10q7n546cbqj-3 0; }

.lst-kix_bseh3kjlzqme-5 > li { counter-increment: lst-ctn-kix_bseh3kjlzqme-5 1; }

.lst-kix_nqdkqsc3oqx4-1 > li { counter-increment: lst-ctn-kix_nqdkqsc3oqx4-1 1; }

.lst-kix_nqdkqsc3oqx4-8 > li { counter-increment: lst-ctn-kix_nqdkqsc3oqx4-8 1; }

.lst-kix_habx6bj0olf7-6 > li::before { content: "" counter(lst-ctn-kix_habx6bj0olf7-6) ". "; }

ol.lst-kix_5270cv8i6nuv-3.start { counter-reset: lst-ctn-kix_5270cv8i6nuv-3 0; }

.lst-kix_pwbhslrd67om-7 > li { counter-increment: lst-ctn-kix_pwbhslrd67om-7 1; }

.lst-kix_l80e6xnoww9k-1 > li::before { content: "" counter(lst-ctn-kix_l80e6xnoww9k-1, lower-latin) ". "; }

.lst-kix_b4yhtr5n7hga-5 > li { counter-increment: lst-ctn-kix_b4yhtr5n7hga-5 1; }

.lst-kix_igutqwst0xn-7 > li::before { content: "○  "; }

.lst-kix_q26h1rehak49-6 > li::before { content: "●  "; }

ol.lst-kix_q3b8r3xg1qkx-3.start { counter-reset: lst-ctn-kix_q3b8r3xg1qkx-3 0; }

ol.lst-kix_tj22yequgne3-8 { list-style-type: none; }

ol.lst-kix_tj22yequgne3-7 { list-style-type: none; }

ol.lst-kix_tj22yequgne3-6 { list-style-type: none; }

.lst-kix_3ho157wy3jxf-4 > li::before { content: "" counter(lst-ctn-kix_3ho157wy3jxf-4, lower-latin) ". "; }

.lst-kix_3ho157wy3jxf-8 > li::before { content: "" counter(lst-ctn-kix_3ho157wy3jxf-8, lower-roman) ". "; }

ol.lst-kix_tj22yequgne3-5 { list-style-type: none; }

ol.lst-kix_tj22yequgne3-4 { list-style-type: none; }

ol.lst-kix_tj22yequgne3-3 { list-style-type: none; }

ol.lst-kix_tj22yequgne3-2 { list-style-type: none; }

.lst-kix_q9wm09yqvpbs-3 > li { counter-increment: lst-ctn-kix_q9wm09yqvpbs-3 1; }

ol.lst-kix_tj22yequgne3-1 { list-style-type: none; }

.lst-kix_l80e6xnoww9k-5 > li::before { content: "" counter(lst-ctn-kix_l80e6xnoww9k-5, lower-roman) ". "; }

ol.lst-kix_tj22yequgne3-0 { list-style-type: none; }

.lst-kix_igutqwst0xn-3 > li::before { content: "●  "; }

.lst-kix_n1ny3uif9c2q-2 > li::before { content: "" counter(lst-ctn-kix_n1ny3uif9c2q-2, lower-roman) ". "; }

.lst-kix_q26h1rehak49-2 > li::before { content: "■  "; }

ol.lst-kix_pwbhslrd67om-5.start { counter-reset: lst-ctn-kix_pwbhslrd67om-5 0; }

.lst-kix_3ho157wy3jxf-0 > li::before { content: "" counter(lst-ctn-kix_3ho157wy3jxf-0) ". "; }

ol.lst-kix_n1ny3uif9c2q-1.start { counter-reset: lst-ctn-kix_n1ny3uif9c2q-1 0; }

.lst-kix_xrj1sdkp3cni-5 > li { counter-increment: lst-ctn-kix_xrj1sdkp3cni-5 1; }

ol.lst-kix_yt60ymksdnh5-5.start { counter-reset: lst-ctn-kix_yt60ymksdnh5-5 0; }

.lst-kix_n1ny3uif9c2q-6 > li::before { content: "" counter(lst-ctn-kix_n1ny3uif9c2q-6) ". "; }

ol.lst-kix_572earllcbds-1.start { counter-reset: lst-ctn-kix_572earllcbds-1 0; }

ol.lst-kix_uqyylbhn1m4k-0.start { counter-reset: lst-ctn-kix_uqyylbhn1m4k-0 0; }

ol.lst-kix_sq2mty8y4cla-2.start { counter-reset: lst-ctn-kix_sq2mty8y4cla-2 0; }

ol.lst-kix_m3mg1m14r0ox-3.start { counter-reset: lst-ctn-kix_m3mg1m14r0ox-3 0; }

.lst-kix_habx6bj0olf7-2 > li::before { content: "" counter(lst-ctn-kix_habx6bj0olf7-2, lower-roman) ". "; }

.lst-kix_ksgcgd9whg8s-7 > li { counter-increment: lst-ctn-kix_ksgcgd9whg8s-7 1; }

.lst-kix_m7gyp3gged0c-1 > li::before { content: "" counter(lst-ctn-kix_m7gyp3gged0c-1, lower-latin) ". "; }

ol.lst-kix_uqyylbhn1m4k-8 { list-style-type: none; }

ol.lst-kix_fcu0owu0u5lm-6.start { counter-reset: lst-ctn-kix_fcu0owu0u5lm-6 0; }

ol.lst-kix_uqyylbhn1m4k-5 { list-style-type: none; }

.lst-kix_cmz9dkb8w9u4-7 > li::before { content: "○  "; }

ol.lst-kix_uqyylbhn1m4k-4 { list-style-type: none; }

ol.lst-kix_uqyylbhn1m4k-7 { list-style-type: none; }

ol.lst-kix_uqyylbhn1m4k-6 { list-style-type: none; }

ol.lst-kix_uqyylbhn1m4k-1 { list-style-type: none; }

ol.lst-kix_uqyylbhn1m4k-0 { list-style-type: none; }

ol.lst-kix_uqyylbhn1m4k-3 { list-style-type: none; }

ol.lst-kix_uqyylbhn1m4k-2 { list-style-type: none; }

.lst-kix_b4yhtr5n7hga-7 > li::before { content: "" counter(lst-ctn-kix_b4yhtr5n7hga-7, lower-latin) ". "; }

.lst-kix_dcv7ib5lvp4v-2 > li::before { content: "" counter(lst-ctn-kix_dcv7ib5lvp4v-2, lower-roman) ". "; }

.lst-kix_4uq1mr5t1xn5-0 > li::before { content: "" counter(lst-ctn-kix_4uq1mr5t1xn5-0) ". "; }

.lst-kix_xc5d5ew3cd2w-8 > li { counter-increment: lst-ctn-kix_xc5d5ew3cd2w-8 1; }

.lst-kix_cmz9dkb8w9u4-1 > li::before { content: "○  "; }

.lst-kix_4uq1mr5t1xn5-2 > li::before { content: "" counter(lst-ctn-kix_4uq1mr5t1xn5-2, lower-roman) ". "; }

.lst-kix_pwbhslrd67om-5 > li { counter-increment: lst-ctn-kix_pwbhslrd67om-5 1; }

ol.lst-kix_l80e6xnoww9k-8.start { counter-reset: lst-ctn-kix_l80e6xnoww9k-8 0; }

.lst-kix_m7gyp3gged0c-2 > li { counter-increment: lst-ctn-kix_m7gyp3gged0c-2 1; }

ol.lst-kix_bseh3kjlzqme-3.start { counter-reset: lst-ctn-kix_bseh3kjlzqme-3 0; }

.lst-kix_b4yhtr5n7hga-0 > li { counter-increment: lst-ctn-kix_b4yhtr5n7hga-0 1; }

.lst-kix_gpfkle35f9g6-3 > li { counter-increment: lst-ctn-kix_gpfkle35f9g6-3 1; }

.lst-kix_rrld09yo0z41-2 > li { counter-increment: lst-ctn-kix_rrld09yo0z41-2 1; }

.lst-kix_4uq1mr5t1xn5-8 > li::before { content: "" counter(lst-ctn-kix_4uq1mr5t1xn5-8, lower-roman) ". "; }

.lst-kix_w4jnjjd4slk1-2 > li { counter-increment: lst-ctn-kix_w4jnjjd4slk1-2 1; }

ol.lst-kix_w9tqx4187f4c-5.start { counter-reset: lst-ctn-kix_w9tqx4187f4c-5 0; }

ol.lst-kix_nqdkqsc3oqx4-3.start { counter-reset: lst-ctn-kix_nqdkqsc3oqx4-3 0; }

.lst-kix_dcv7ib5lvp4v-4 > li::before { content: "" counter(lst-ctn-kix_dcv7ib5lvp4v-4, lower-latin) ". "; }

.lst-kix_zgiykejnxm8t-3 > li::before { content: "●  "; }

.lst-kix_ksgcgd9whg8s-2 > li { counter-increment: lst-ctn-kix_ksgcgd9whg8s-2 1; }

.lst-kix_n1ny3uif9c2q-8 > li { counter-increment: lst-ctn-kix_n1ny3uif9c2q-8 1; }

.lst-kix_xrj1sdkp3cni-3 > li { counter-increment: lst-ctn-kix_xrj1sdkp3cni-3 1; }

.lst-kix_ey0jmq1tgbhn-5 > li { counter-increment: lst-ctn-kix_ey0jmq1tgbhn-5 1; }

.lst-kix_rrld09yo0z41-7 > li::before { content: "" counter(lst-ctn-kix_rrld09yo0z41-7, lower-latin) ". "; }

ol.lst-kix_fcu0owu0u5lm-1.start { counter-reset: lst-ctn-kix_fcu0owu0u5lm-1 0; }

.lst-kix_620io0vozd8n-7 > li::before { content: "○  "; }

.lst-kix_zgiykejnxm8t-1 > li::before { content: "○  "; }

.lst-kix_572earllcbds-0 > li::before { content: "" counter(lst-ctn-kix_572earllcbds-0) ". "; }

.lst-kix_572earllcbds-6 > li::before { content: "" counter(lst-ctn-kix_572earllcbds-6) ". "; }

.lst-kix_mnp305eqj1wg-5 > li::before { content: "" counter(lst-ctn-kix_mnp305eqj1wg-5, lower-roman) ". "; }

ol.lst-kix_yt60ymksdnh5-2.start { counter-reset: lst-ctn-kix_yt60ymksdnh5-2 0; }

ol.lst-kix_l80e6xnoww9k-3.start { counter-reset: lst-ctn-kix_l80e6xnoww9k-3 0; }

ol.lst-kix_gpfkle35f9g6-3.start { counter-reset: lst-ctn-kix_gpfkle35f9g6-3 0; }

.lst-kix_mnp305eqj1wg-7 > li::before { content: "" counter(lst-ctn-kix_mnp305eqj1wg-7, lower-latin) ". "; }

.lst-kix_gpfkle35f9g6-3 > li::before { content: "" counter(lst-ctn-kix_gpfkle35f9g6-3) ". "; }

.lst-kix_yt60ymksdnh5-5 > li { counter-increment: lst-ctn-kix_yt60ymksdnh5-5 1; }

ol.lst-kix_bseh3kjlzqme-8.start { counter-reset: lst-ctn-kix_bseh3kjlzqme-8 0; }

.lst-kix_27lagi0g2vk-1 > li::before { content: "○  "; }

.lst-kix_rrld09yo0z41-5 > li::before { content: "" counter(lst-ctn-kix_rrld09yo0z41-5, lower-roman) ". "; }

.lst-kix_uqyylbhn1m4k-4 > li::before { content: "" counter(lst-ctn-kix_uqyylbhn1m4k-4, lower-latin) ". "; }

.lst-kix_ckxnb6vf7vme-7 > li { counter-increment: lst-ctn-kix_ckxnb6vf7vme-7 1; }

ol.lst-kix_ey0jmq1tgbhn-5.start { counter-reset: lst-ctn-kix_ey0jmq1tgbhn-5 0; }

ol.lst-kix_m7gyp3gged0c-3.start { counter-reset: lst-ctn-kix_m7gyp3gged0c-3 0; }

.lst-kix_gpfkle35f9g6-1 > li::before { content: "" counter(lst-ctn-kix_gpfkle35f9g6-1, lower-latin) ". "; }

.lst-kix_t1ql394g7cq6-4 > li::before { content: "" counter(lst-ctn-kix_t1ql394g7cq6-4, lower-latin) ". "; }

.lst-kix_uqyylbhn1m4k-2 > li::before { content: "" counter(lst-ctn-kix_uqyylbhn1m4k-2, lower-roman) ". "; }

.lst-kix_3oqw8rm66zow-0 > li::before { content: "●  "; }

.lst-kix_b4yhtr5n7hga-1 > li::before { content: "" counter(lst-ctn-kix_b4yhtr5n7hga-1, lower-latin) ". "; }

ol.lst-kix_nqdkqsc3oqx4-8.start { counter-reset: lst-ctn-kix_nqdkqsc3oqx4-8 0; }

.lst-kix_27lagi0g2vk-7 > li::before { content: "○  "; }

.lst-kix_3oqw8rm66zow-8 > li::before { content: "■  "; }

.lst-kix_t1ql394g7cq6-2 > li::before { content: "" counter(lst-ctn-kix_t1ql394g7cq6-2, lower-roman) ". "; }

.lst-kix_620io0vozd8n-1 > li::before { content: "○  "; }

.lst-kix_3oqw8rm66zow-6 > li::before { content: "●  "; }

.lst-kix_xc5d5ew3cd2w-5 > li::before { content: "" counter(lst-ctn-kix_xc5d5ew3cd2w-5, lower-roman) ". "; }

ul.lst-kix_igutqwst0xn-7 { list-style-type: none; }

ul.lst-kix_igutqwst0xn-8 { list-style-type: none; }

.lst-kix_dcv7ib5lvp4v-3 > li { counter-increment: lst-ctn-kix_dcv7ib5lvp4v-3 1; }

.lst-kix_m3mg1m14r0ox-7 > li::before { content: "" counter(lst-ctn-kix_m3mg1m14r0ox-7, lower-latin) ". "; }

.lst-kix_bseh3kjlzqme-3 > li { counter-increment: lst-ctn-kix_bseh3kjlzqme-3 1; }

ul.lst-kix_igutqwst0xn-1 { list-style-type: none; }

.lst-kix_m3mg1m14r0ox-5 > li::before { content: "" counter(lst-ctn-kix_m3mg1m14r0ox-5, lower-roman) ". "; }

ul.lst-kix_igutqwst0xn-2 { list-style-type: none; }

ul.lst-kix_igutqwst0xn-0 { list-style-type: none; }

ul.lst-kix_igutqwst0xn-5 { list-style-type: none; }

ul.lst-kix_igutqwst0xn-6 { list-style-type: none; }

.lst-kix_xc5d5ew3cd2w-1 > li { counter-increment: lst-ctn-kix_xc5d5ew3cd2w-1 1; }

ul.lst-kix_igutqwst0xn-3 { list-style-type: none; }

.lst-kix_uqyylbhn1m4k-8 > li { counter-increment: lst-ctn-kix_uqyylbhn1m4k-8 1; }

.lst-kix_c1i5n6q7z3d-5 > li::before { content: "■  "; }

ul.lst-kix_igutqwst0xn-4 { list-style-type: none; }

ol.lst-kix_t1ql394g7cq6-4.start { counter-reset: lst-ctn-kix_t1ql394g7cq6-4 0; }

.lst-kix_gpfkle35f9g6-7 > li { counter-increment: lst-ctn-kix_gpfkle35f9g6-7 1; }

.lst-kix_c1i5n6q7z3d-7 > li::before { content: "○  "; }

ol.lst-kix_yt60ymksdnh5-0.start { counter-reset: lst-ctn-kix_yt60ymksdnh5-0 0; }

ol.lst-kix_m7gyp3gged0c-8.start { counter-reset: lst-ctn-kix_m7gyp3gged0c-8 0; }

ol.lst-kix_ey0jmq1tgbhn-0.start { counter-reset: lst-ctn-kix_ey0jmq1tgbhn-0 0; }

.lst-kix_gzdu38n4pxir-1 > li::before { content: "" counter(lst-ctn-kix_gzdu38n4pxir-1, lower-latin) ". "; }

.lst-kix_tj22yequgne3-1 > li::before { content: "" counter(lst-ctn-kix_tj22yequgne3-1, lower-latin) ". "; }

.lst-kix_tj22yequgne3-7 > li::before { content: "" counter(lst-ctn-kix_tj22yequgne3-7, lower-latin) ". "; }

ol.lst-kix_n1ny3uif9c2q-6.start { counter-reset: lst-ctn-kix_n1ny3uif9c2q-6 0; }

.lst-kix_gzdu38n4pxir-3 > li::before { content: "" counter(lst-ctn-kix_gzdu38n4pxir-3) ". "; }

ol.lst-kix_uqyylbhn1m4k-5.start { counter-reset: lst-ctn-kix_uqyylbhn1m4k-5 0; }

.lst-kix_m3mg1m14r0ox-0 > li { counter-increment: lst-ctn-kix_m3mg1m14r0ox-0 1; }

.lst-kix_pmwlevr2di06-3 > li::before { content: "●  "; }

.lst-kix_pmwlevr2di06-5 > li::before { content: "■  "; }

.lst-kix_ruhin6837alc-3 > li::before { content: "" counter(lst-ctn-kix_ruhin6837alc-3) ". "; }

.lst-kix_ekvfn9dhk9qx-3 > li::before { content: "●  "; }

.lst-kix_olegludlmu4-8 > li::before { content: "■  "; }

.lst-kix_ruhin6837alc-1 > li::before { content: "" counter(lst-ctn-kix_ruhin6837alc-1, lower-latin) ". "; }

.lst-kix_3ndwxni7n3wv-3 > li { counter-increment: lst-ctn-kix_3ndwxni7n3wv-3 1; }

.lst-kix_olegludlmu4-6 > li::before { content: "●  "; }

.lst-kix_fcu0owu0u5lm-1 > li { counter-increment: lst-ctn-kix_fcu0owu0u5lm-1 1; }

ol.lst-kix_t1ql394g7cq6-6.start { counter-reset: lst-ctn-kix_t1ql394g7cq6-6 0; }

ol.lst-kix_bseh3kjlzqme-5.start { counter-reset: lst-ctn-kix_bseh3kjlzqme-5 0; }

.lst-kix_q3b8r3xg1qkx-7 > li::before { content: "" counter(lst-ctn-kix_q3b8r3xg1qkx-7, lower-latin) ". "; }

ol.lst-kix_ey0jmq1tgbhn-3.start { counter-reset: lst-ctn-kix_ey0jmq1tgbhn-3 0; }

ol.lst-kix_l80e6xnoww9k-6.start { counter-reset: lst-ctn-kix_l80e6xnoww9k-6 0; }

.lst-kix_m7gyp3gged0c-5 > li { counter-increment: lst-ctn-kix_m7gyp3gged0c-5 1; }

ol.lst-kix_xrj1sdkp3cni-0 { list-style-type: none; }

ol.lst-kix_xrj1sdkp3cni-2 { list-style-type: none; }

ol.lst-kix_xrj1sdkp3cni-1 { list-style-type: none; }

.lst-kix_ekvfn9dhk9qx-5 > li::before { content: "■  "; }

.lst-kix_q3b8r3xg1qkx-5 > li::before { content: "" counter(lst-ctn-kix_q3b8r3xg1qkx-5, lower-roman) ". "; }

ol.lst-kix_xrj1sdkp3cni-4 { list-style-type: none; }

ol.lst-kix_xrj1sdkp3cni-3 { list-style-type: none; }

ol.lst-kix_xrj1sdkp3cni-6 { list-style-type: none; }

.lst-kix_9r3d8uancgeq-3 > li::before { content: "●  "; }

.lst-kix_15r02pw2hvsa-6 > li::before { content: "●  "; }

ol.lst-kix_xrj1sdkp3cni-5 { list-style-type: none; }

ol.lst-kix_ey0jmq1tgbhn-0 { list-style-type: none; }

ol.lst-kix_xrj1sdkp3cni-8 { list-style-type: none; }

ol.lst-kix_xrj1sdkp3cni-7 { list-style-type: none; }

.lst-kix_n1ny3uif9c2q-1 > li { counter-increment: lst-ctn-kix_n1ny3uif9c2q-1 1; }

.lst-kix_9r3d8uancgeq-5 > li::before { content: "■  "; }

ol.lst-kix_n1ny3uif9c2q-8.start { counter-reset: lst-ctn-kix_n1ny3uif9c2q-8 0; }

ol.lst-kix_uqyylbhn1m4k-7.start { counter-reset: lst-ctn-kix_uqyylbhn1m4k-7 0; }

.lst-kix_8e86lum2i6eo-4 > li::before { content: "○  "; }

ol.lst-kix_gpfkle35f9g6-1.start { counter-reset: lst-ctn-kix_gpfkle35f9g6-1 0; }

.lst-kix_15r02pw2hvsa-4 > li::before { content: "○  "; }

.lst-kix_t1ql394g7cq6-0 > li { counter-increment: lst-ctn-kix_t1ql394g7cq6-0 1; }

.lst-kix_uqyylbhn1m4k-1 > li { counter-increment: lst-ctn-kix_uqyylbhn1m4k-1 1; }

.lst-kix_8e86lum2i6eo-6 > li::before { content: "●  "; }

.lst-kix_olegludlmu4-0 > li::before { content: "●  "; }

.lst-kix_j5huq76pqetk-3 > li { counter-increment: lst-ctn-kix_j5huq76pqetk-3 1; }

.lst-kix_5270cv8i6nuv-2 > li { counter-increment: lst-ctn-kix_5270cv8i6nuv-2 1; }

.lst-kix_sq2mty8y4cla-6 > li::before { content: "" counter(lst-ctn-kix_sq2mty8y4cla-6) ". "; }

ol.lst-kix_ey0jmq1tgbhn-6 { list-style-type: none; }

ol.lst-kix_ey0jmq1tgbhn-5 { list-style-type: none; }

ol.lst-kix_ey0jmq1tgbhn-8 { list-style-type: none; }

ol.lst-kix_ey0jmq1tgbhn-7 { list-style-type: none; }

.lst-kix_sq2mty8y4cla-8 > li::before { content: "" counter(lst-ctn-kix_sq2mty8y4cla-8, lower-roman) ". "; }

ol.lst-kix_ey0jmq1tgbhn-2 { list-style-type: none; }

ol.lst-kix_ey0jmq1tgbhn-1 { list-style-type: none; }

.lst-kix_m3mg1m14r0ox-7 > li { counter-increment: lst-ctn-kix_m3mg1m14r0ox-7 1; }

ol.lst-kix_ey0jmq1tgbhn-4 { list-style-type: none; }

ol.lst-kix_ey0jmq1tgbhn-3 { list-style-type: none; }

ul.lst-kix_620io0vozd8n-5 { list-style-type: none; }

ul.lst-kix_620io0vozd8n-4 { list-style-type: none; }

ol.lst-kix_ruhin6837alc-3.start { counter-reset: lst-ctn-kix_ruhin6837alc-3 0; }

.lst-kix_q9wm09yqvpbs-6 > li::before { content: "" counter(lst-ctn-kix_q9wm09yqvpbs-6) ". "; }

ul.lst-kix_620io0vozd8n-3 { list-style-type: none; }

ul.lst-kix_620io0vozd8n-2 { list-style-type: none; }

ul.lst-kix_620io0vozd8n-8 { list-style-type: none; }

.lst-kix_3ndwxni7n3wv-8 > li::before { content: "" counter(lst-ctn-kix_3ndwxni7n3wv-8, lower-roman) ". "; }

.lst-kix_t1ql394g7cq6-7 > li { counter-increment: lst-ctn-kix_t1ql394g7cq6-7 1; }

ul.lst-kix_620io0vozd8n-7 { list-style-type: none; }

ul.lst-kix_620io0vozd8n-6 { list-style-type: none; }

.lst-kix_xrj1sdkp3cni-3 > li::before { content: "" counter(lst-ctn-kix_xrj1sdkp3cni-3) ". "; }

ol.lst-kix_m7gyp3gged0c-6.start { counter-reset: lst-ctn-kix_m7gyp3gged0c-6 0; }

.lst-kix_5s16jregg8d-1 > li::before { content: "○  "; }

.lst-kix_xqezlaka82l9-0 > li { counter-increment: lst-ctn-kix_xqezlaka82l9-0 1; }

.lst-kix_lcuwlsa6z8uz-5 > li::before { content: "" counter(lst-ctn-kix_lcuwlsa6z8uz-5, lower-roman) ". "; }

.lst-kix_ckxnb6vf7vme-5 > li::before { content: "" counter(lst-ctn-kix_ckxnb6vf7vme-5, lower-roman) ". "; }

.lst-kix_sq2mty8y4cla-0 > li::before { content: "" counter(lst-ctn-kix_sq2mty8y4cla-0) ". "; }

.lst-kix_ey0jmq1tgbhn-4 > li::before { content: "" counter(lst-ctn-kix_ey0jmq1tgbhn-4, lower-latin) ". "; }

ul.lst-kix_620io0vozd8n-1 { list-style-type: none; }

ul.lst-kix_620io0vozd8n-0 { list-style-type: none; }

.lst-kix_gpfkle35f9g6-0 > li { counter-increment: lst-ctn-kix_gpfkle35f9g6-0 1; }

.lst-kix_o0kdhzzdksr6-0 > li::before { content: "●  "; }

.lst-kix_pwbhslrd67om-7 > li::before { content: "" counter(lst-ctn-kix_pwbhslrd67om-7, lower-latin) ". "; }

.lst-kix_l80e6xnoww9k-2 > li { counter-increment: lst-ctn-kix_l80e6xnoww9k-2 1; }

.lst-kix_j5huq76pqetk-3 > li::before { content: "" counter(lst-ctn-kix_j5huq76pqetk-3) ". "; }

.lst-kix_5namkmhqnfpl-4 > li::before { content: "○  "; }

.lst-kix_85dwzw7kxv5h-0 > li { counter-increment: lst-ctn-kix_85dwzw7kxv5h-0 1; }

ol.lst-kix_3ho157wy3jxf-4.start { counter-reset: lst-ctn-kix_3ho157wy3jxf-4 0; }

.lst-kix_3ndwxni7n3wv-0 > li::before { content: "" counter(lst-ctn-kix_3ndwxni7n3wv-0) ". "; }

.lst-kix_w4jnjjd4slk1-5 > li { counter-increment: lst-ctn-kix_w4jnjjd4slk1-5 1; }

.lst-kix_vwmkmidzq0q1-1 > li::before { content: "" counter(lst-ctn-kix_vwmkmidzq0q1-1, lower-latin) ". "; }

ol.lst-kix_ruhin6837alc-8.start { counter-reset: lst-ctn-kix_ruhin6837alc-8 0; }

.lst-kix_dcv7ib5lvp4v-6 > li { counter-increment: lst-ctn-kix_dcv7ib5lvp4v-6 1; }

ol.lst-kix_ljmndakz6mcr-3.start { counter-reset: lst-ctn-kix_ljmndakz6mcr-3 0; }

ol.lst-kix_w9tqx4187f4c-3.start { counter-reset: lst-ctn-kix_w9tqx4187f4c-3 0; }

.lst-kix_s9tg2x8dz8yw-4 > li { counter-increment: lst-ctn-kix_s9tg2x8dz8yw-4 1; }

.lst-kix_10q7n546cbqj-7 > li::before { content: "" counter(lst-ctn-kix_10q7n546cbqj-7, lower-latin) ". "; }

.lst-kix_w9tqx4187f4c-0 > li { counter-increment: lst-ctn-kix_w9tqx4187f4c-0 1; }

.lst-kix_3mskaxtv1nar-7 > li::before { content: "○  "; }

.lst-kix_re52shiykht8-8 > li::before { content: "■  "; }

.lst-kix_oiuz0iy372u2-0 > li::before { content: "" counter(lst-ctn-kix_oiuz0iy372u2-0) ". "; }

.lst-kix_w9tqx4187f4c-4 > li::before { content: "" counter(lst-ctn-kix_w9tqx4187f4c-4, lower-latin) ". "; }

.lst-kix_brzd8bm9vgv1-2 > li::before { content: "■  "; }

ol.lst-kix_bseh3kjlzqme-0 { list-style-type: none; }

ol.lst-kix_bseh3kjlzqme-1 { list-style-type: none; }

.lst-kix_yt60ymksdnh5-7 > li::before { content: "" counter(lst-ctn-kix_yt60ymksdnh5-7, lower-latin) ". "; }

.lst-kix_r9g9j9mj19b1-0 > li::before { content: "●  "; }

ol.lst-kix_nqdkqsc3oqx4-1.start { counter-reset: lst-ctn-kix_nqdkqsc3oqx4-1 0; }

ol.lst-kix_bseh3kjlzqme-6 { list-style-type: none; }

ol.lst-kix_bseh3kjlzqme-7 { list-style-type: none; }

.lst-kix_3yaj3fyh3cgu-2 > li::before { content: "■  "; }

ol.lst-kix_bseh3kjlzqme-8 { list-style-type: none; }

ol.lst-kix_bseh3kjlzqme-2 { list-style-type: none; }

ol.lst-kix_bseh3kjlzqme-3 { list-style-type: none; }

.lst-kix_ksgcgd9whg8s-4 > li::before { content: "" counter(lst-ctn-kix_ksgcgd9whg8s-4, lower-latin) ". "; }

ol.lst-kix_bseh3kjlzqme-4 { list-style-type: none; }

.lst-kix_re52shiykht8-0 > li::before { content: "●  "; }

ol.lst-kix_bseh3kjlzqme-5 { list-style-type: none; }

.lst-kix_xqezlaka82l9-2 > li::before { content: "" counter(lst-ctn-kix_xqezlaka82l9-2, lower-roman) ". "; }

.lst-kix_85dwzw7kxv5h-4 > li::before { content: "" counter(lst-ctn-kix_85dwzw7kxv5h-4, lower-latin) ". "; }

.lst-kix_kb150t1bns3n-6 > li::before { content: "●  "; }

ol.lst-kix_xc5d5ew3cd2w-0 { list-style-type: none; }

ol.lst-kix_3ho157wy3jxf-0.start { counter-reset: lst-ctn-kix_3ho157wy3jxf-0 0; }

ol.lst-kix_xc5d5ew3cd2w-1 { list-style-type: none; }

ol.lst-kix_ljmndakz6mcr-1.start { counter-reset: lst-ctn-kix_ljmndakz6mcr-1 0; }

ol.lst-kix_xc5d5ew3cd2w-2 { list-style-type: none; }

.lst-kix_572earllcbds-5 > li { counter-increment: lst-ctn-kix_572earllcbds-5 1; }

.lst-kix_or4x01rk566h-5 > li::before { content: "■  "; }

.lst-kix_okhvdbx9vxjx-8 > li::before { content: "" counter(lst-ctn-kix_okhvdbx9vxjx-8, lower-roman) ". "; }

ol.lst-kix_xc5d5ew3cd2w-7 { list-style-type: none; }

ul.lst-kix_pmwlevr2di06-1 { list-style-type: none; }

ol.lst-kix_xc5d5ew3cd2w-8 { list-style-type: none; }

ul.lst-kix_pmwlevr2di06-2 { list-style-type: none; }

.lst-kix_vwmkmidzq0q1-4 > li { counter-increment: lst-ctn-kix_vwmkmidzq0q1-4 1; }

ul.lst-kix_pmwlevr2di06-0 { list-style-type: none; }

.lst-kix_ljmndakz6mcr-1 > li::before { content: "" counter(lst-ctn-kix_ljmndakz6mcr-1, lower-latin) ". "; }

.lst-kix_fcu0owu0u5lm-4 > li { counter-increment: lst-ctn-kix_fcu0owu0u5lm-4 1; }

ol.lst-kix_xc5d5ew3cd2w-3 { list-style-type: none; }

ol.lst-kix_xc5d5ew3cd2w-4 { list-style-type: none; }

ol.lst-kix_xc5d5ew3cd2w-5 { list-style-type: none; }

ol.lst-kix_xc5d5ew3cd2w-6 { list-style-type: none; }

ul.lst-kix_pmwlevr2di06-7 { list-style-type: none; }

.lst-kix_sq2mty8y4cla-8 > li { counter-increment: lst-ctn-kix_sq2mty8y4cla-8 1; }

ul.lst-kix_pmwlevr2di06-8 { list-style-type: none; }

ul.lst-kix_pmwlevr2di06-5 { list-style-type: none; }

.lst-kix_r9g9j9mj19b1-8 > li::before { content: "■  "; }

ul.lst-kix_pmwlevr2di06-6 { list-style-type: none; }

ol.lst-kix_l80e6xnoww9k-1.start { counter-reset: lst-ctn-kix_l80e6xnoww9k-1 0; }

ul.lst-kix_pmwlevr2di06-3 { list-style-type: none; }

ul.lst-kix_pmwlevr2di06-4 { list-style-type: none; }

.lst-kix_4uq1mr5t1xn5-1 > li { counter-increment: lst-ctn-kix_4uq1mr5t1xn5-1 1; }

.lst-kix_s9tg2x8dz8yw-5 > li::before { content: "" counter(lst-ctn-kix_s9tg2x8dz8yw-5, lower-roman) ". "; }

.lst-kix_5270cv8i6nuv-6 > li { counter-increment: lst-ctn-kix_5270cv8i6nuv-6 1; }

.lst-kix_nqdkqsc3oqx4-4 > li::before { content: "" counter(lst-ctn-kix_nqdkqsc3oqx4-4, lower-latin) ". "; }

.lst-kix_m4p7szoqaqik-8 > li::before { content: "■  "; }

.lst-kix_ruhin6837alc-5 > li { counter-increment: lst-ctn-kix_ruhin6837alc-5 1; }

ul.lst-kix_utdw00xskxog-8 { list-style-type: none; }

ul.lst-kix_utdw00xskxog-7 { list-style-type: none; }

.lst-kix_okhvdbx9vxjx-0 > li::before { content: "" counter(lst-ctn-kix_okhvdbx9vxjx-0) ". "; }

.lst-kix_fcu0owu0u5lm-2 > li::before { content: "" counter(lst-ctn-kix_fcu0owu0u5lm-2, lower-roman) ". "; }

ul.lst-kix_utdw00xskxog-0 { list-style-type: none; }

ul.lst-kix_utdw00xskxog-2 { list-style-type: none; }

ul.lst-kix_utdw00xskxog-1 { list-style-type: none; }

.lst-kix_oiuz0iy372u2-6 > li { counter-increment: lst-ctn-kix_oiuz0iy372u2-6 1; }

ul.lst-kix_utdw00xskxog-4 { list-style-type: none; }

ul.lst-kix_utdw00xskxog-3 { list-style-type: none; }

ul.lst-kix_utdw00xskxog-6 { list-style-type: none; }

ul.lst-kix_utdw00xskxog-5 { list-style-type: none; }

.lst-kix_igutqwst0xn-1 > li::before { content: "○  "; }

.lst-kix_oiuz0iy372u2-8 > li::before { content: "" counter(lst-ctn-kix_oiuz0iy372u2-8, lower-roman) ". "; }

.lst-kix_c7313u9pplkk-8 > li::before { content: "" counter(lst-ctn-kix_c7313u9pplkk-8, lower-roman) ". "; }

.lst-kix_ckxnb6vf7vme-0 > li { counter-increment: lst-ctn-kix_ckxnb6vf7vme-0 1; }

.lst-kix_o0kdhzzdksr6-8 > li::before { content: "■  "; }

.lst-kix_q26h1rehak49-8 > li::before { content: "■  "; }

ol.lst-kix_fcu0owu0u5lm-4.start { counter-reset: lst-ctn-kix_fcu0owu0u5lm-4 0; }

.lst-kix_n1ny3uif9c2q-4 > li::before { content: "" counter(lst-ctn-kix_n1ny3uif9c2q-4, lower-latin) ". "; }

.lst-kix_xc5d5ew3cd2w-4 > li { counter-increment: lst-ctn-kix_xc5d5ew3cd2w-4 1; }

.lst-kix_w9tqx4187f4c-7 > li { counter-increment: lst-ctn-kix_w9tqx4187f4c-7 1; }

.lst-kix_c7313u9pplkk-0 > li::before { content: "" counter(lst-ctn-kix_c7313u9pplkk-0) ". "; }

ol.lst-kix_ruhin6837alc-4.start { counter-reset: lst-ctn-kix_ruhin6837alc-4 0; }

.lst-kix_l80e6xnoww9k-7 > li::before { content: "" counter(lst-ctn-kix_l80e6xnoww9k-7, lower-latin) ". "; }

.lst-kix_tj22yequgne3-0 > li { counter-increment: lst-ctn-kix_tj22yequgne3-0 1; }

.lst-kix_sq2mty8y4cla-1 > li { counter-increment: lst-ctn-kix_sq2mty8y4cla-1 1; }

ul.lst-kix_o0kdhzzdksr6-2 { list-style-type: none; }

ul.lst-kix_o0kdhzzdksr6-1 { list-style-type: none; }

ul.lst-kix_o0kdhzzdksr6-0 { list-style-type: none; }

ul.lst-kix_o0kdhzzdksr6-6 { list-style-type: none; }

ol.lst-kix_w9tqx4187f4c-0.start { counter-reset: lst-ctn-kix_w9tqx4187f4c-0 0; }

ul.lst-kix_o0kdhzzdksr6-5 { list-style-type: none; }

ul.lst-kix_o0kdhzzdksr6-4 { list-style-type: none; }

ul.lst-kix_o0kdhzzdksr6-3 { list-style-type: none; }

.lst-kix_q26h1rehak49-0 > li::before { content: "●  "; }

ol.lst-kix_m7gyp3gged0c-1.start { counter-reset: lst-ctn-kix_m7gyp3gged0c-1 0; }

.lst-kix_3ho157wy3jxf-2 > li::before { content: "" counter(lst-ctn-kix_3ho157wy3jxf-2, lower-roman) ". "; }

ul.lst-kix_o0kdhzzdksr6-8 { list-style-type: none; }

ul.lst-kix_o0kdhzzdksr6-7 { list-style-type: none; }

ol.lst-kix_85dwzw7kxv5h-8 { list-style-type: none; }

ol.lst-kix_85dwzw7kxv5h-7 { list-style-type: none; }

.lst-kix_4uq1mr5t1xn5-8 > li { counter-increment: lst-ctn-kix_4uq1mr5t1xn5-8 1; }

ol.lst-kix_85dwzw7kxv5h-6 { list-style-type: none; }

ol.lst-kix_85dwzw7kxv5h-5 { list-style-type: none; }

ol.lst-kix_85dwzw7kxv5h-4 { list-style-type: none; }

ol.lst-kix_85dwzw7kxv5h-3 { list-style-type: none; }

ol.lst-kix_85dwzw7kxv5h-2 { list-style-type: none; }

ol.lst-kix_85dwzw7kxv5h-1 { list-style-type: none; }

ol.lst-kix_85dwzw7kxv5h-0 { list-style-type: none; }

.lst-kix_bvmitnb5swh8-4 > li { counter-increment: lst-ctn-kix_bvmitnb5swh8-4 1; }

.lst-kix_n1ny3uif9c2q-4 > li { counter-increment: lst-ctn-kix_n1ny3uif9c2q-4 1; }

.lst-kix_m3mg1m14r0ox-4 > li { counter-increment: lst-ctn-kix_m3mg1m14r0ox-4 1; }

.lst-kix_10q7n546cbqj-2 > li { counter-increment: lst-ctn-kix_10q7n546cbqj-2 1; }

.lst-kix_habx6bj0olf7-4 > li::before { content: "" counter(lst-ctn-kix_habx6bj0olf7-4, lower-latin) ". "; }

.lst-kix_habx6bj0olf7-1 > li { counter-increment: lst-ctn-kix_habx6bj0olf7-1 1; }

.lst-kix_ruhin6837alc-1 > li { counter-increment: lst-ctn-kix_ruhin6837alc-1 1; }

.lst-kix_bvmitnb5swh8-0 > li { counter-increment: lst-ctn-kix_bvmitnb5swh8-0 1; }

ol.lst-kix_5270cv8i6nuv-5.start { counter-reset: lst-ctn-kix_5270cv8i6nuv-5 0; }

ul.lst-kix_kb150t1bns3n-4 { list-style-type: none; }

.lst-kix_j5huq76pqetk-1 > li { counter-increment: lst-ctn-kix_j5huq76pqetk-1 1; }

ul.lst-kix_kb150t1bns3n-3 { list-style-type: none; }

ul.lst-kix_kb150t1bns3n-2 { list-style-type: none; }

ul.lst-kix_kb150t1bns3n-1 { list-style-type: none; }

ul.lst-kix_kb150t1bns3n-8 { list-style-type: none; }

ul.lst-kix_kb150t1bns3n-7 { list-style-type: none; }

ul.lst-kix_kb150t1bns3n-6 { list-style-type: none; }

ul.lst-kix_kb150t1bns3n-5 { list-style-type: none; }

ul.lst-kix_kb150t1bns3n-0 { list-style-type: none; }

.lst-kix_mnp305eqj1wg-4 > li { counter-increment: lst-ctn-kix_mnp305eqj1wg-4 1; }

.lst-kix_u8xk64vks6c8-1 > li::before { content: "○  "; }

.lst-kix_o2mt2qmw9cun-2 > li::before { content: "■  "; }

.lst-kix_u8xk64vks6c8-2 > li::before { content: "■  "; }

ol.lst-kix_b4yhtr5n7hga-4.start { counter-reset: lst-ctn-kix_b4yhtr5n7hga-4 0; }

.lst-kix_w4jnjjd4slk1-5 > li::before { content: "" counter(lst-ctn-kix_w4jnjjd4slk1-5, lower-roman) ". "; }

.lst-kix_o2mt2qmw9cun-8 > li::before { content: "■  "; }

.lst-kix_l80e6xnoww9k-5 > li { counter-increment: lst-ctn-kix_l80e6xnoww9k-5 1; }

.lst-kix_o2mt2qmw9cun-6 > li::before { content: "●  "; }

ol.lst-kix_85dwzw7kxv5h-2.start { counter-reset: lst-ctn-kix_85dwzw7kxv5h-2 0; }

.lst-kix_yt60ymksdnh5-0 > li { counter-increment: lst-ctn-kix_yt60ymksdnh5-0 1; }

.lst-kix_w4jnjjd4slk1-8 > li::before { content: "" counter(lst-ctn-kix_w4jnjjd4slk1-8, lower-roman) ". "; }

.lst-kix_o2mt2qmw9cun-3 > li::before { content: "●  "; }

.lst-kix_pwbhslrd67om-3 > li { counter-increment: lst-ctn-kix_pwbhslrd67om-3 1; }

.lst-kix_o2mt2qmw9cun-5 > li::before { content: "■  "; }

ol.lst-kix_3ndwxni7n3wv-4.start { counter-reset: lst-ctn-kix_3ndwxni7n3wv-4 0; }

.lst-kix_5270cv8i6nuv-7 > li { counter-increment: lst-ctn-kix_5270cv8i6nuv-7 1; }

ol.lst-kix_m7gyp3gged0c-4.start { counter-reset: lst-ctn-kix_m7gyp3gged0c-4 0; }

ol.lst-kix_w4jnjjd4slk1-7.start { counter-reset: lst-ctn-kix_w4jnjjd4slk1-7 0; }

ol.lst-kix_5270cv8i6nuv-0.start { counter-reset: lst-ctn-kix_5270cv8i6nuv-0 0; }

.lst-kix_nqdkqsc3oqx4-3 > li { counter-increment: lst-ctn-kix_nqdkqsc3oqx4-3 1; }

ul.lst-kix_55mhn1ecd8zq-1 { list-style-type: none; }

ul.lst-kix_55mhn1ecd8zq-0 { list-style-type: none; }

ul.lst-kix_55mhn1ecd8zq-3 { list-style-type: none; }

ul.lst-kix_55mhn1ecd8zq-2 { list-style-type: none; }

.lst-kix_olo1v9h26sum-8 > li::before { content: "■  "; }

ul.lst-kix_55mhn1ecd8zq-5 { list-style-type: none; }

ul.lst-kix_55mhn1ecd8zq-4 { list-style-type: none; }

ul.lst-kix_55mhn1ecd8zq-7 { list-style-type: none; }

ul.lst-kix_55mhn1ecd8zq-6 { list-style-type: none; }

.lst-kix_w4jnjjd4slk1-2 > li::before { content: "" counter(lst-ctn-kix_w4jnjjd4slk1-2, lower-roman) ". "; }

ul.lst-kix_55mhn1ecd8zq-8 { list-style-type: none; }

.lst-kix_oiuz0iy372u2-4 > li { counter-increment: lst-ctn-kix_oiuz0iy372u2-4 1; }

.lst-kix_m7gyp3gged0c-4 > li { counter-increment: lst-ctn-kix_m7gyp3gged0c-4 1; }

.lst-kix_e6809g41048l-2 > li::before { content: "■  "; }

.lst-kix_85dwzw7kxv5h-7 > li { counter-increment: lst-ctn-kix_85dwzw7kxv5h-7 1; }

ol.lst-kix_ljmndakz6mcr-4.start { counter-reset: lst-ctn-kix_ljmndakz6mcr-4 0; }

.lst-kix_sq2mty8y4cla-5 > li { counter-increment: lst-ctn-kix_sq2mty8y4cla-5 1; }

ol.lst-kix_85dwzw7kxv5h-7.start { counter-reset: lst-ctn-kix_85dwzw7kxv5h-7 0; }

ol.lst-kix_okhvdbx9vxjx-1.start { counter-reset: lst-ctn-kix_okhvdbx9vxjx-1 0; }

ol.lst-kix_w4jnjjd4slk1-2.start { counter-reset: lst-ctn-kix_w4jnjjd4slk1-2 0; }

.lst-kix_w9tqx4187f4c-3 > li { counter-increment: lst-ctn-kix_w9tqx4187f4c-3 1; }

ol.lst-kix_w4jnjjd4slk1-0 { list-style-type: none; }

ol.lst-kix_w4jnjjd4slk1-1 { list-style-type: none; }

ol.lst-kix_w4jnjjd4slk1-2 { list-style-type: none; }

.lst-kix_utdw00xskxog-3 > li::before { content: "●  "; }

ol.lst-kix_w4jnjjd4slk1-3 { list-style-type: none; }

ol.lst-kix_w4jnjjd4slk1-4 { list-style-type: none; }

ol.lst-kix_dcv7ib5lvp4v-5.start { counter-reset: lst-ctn-kix_dcv7ib5lvp4v-5 0; }

ol.lst-kix_w4jnjjd4slk1-5 { list-style-type: none; }

ol.lst-kix_w4jnjjd4slk1-6 { list-style-type: none; }

ol.lst-kix_w4jnjjd4slk1-7 { list-style-type: none; }

ol.lst-kix_w4jnjjd4slk1-8 { list-style-type: none; }

.lst-kix_utdw00xskxog-5 > li::before { content: "■  "; }

.lst-kix_5270cv8i6nuv-6 > li::before { content: "" counter(lst-ctn-kix_5270cv8i6nuv-6) ". "; }

.lst-kix_tj22yequgne3-3 > li { counter-increment: lst-ctn-kix_tj22yequgne3-3 1; }

.lst-kix_xqezlaka82l9-6 > li { counter-increment: lst-ctn-kix_xqezlaka82l9-6 1; }

ol.lst-kix_fcu0owu0u5lm-6 { list-style-type: none; }

.lst-kix_s9tg2x8dz8yw-0 > li { counter-increment: lst-ctn-kix_s9tg2x8dz8yw-0 1; }

ol.lst-kix_fcu0owu0u5lm-5 { list-style-type: none; }

.lst-kix_nkn9z5o9q292-5 > li::before { content: "■  "; }

ol.lst-kix_fcu0owu0u5lm-4 { list-style-type: none; }

ol.lst-kix_fcu0owu0u5lm-3 { list-style-type: none; }

ol.lst-kix_bseh3kjlzqme-2.start { counter-reset: lst-ctn-kix_bseh3kjlzqme-2 0; }

ol.lst-kix_fcu0owu0u5lm-8 { list-style-type: none; }

.lst-kix_sfybiz7pn3rx-7 > li::before { content: "○  "; }

.lst-kix_nqdkqsc3oqx4-5 > li::before { content: "" counter(lst-ctn-kix_nqdkqsc3oqx4-5, lower-roman) ". "; }

ol.lst-kix_fcu0owu0u5lm-7 { list-style-type: none; }

ol.lst-kix_t1ql394g7cq6-7.start { counter-reset: lst-ctn-kix_t1ql394g7cq6-7 0; }

.lst-kix_69cgk215qz5l-2 > li::before { content: "■  "; }

.lst-kix_nkn9z5o9q292-1 > li::before { content: "○  "; }

ol.lst-kix_fcu0owu0u5lm-2 { list-style-type: none; }

.lst-kix_xqezlaka82l9-7 > li { counter-increment: lst-ctn-kix_xqezlaka82l9-7 1; }

.lst-kix_ksgcgd9whg8s-3 > li { counter-increment: lst-ctn-kix_ksgcgd9whg8s-3 1; }

ol.lst-kix_fcu0owu0u5lm-1 { list-style-type: none; }

.lst-kix_olo1v9h26sum-6 > li::before { content: "●  "; }

.lst-kix_tj22yequgne3-4 > li { counter-increment: lst-ctn-kix_tj22yequgne3-4 1; }

ol.lst-kix_fcu0owu0u5lm-0 { list-style-type: none; }

.lst-kix_e6809g41048l-8 > li::before { content: "■  "; }

.lst-kix_sfybiz7pn3rx-5 > li::before { content: "■  "; }

.lst-kix_69cgk215qz5l-8 > li::before { content: "■  "; }

ul.lst-kix_f9adxqm8wtcr-0 { list-style-type: none; }

ul.lst-kix_f9adxqm8wtcr-2 { list-style-type: none; }

ol.lst-kix_s9tg2x8dz8yw-0.start { counter-reset: lst-ctn-kix_s9tg2x8dz8yw-0 0; }

ul.lst-kix_f9adxqm8wtcr-1 { list-style-type: none; }

.lst-kix_gn9iznjyvy0-6 > li { counter-increment: lst-ctn-kix_gn9iznjyvy0-6 1; }

ul.lst-kix_f9adxqm8wtcr-4 { list-style-type: none; }

.lst-kix_bseh3kjlzqme-2 > li { counter-increment: lst-ctn-kix_bseh3kjlzqme-2 1; }

ul.lst-kix_f9adxqm8wtcr-3 { list-style-type: none; }

ol.lst-kix_okhvdbx9vxjx-6.start { counter-reset: lst-ctn-kix_okhvdbx9vxjx-6 0; }

ul.lst-kix_f9adxqm8wtcr-6 { list-style-type: none; }

ul.lst-kix_f9adxqm8wtcr-5 { list-style-type: none; }

.lst-kix_5270cv8i6nuv-0 > li::before { content: "" counter(lst-ctn-kix_5270cv8i6nuv-0) ". "; }

ul.lst-kix_f9adxqm8wtcr-8 { list-style-type: none; }

.lst-kix_olo1v9h26sum-2 > li::before { content: "■  "; }

ul.lst-kix_f9adxqm8wtcr-7 { list-style-type: none; }

ol.lst-kix_uqyylbhn1m4k-8.start { counter-reset: lst-ctn-kix_uqyylbhn1m4k-8 0; }

.lst-kix_vwmkmidzq0q1-3 > li::before { content: "" counter(lst-ctn-kix_vwmkmidzq0q1-3) ". "; }

.lst-kix_oiuz0iy372u2-7 > li::before { content: "" counter(lst-ctn-kix_oiuz0iy372u2-7, lower-latin) ". "; }

.lst-kix_vwmkmidzq0q1-1 > li { counter-increment: lst-ctn-kix_vwmkmidzq0q1-1 1; }

.lst-kix_vwmkmidzq0q1-7 > li::before { content: "" counter(lst-ctn-kix_vwmkmidzq0q1-7, lower-latin) ". "; }

ol.lst-kix_habx6bj0olf7-8.start { counter-reset: lst-ctn-kix_habx6bj0olf7-8 0; }

.lst-kix_55mhn1ecd8zq-4 > li::before { content: "○  "; }

.lst-kix_vwmkmidzq0q1-0 > li { counter-increment: lst-ctn-kix_vwmkmidzq0q1-0 1; }

ol.lst-kix_4uq1mr5t1xn5-4.start { counter-reset: lst-ctn-kix_4uq1mr5t1xn5-4 0; }

.lst-kix_c7313u9pplkk-3 > li::before { content: "" counter(lst-ctn-kix_c7313u9pplkk-3) ". "; }

.lst-kix_c7313u9pplkk-5 > li::before { content: "" counter(lst-ctn-kix_c7313u9pplkk-5, lower-roman) ". "; }

.lst-kix_u8xk64vks6c8-5 > li::before { content: "■  "; }

.lst-kix_nqdkqsc3oqx4-1 > li::before { content: "" counter(lst-ctn-kix_nqdkqsc3oqx4-1, lower-latin) ". "; }

ol.lst-kix_gpfkle35f9g6-0.start { counter-reset: lst-ctn-kix_gpfkle35f9g6-0 0; }

.lst-kix_xrj1sdkp3cni-8 > li { counter-increment: lst-ctn-kix_xrj1sdkp3cni-8 1; }

ol.lst-kix_3ho157wy3jxf-5.start { counter-reset: lst-ctn-kix_3ho157wy3jxf-5 0; }

ol.lst-kix_ckxnb6vf7vme-3.start { counter-reset: lst-ctn-kix_ckxnb6vf7vme-3 0; }

ol.lst-kix_w9tqx4187f4c-6.start { counter-reset: lst-ctn-kix_w9tqx4187f4c-6 0; }

.lst-kix_sfybiz7pn3rx-1 > li::before { content: "○  "; }

ol.lst-kix_oiuz0iy372u2-4.start { counter-reset: lst-ctn-kix_oiuz0iy372u2-4 0; }

ol.lst-kix_nqdkqsc3oqx4-4.start { counter-reset: lst-ctn-kix_nqdkqsc3oqx4-4 0; }

.lst-kix_gpfkle35f9g6-8 > li { counter-increment: lst-ctn-kix_gpfkle35f9g6-8 1; }

ol.lst-kix_ey0jmq1tgbhn-2.start { counter-reset: lst-ctn-kix_ey0jmq1tgbhn-2 0; }

.lst-kix_3ho157wy3jxf-6 > li { counter-increment: lst-ctn-kix_3ho157wy3jxf-6 1; }

.lst-kix_55mhn1ecd8zq-8 > li::before { content: "■  "; }

ul.lst-kix_cmz9dkb8w9u4-2 { list-style-type: none; }

.lst-kix_q9wm09yqvpbs-5 > li::before { content: "" counter(lst-ctn-kix_q9wm09yqvpbs-5, lower-roman) ". "; }

.lst-kix_mnp305eqj1wg-5 > li { counter-increment: lst-ctn-kix_mnp305eqj1wg-5 1; }

.lst-kix_5s16jregg8d-7 > li::before { content: "○  "; }

ul.lst-kix_cmz9dkb8w9u4-3 { list-style-type: none; }

.lst-kix_ey0jmq1tgbhn-8 > li { counter-increment: lst-ctn-kix_ey0jmq1tgbhn-8 1; }

ul.lst-kix_cmz9dkb8w9u4-4 { list-style-type: none; }

ul.lst-kix_cmz9dkb8w9u4-5 { list-style-type: none; }

.lst-kix_xrj1sdkp3cni-2 > li::before { content: "" counter(lst-ctn-kix_xrj1sdkp3cni-2, lower-roman) ". "; }

ul.lst-kix_cmz9dkb8w9u4-6 { list-style-type: none; }

.lst-kix_4uq1mr5t1xn5-7 > li { counter-increment: lst-ctn-kix_4uq1mr5t1xn5-7 1; }

.lst-kix_rrld09yo0z41-1 > li { counter-increment: lst-ctn-kix_rrld09yo0z41-1 1; }

.lst-kix_5s16jregg8d-6 > li::before { content: "●  "; }

ul.lst-kix_cmz9dkb8w9u4-7 { list-style-type: none; }

.lst-kix_sq2mty8y4cla-1 > li::before { content: "" counter(lst-ctn-kix_sq2mty8y4cla-1, lower-latin) ". "; }

ul.lst-kix_cmz9dkb8w9u4-8 { list-style-type: none; }

.lst-kix_xrj1sdkp3cni-0 > li { counter-increment: lst-ctn-kix_xrj1sdkp3cni-0 1; }

ol.lst-kix_sq2mty8y4cla-0.start { counter-reset: lst-ctn-kix_sq2mty8y4cla-0 0; }

.lst-kix_q9wm09yqvpbs-8 > li::before { content: "" counter(lst-ctn-kix_q9wm09yqvpbs-8, lower-roman) ". "; }

ol.lst-kix_q3b8r3xg1qkx-1.start { counter-reset: lst-ctn-kix_q3b8r3xg1qkx-1 0; }

.lst-kix_ckxnb6vf7vme-7 > li::before { content: "" counter(lst-ctn-kix_ckxnb6vf7vme-7, lower-latin) ". "; }

ul.lst-kix_cmz9dkb8w9u4-0 { list-style-type: none; }

ol.lst-kix_ljmndakz6mcr-8.start { counter-reset: lst-ctn-kix_ljmndakz6mcr-8 0; }

ul.lst-kix_cmz9dkb8w9u4-1 { list-style-type: none; }

ol.lst-kix_n1ny3uif9c2q-4.start { counter-reset: lst-ctn-kix_n1ny3uif9c2q-4 0; }

ol.lst-kix_gpfkle35f9g6-5.start { counter-reset: lst-ctn-kix_gpfkle35f9g6-5 0; }

ol.lst-kix_bvmitnb5swh8-2.start { counter-reset: lst-ctn-kix_bvmitnb5swh8-2 0; }

ol.lst-kix_uqyylbhn1m4k-4.start { counter-reset: lst-ctn-kix_uqyylbhn1m4k-4 0; }

.lst-kix_5s16jregg8d-3 > li::before { content: "●  "; }

.lst-kix_j5huq76pqetk-6 > li::before { content: "" counter(lst-ctn-kix_j5huq76pqetk-6) ". "; }

.lst-kix_j5huq76pqetk-2 > li::before { content: "" counter(lst-ctn-kix_j5huq76pqetk-2, lower-roman) ". "; }

.lst-kix_b4yhtr5n7hga-3 > li { counter-increment: lst-ctn-kix_b4yhtr5n7hga-3 1; }

.lst-kix_yt60ymksdnh5-8 > li { counter-increment: lst-ctn-kix_yt60ymksdnh5-8 1; }

.lst-kix_m3mg1m14r0ox-5 > li { counter-increment: lst-ctn-kix_m3mg1m14r0ox-5 1; }

.lst-kix_j5huq76pqetk-5 > li::before { content: "" counter(lst-ctn-kix_j5huq76pqetk-5, lower-roman) ". "; }

.lst-kix_5namkmhqnfpl-6 > li::before { content: "●  "; }

ul.lst-kix_c1i5n6q7z3d-7 { list-style-type: none; }

ul.lst-kix_c1i5n6q7z3d-6 { list-style-type: none; }

ul.lst-kix_c1i5n6q7z3d-8 { list-style-type: none; }

ul.lst-kix_c1i5n6q7z3d-1 { list-style-type: none; }

ul.lst-kix_c1i5n6q7z3d-0 { list-style-type: none; }

ul.lst-kix_c1i5n6q7z3d-3 { list-style-type: none; }

ul.lst-kix_c1i5n6q7z3d-2 { list-style-type: none; }

ul.lst-kix_c1i5n6q7z3d-5 { list-style-type: none; }

ol.lst-kix_t1ql394g7cq6-3.start { counter-reset: lst-ctn-kix_t1ql394g7cq6-3 0; }

ol.lst-kix_dcv7ib5lvp4v-4.start { counter-reset: lst-ctn-kix_dcv7ib5lvp4v-4 0; }

ul.lst-kix_c1i5n6q7z3d-4 { list-style-type: none; }

ol.lst-kix_oiuz0iy372u2-5.start { counter-reset: lst-ctn-kix_oiuz0iy372u2-5 0; }

ol.lst-kix_ey0jmq1tgbhn-7.start { counter-reset: lst-ctn-kix_ey0jmq1tgbhn-7 0; }

.lst-kix_3mskaxtv1nar-0 > li::before { content: "●  "; }

ol.lst-kix_q3b8r3xg1qkx-6.start { counter-reset: lst-ctn-kix_q3b8r3xg1qkx-6 0; }

ol.lst-kix_sq2mty8y4cla-5.start { counter-reset: lst-ctn-kix_sq2mty8y4cla-5 0; }

ol.lst-kix_uqyylbhn1m4k-3.start { counter-reset: lst-ctn-kix_uqyylbhn1m4k-3 0; }

.lst-kix_kb150t1bns3n-7 > li::before { content: "○  "; }

.lst-kix_uqyylbhn1m4k-0 > li { counter-increment: lst-ctn-kix_uqyylbhn1m4k-0 1; }

.lst-kix_pwbhslrd67om-0 > li::before { content: "" counter(lst-ctn-kix_pwbhslrd67om-0) ". "; }

.lst-kix_yt60ymksdnh5-6 > li { counter-increment: lst-ctn-kix_yt60ymksdnh5-6 1; }

ol.lst-kix_bseh3kjlzqme-1.start { counter-reset: lst-ctn-kix_bseh3kjlzqme-1 0; }

.lst-kix_10q7n546cbqj-3 > li { counter-increment: lst-ctn-kix_10q7n546cbqj-3 1; }

.lst-kix_w9tqx4187f4c-1 > li::before { content: "" counter(lst-ctn-kix_w9tqx4187f4c-1, lower-latin) ". "; }

.lst-kix_gzdu38n4pxir-2 > li { counter-increment: lst-ctn-kix_gzdu38n4pxir-2 1; }

.lst-kix_brzd8bm9vgv1-8 > li::before { content: "■  "; }

ol.lst-kix_85dwzw7kxv5h-6.start { counter-reset: lst-ctn-kix_85dwzw7kxv5h-6 0; }

ol.lst-kix_okhvdbx9vxjx-0.start { counter-reset: lst-ctn-kix_okhvdbx9vxjx-0 0; }

.lst-kix_w9tqx4187f4c-2 > li::before { content: "" counter(lst-ctn-kix_w9tqx4187f4c-2, lower-roman) ". "; }

ol.lst-kix_bvmitnb5swh8-7.start { counter-reset: lst-ctn-kix_bvmitnb5swh8-7 0; }

.lst-kix_nkn9z5o9q292-8 > li::before { content: "■  "; }

ol.lst-kix_ey0jmq1tgbhn-6.start { counter-reset: lst-ctn-kix_ey0jmq1tgbhn-6 0; }

.lst-kix_w9tqx4187f4c-5 > li::before { content: "" counter(lst-ctn-kix_w9tqx4187f4c-5, lower-roman) ". "; }

.lst-kix_3yaj3fyh3cgu-0 > li::before { content: "●  "; }

.lst-kix_nkn9z5o9q292-7 > li::before { content: "○  "; }

.lst-kix_r9g9j9mj19b1-2 > li::before { content: "■  "; }

.lst-kix_brzd8bm9vgv1-4 > li::before { content: "○  "; }

.lst-kix_brzd8bm9vgv1-1 > li::before { content: "○  "; }

.lst-kix_brzd8bm9vgv1-5 > li::before { content: "■  "; }

.lst-kix_re52shiykht8-2 > li::before { content: "■  "; }

ol.lst-kix_q3b8r3xg1qkx-7.start { counter-reset: lst-ctn-kix_q3b8r3xg1qkx-7 0; }

.lst-kix_ckxnb6vf7vme-4 > li { counter-increment: lst-ctn-kix_ckxnb6vf7vme-4 1; }

ol.lst-kix_4uq1mr5t1xn5-4 { list-style-type: none; }

.lst-kix_r9g9j9mj19b1-6 > li::before { content: "●  "; }

.lst-kix_xc5d5ew3cd2w-3 > li { counter-increment: lst-ctn-kix_xc5d5ew3cd2w-3 1; }

ol.lst-kix_4uq1mr5t1xn5-5 { list-style-type: none; }

ol.lst-kix_4uq1mr5t1xn5-6 { list-style-type: none; }

ol.lst-kix_4uq1mr5t1xn5-7 { list-style-type: none; }

ol.lst-kix_4uq1mr5t1xn5-8 { list-style-type: none; }

.lst-kix_kb150t1bns3n-0 > li::before { content: "●  "; }

ol.lst-kix_t1ql394g7cq6-2.start { counter-reset: lst-ctn-kix_t1ql394g7cq6-2 0; }

ol.lst-kix_yt60ymksdnh5-2 { list-style-type: none; }

ol.lst-kix_yt60ymksdnh5-1 { list-style-type: none; }

ol.lst-kix_yt60ymksdnh5-0 { list-style-type: none; }

ol.lst-kix_yt60ymksdnh5-6 { list-style-type: none; }

ol.lst-kix_gpfkle35f9g6-4.start { counter-reset: lst-ctn-kix_gpfkle35f9g6-4 0; }

ol.lst-kix_n1ny3uif9c2q-5.start { counter-reset: lst-ctn-kix_n1ny3uif9c2q-5 0; }

ol.lst-kix_4uq1mr5t1xn5-0 { list-style-type: none; }

ol.lst-kix_yt60ymksdnh5-5 { list-style-type: none; }

ol.lst-kix_5270cv8i6nuv-1.start { counter-reset: lst-ctn-kix_5270cv8i6nuv-1 0; }

ol.lst-kix_4uq1mr5t1xn5-1 { list-style-type: none; }

ol.lst-kix_yt60ymksdnh5-4 { list-style-type: none; }

.lst-kix_s9tg2x8dz8yw-1 > li { counter-increment: lst-ctn-kix_s9tg2x8dz8yw-1 1; }

ol.lst-kix_4uq1mr5t1xn5-2 { list-style-type: none; }

.lst-kix_kb150t1bns3n-3 > li::before { content: "●  "; }

.lst-kix_re52shiykht8-6 > li::before { content: "●  "; }

ol.lst-kix_yt60ymksdnh5-3 { list-style-type: none; }

ol.lst-kix_4uq1mr5t1xn5-3 { list-style-type: none; }

.lst-kix_xrj1sdkp3cni-5 > li::before { content: "" counter(lst-ctn-kix_xrj1sdkp3cni-5, lower-roman) ". "; }

ol.lst-kix_yt60ymksdnh5-8 { list-style-type: none; }

ol.lst-kix_yt60ymksdnh5-7 { list-style-type: none; }

.lst-kix_xrj1sdkp3cni-6 > li::before { content: "" counter(lst-ctn-kix_xrj1sdkp3cni-6) ". "; }

.lst-kix_kb150t1bns3n-4 > li::before { content: "○  "; }

.lst-kix_re52shiykht8-5 > li::before { content: "■  "; }

.lst-kix_r9g9j9mj19b1-3 > li::before { content: "●  "; }

ol.lst-kix_xc5d5ew3cd2w-0.start { counter-reset: lst-ctn-kix_xc5d5ew3cd2w-0 0; }

ol.lst-kix_4uq1mr5t1xn5-0.start { counter-reset: lst-ctn-kix_4uq1mr5t1xn5-0 0; }

.lst-kix_yt60ymksdnh5-0 > li::before { content: "" counter(lst-ctn-kix_yt60ymksdnh5-0) ". "; }

ol.lst-kix_bvmitnb5swh8-8.start { counter-reset: lst-ctn-kix_bvmitnb5swh8-8 0; }

ol.lst-kix_b4yhtr5n7hga-8.start { counter-reset: lst-ctn-kix_b4yhtr5n7hga-8 0; }

.lst-kix_habx6bj0olf7-0 > li { counter-increment: lst-ctn-kix_habx6bj0olf7-0 1; }

.lst-kix_utdw00xskxog-2 > li::before { content: "■  "; }

.lst-kix_c1i5n6q7z3d-4 > li::before { content: "○  "; }

ol.lst-kix_85dwzw7kxv5h-1.start { counter-reset: lst-ctn-kix_85dwzw7kxv5h-1 0; }

.lst-kix_fcu0owu0u5lm-5 > li { counter-increment: lst-ctn-kix_fcu0owu0u5lm-5 1; }

.lst-kix_c1i5n6q7z3d-8 > li::before { content: "■  "; }

ol.lst-kix_habx6bj0olf7-2.start { counter-reset: lst-ctn-kix_habx6bj0olf7-2 0; }

.lst-kix_fcu0owu0u5lm-8 > li::before { content: "" counter(lst-ctn-kix_fcu0owu0u5lm-8, lower-roman) ". "; }

.lst-kix_utdw00xskxog-6 > li::before { content: "●  "; }

.lst-kix_sfybiz7pn3rx-4 > li::before { content: "○  "; }

.lst-kix_nkn9z5o9q292-4 > li::before { content: "○  "; }

.lst-kix_olo1v9h26sum-5 > li::before { content: "■  "; }

ol.lst-kix_dcv7ib5lvp4v-1 { list-style-type: none; }

.lst-kix_tj22yequgne3-2 > li::before { content: "" counter(lst-ctn-kix_tj22yequgne3-2, lower-roman) ". "; }

ol.lst-kix_sq2mty8y4cla-4.start { counter-reset: lst-ctn-kix_sq2mty8y4cla-4 0; }

ol.lst-kix_dcv7ib5lvp4v-2 { list-style-type: none; }

ol.lst-kix_dcv7ib5lvp4v-0 { list-style-type: none; }

ul.lst-kix_c537b0yjw9gz-4 { list-style-type: none; }

ol.lst-kix_dcv7ib5lvp4v-5 { list-style-type: none; }

ul.lst-kix_c537b0yjw9gz-3 { list-style-type: none; }

ol.lst-kix_dcv7ib5lvp4v-6 { list-style-type: none; }

ul.lst-kix_c537b0yjw9gz-6 { list-style-type: none; }

ol.lst-kix_dcv7ib5lvp4v-3 { list-style-type: none; }

ul.lst-kix_c537b0yjw9gz-5 { list-style-type: none; }

ol.lst-kix_dcv7ib5lvp4v-4 { list-style-type: none; }

ol.lst-kix_q3b8r3xg1qkx-2.start { counter-reset: lst-ctn-kix_q3b8r3xg1qkx-2 0; }

.lst-kix_s9tg2x8dz8yw-3 > li::before { content: "" counter(lst-ctn-kix_s9tg2x8dz8yw-3) ". "; }

ul.lst-kix_c537b0yjw9gz-0 { list-style-type: none; }

.lst-kix_nqdkqsc3oqx4-2 > li::before { content: "" counter(lst-ctn-kix_nqdkqsc3oqx4-2, lower-roman) ". "; }

.lst-kix_fcu0owu0u5lm-4 > li::before { content: "" counter(lst-ctn-kix_fcu0owu0u5lm-4, lower-latin) ". "; }

ul.lst-kix_c537b0yjw9gz-2 { list-style-type: none; }

ol.lst-kix_dcv7ib5lvp4v-7 { list-style-type: none; }

ul.lst-kix_c537b0yjw9gz-1 { list-style-type: none; }

ol.lst-kix_dcv7ib5lvp4v-8 { list-style-type: none; }

ol.lst-kix_habx6bj0olf7-4.start { counter-reset: lst-ctn-kix_habx6bj0olf7-4 0; }

.lst-kix_n1ny3uif9c2q-3 > li { counter-increment: lst-ctn-kix_n1ny3uif9c2q-3 1; }

ol.lst-kix_5270cv8i6nuv-6.start { counter-reset: lst-ctn-kix_5270cv8i6nuv-6 0; }

ul.lst-kix_c537b0yjw9gz-8 { list-style-type: none; }

ul.lst-kix_c537b0yjw9gz-7 { list-style-type: none; }

.lst-kix_85dwzw7kxv5h-6 > li { counter-increment: lst-ctn-kix_85dwzw7kxv5h-6 1; }

.lst-kix_j5huq76pqetk-7 > li { counter-increment: lst-ctn-kix_j5huq76pqetk-7 1; }

.lst-kix_sfybiz7pn3rx-8 > li::before { content: "■  "; }

ol.lst-kix_bvmitnb5swh8-3.start { counter-reset: lst-ctn-kix_bvmitnb5swh8-3 0; }

ol.lst-kix_xc5d5ew3cd2w-5.start { counter-reset: lst-ctn-kix_xc5d5ew3cd2w-5 0; }

ol.lst-kix_n1ny3uif9c2q-0.start { counter-reset: lst-ctn-kix_n1ny3uif9c2q-0 0; }

.lst-kix_55mhn1ecd8zq-7 > li::before { content: "○  "; }

.lst-kix_10q7n546cbqj-8 > li { counter-increment: lst-ctn-kix_10q7n546cbqj-8 1; }

.lst-kix_bseh3kjlzqme-0 > li { counter-increment: lst-ctn-kix_bseh3kjlzqme-0 1; }

.lst-kix_ekvfn9dhk9qx-2 > li::before { content: "■  "; }

.lst-kix_ekvfn9dhk9qx-6 > li::before { content: "●  "; }

.lst-kix_ljmndakz6mcr-6 > li { counter-increment: lst-ctn-kix_ljmndakz6mcr-6 1; }

ol.lst-kix_dcv7ib5lvp4v-0.start { counter-reset: lst-ctn-kix_dcv7ib5lvp4v-0 0; }

ol.lst-kix_xc5d5ew3cd2w-3.start { counter-reset: lst-ctn-kix_xc5d5ew3cd2w-3 0; }

.lst-kix_vwmkmidzq0q1-6 > li::before { content: "" counter(lst-ctn-kix_vwmkmidzq0q1-6) ". "; }

.lst-kix_c7313u9pplkk-6 > li::before { content: "" counter(lst-ctn-kix_c7313u9pplkk-6) ". "; }

.lst-kix_w9tqx4187f4c-1 > li { counter-increment: lst-ctn-kix_w9tqx4187f4c-1 1; }

.lst-kix_c7313u9pplkk-2 > li::before { content: "" counter(lst-ctn-kix_c7313u9pplkk-2, lower-roman) ". "; }

ol.lst-kix_85dwzw7kxv5h-3.start { counter-reset: lst-ctn-kix_85dwzw7kxv5h-3 0; }

.lst-kix_ckxnb6vf7vme-6 > li { counter-increment: lst-ctn-kix_ckxnb6vf7vme-6 1; }

ol.lst-kix_xc5d5ew3cd2w-4.start { counter-reset: lst-ctn-kix_xc5d5ew3cd2w-4 0; }

.lst-kix_15r02pw2hvsa-7 > li::before { content: "○  "; }

ol.lst-kix_5270cv8i6nuv-4.start { counter-reset: lst-ctn-kix_5270cv8i6nuv-4 0; }

.lst-kix_c7313u9pplkk-2 > li { counter-increment: lst-ctn-kix_c7313u9pplkk-2 1; }

.lst-kix_15r02pw2hvsa-3 > li::before { content: "●  "; }

.lst-kix_ey0jmq1tgbhn-6 > li { counter-increment: lst-ctn-kix_ey0jmq1tgbhn-6 1; }

.lst-kix_dcv7ib5lvp4v-7 > li { counter-increment: lst-ctn-kix_dcv7ib5lvp4v-7 1; }

ol.lst-kix_habx6bj0olf7-3.start { counter-reset: lst-ctn-kix_habx6bj0olf7-3 0; }

.lst-kix_4uq1mr5t1xn5-2 > li { counter-increment: lst-ctn-kix_4uq1mr5t1xn5-2 1; }

.lst-kix_dcv7ib5lvp4v-8 > li::before { content: "" counter(lst-ctn-kix_dcv7ib5lvp4v-8, lower-roman) ". "; }

.lst-kix_cmz9dkb8w9u4-6 > li::before { content: "●  "; }

ol.lst-kix_oiuz0iy372u2-8.start { counter-reset: lst-ctn-kix_oiuz0iy372u2-8 0; }

.lst-kix_dcv7ib5lvp4v-1 > li::before { content: "" counter(lst-ctn-kix_dcv7ib5lvp4v-1, lower-latin) ". "; }

.lst-kix_cmz9dkb8w9u4-0 > li::before { content: "●  "; }

.lst-kix_b4yhtr5n7hga-3 > li::before { content: "" counter(lst-ctn-kix_b4yhtr5n7hga-3) ". "; }

ol.lst-kix_okhvdbx9vxjx-2.start { counter-reset: lst-ctn-kix_okhvdbx9vxjx-2 0; }

.lst-kix_cmz9dkb8w9u4-3 > li::before { content: "●  "; }

.lst-kix_gzdu38n4pxir-5 > li { counter-increment: lst-ctn-kix_gzdu38n4pxir-5 1; }

.lst-kix_10q7n546cbqj-0 > li { counter-increment: lst-ctn-kix_10q7n546cbqj-0 1; }

.lst-kix_b4yhtr5n7hga-6 > li::before { content: "" counter(lst-ctn-kix_b4yhtr5n7hga-6) ". "; }

ol.lst-kix_sq2mty8y4cla-3.start { counter-reset: lst-ctn-kix_sq2mty8y4cla-3 0; }

.lst-kix_habx6bj0olf7-6 > li { counter-increment: lst-ctn-kix_habx6bj0olf7-6 1; }

ol.lst-kix_w4jnjjd4slk1-1.start { counter-reset: lst-ctn-kix_w4jnjjd4slk1-1 0; }

.lst-kix_c7313u9pplkk-5 > li { counter-increment: lst-ctn-kix_c7313u9pplkk-5 1; }

ol.lst-kix_w4jnjjd4slk1-6.start { counter-reset: lst-ctn-kix_w4jnjjd4slk1-6 0; }

ol.lst-kix_gpfkle35f9g6-8.start { counter-reset: lst-ctn-kix_gpfkle35f9g6-8 0; }

ol.lst-kix_ckxnb6vf7vme-7.start { counter-reset: lst-ctn-kix_ckxnb6vf7vme-7 0; }

ol.lst-kix_s9tg2x8dz8yw-4.start { counter-reset: lst-ctn-kix_s9tg2x8dz8yw-4 0; }

ol.lst-kix_4uq1mr5t1xn5-8.start { counter-reset: lst-ctn-kix_4uq1mr5t1xn5-8 0; }

.lst-kix_4uq1mr5t1xn5-6 > li::before { content: "" counter(lst-ctn-kix_4uq1mr5t1xn5-6) ". "; }

.lst-kix_gpfkle35f9g6-5 > li::before { content: "" counter(lst-ctn-kix_gpfkle35f9g6-5, lower-roman) ". "; }

ol.lst-kix_dcv7ib5lvp4v-1.start { counter-reset: lst-ctn-kix_dcv7ib5lvp4v-1 0; }

.lst-kix_xqezlaka82l9-1 > li { counter-increment: lst-ctn-kix_xqezlaka82l9-1 1; }

.lst-kix_lcuwlsa6z8uz-3 > li { counter-increment: lst-ctn-kix_lcuwlsa6z8uz-3 1; }

.lst-kix_pmwlevr2di06-7 > li::before { content: "○  "; }

.lst-kix_620io0vozd8n-3 > li::before { content: "●  "; }

.lst-kix_zgiykejnxm8t-5 > li::before { content: "■  "; }

.lst-kix_zgiykejnxm8t-2 > li::before { content: "■  "; }

.lst-kix_rrld09yo0z41-6 > li::before { content: "" counter(lst-ctn-kix_rrld09yo0z41-6) ". "; }

.lst-kix_620io0vozd8n-0 > li::before { content: "●  "; }

.lst-kix_zgiykejnxm8t-8 > li::before { content: "■  "; }

.lst-kix_mnp305eqj1wg-6 > li::before { content: "" counter(lst-ctn-kix_mnp305eqj1wg-6) ". "; }

.lst-kix_572earllcbds-7 > li::before { content: "" counter(lst-ctn-kix_572earllcbds-7, lower-latin) ". "; }

.lst-kix_rrld09yo0z41-3 > li::before { content: "" counter(lst-ctn-kix_rrld09yo0z41-3) ". "; }

ol.lst-kix_okhvdbx9vxjx-7.start { counter-reset: lst-ctn-kix_okhvdbx9vxjx-7 0; }

.lst-kix_572earllcbds-4 > li::before { content: "" counter(lst-ctn-kix_572earllcbds-4, lower-latin) ". "; }

.lst-kix_gpfkle35f9g6-2 > li::before { content: "" counter(lst-ctn-kix_gpfkle35f9g6-2, lower-roman) ". "; }

.lst-kix_t1ql394g7cq6-6 > li::before { content: "" counter(lst-ctn-kix_t1ql394g7cq6-6) ". "; }

ol.lst-kix_3ndwxni7n3wv-5.start { counter-reset: lst-ctn-kix_3ndwxni7n3wv-5 0; }

.lst-kix_27lagi0g2vk-2 > li::before { content: "■  "; }

.lst-kix_85dwzw7kxv5h-1 > li { counter-increment: lst-ctn-kix_85dwzw7kxv5h-1 1; }

.lst-kix_27lagi0g2vk-5 > li::before { content: "■  "; }

.lst-kix_b4yhtr5n7hga-0 > li::before { content: "" counter(lst-ctn-kix_b4yhtr5n7hga-0) ". "; }

.lst-kix_27lagi0g2vk-8 > li::before { content: "■  "; }

.lst-kix_mnp305eqj1wg-3 > li::before { content: "" counter(lst-ctn-kix_mnp305eqj1wg-3) ". "; }

ol.lst-kix_b4yhtr5n7hga-5.start { counter-reset: lst-ctn-kix_b4yhtr5n7hga-5 0; }

.lst-kix_t1ql394g7cq6-0 > li::before { content: "" counter(lst-ctn-kix_t1ql394g7cq6-0) ". "; }

.lst-kix_3oqw8rm66zow-7 > li::before { content: "○  "; }

.lst-kix_3oqw8rm66zow-4 > li::before { content: "○  "; }

.lst-kix_okhvdbx9vxjx-5 > li { counter-increment: lst-ctn-kix_okhvdbx9vxjx-5 1; }

.lst-kix_t1ql394g7cq6-3 > li::before { content: "" counter(lst-ctn-kix_t1ql394g7cq6-3) ". "; }

.lst-kix_okhvdbx9vxjx-2 > li { counter-increment: lst-ctn-kix_okhvdbx9vxjx-2 1; }

.lst-kix_ksgcgd9whg8s-5 > li { counter-increment: lst-ctn-kix_ksgcgd9whg8s-5 1; }

.lst-kix_okhvdbx9vxjx-7 > li::before { content: "" counter(lst-ctn-kix_okhvdbx9vxjx-7, lower-latin) ". "; }

.lst-kix_bvmitnb5swh8-6 > li { counter-increment: lst-ctn-kix_bvmitnb5swh8-6 1; }

ol.lst-kix_3ho157wy3jxf-0 { list-style-type: none; }

ol.lst-kix_3ho157wy3jxf-1 { list-style-type: none; }

ol.lst-kix_3ho157wy3jxf-2 { list-style-type: none; }

ol.lst-kix_3ho157wy3jxf-3 { list-style-type: none; }

ol.lst-kix_3ho157wy3jxf-4 { list-style-type: none; }

ol.lst-kix_3ho157wy3jxf-5 { list-style-type: none; }

ol.lst-kix_3ho157wy3jxf-6 { list-style-type: none; }

.lst-kix_ljmndakz6mcr-2 > li::before { content: "" counter(lst-ctn-kix_ljmndakz6mcr-2, lower-roman) ". "; }

ul.lst-kix_olegludlmu4-8 { list-style-type: none; }

ul.lst-kix_olegludlmu4-7 { list-style-type: none; }

ol.lst-kix_j5huq76pqetk-8 { list-style-type: none; }

ul.lst-kix_olegludlmu4-6 { list-style-type: none; }

ol.lst-kix_bvmitnb5swh8-1.start { counter-reset: lst-ctn-kix_bvmitnb5swh8-1 0; }

ul.lst-kix_olegludlmu4-5 { list-style-type: none; }

ol.lst-kix_j5huq76pqetk-6 { list-style-type: none; }

ol.lst-kix_oiuz0iy372u2-1.start { counter-reset: lst-ctn-kix_oiuz0iy372u2-1 0; }

ol.lst-kix_j5huq76pqetk-7 { list-style-type: none; }

ol.lst-kix_j5huq76pqetk-4 { list-style-type: none; }

ol.lst-kix_j5huq76pqetk-5 { list-style-type: none; }

.lst-kix_ljmndakz6mcr-8 > li::before { content: "" counter(lst-ctn-kix_ljmndakz6mcr-8, lower-roman) ". "; }

ul.lst-kix_olegludlmu4-0 { list-style-type: none; }

.lst-kix_9r3d8uancgeq-7 > li::before { content: "○  "; }

.lst-kix_m3mg1m14r0ox-3 > li::before { content: "" counter(lst-ctn-kix_m3mg1m14r0ox-3) ". "; }

ul.lst-kix_olegludlmu4-4 { list-style-type: none; }

ul.lst-kix_olegludlmu4-3 { list-style-type: none; }

ul.lst-kix_olegludlmu4-2 { list-style-type: none; }

ol.lst-kix_q3b8r3xg1qkx-8.start { counter-reset: lst-ctn-kix_q3b8r3xg1qkx-8 0; }

ul.lst-kix_olegludlmu4-1 { list-style-type: none; }

ol.lst-kix_3ndwxni7n3wv-1 { list-style-type: none; }

ol.lst-kix_3ndwxni7n3wv-2 { list-style-type: none; }

ol.lst-kix_3ndwxni7n3wv-3 { list-style-type: none; }

.lst-kix_s9tg2x8dz8yw-6 > li::before { content: "" counter(lst-ctn-kix_s9tg2x8dz8yw-6) ". "; }

ol.lst-kix_4uq1mr5t1xn5-1.start { counter-reset: lst-ctn-kix_4uq1mr5t1xn5-1 0; }

.lst-kix_tj22yequgne3-5 > li::before { content: "" counter(lst-ctn-kix_tj22yequgne3-5, lower-roman) ". "; }

ol.lst-kix_3ndwxni7n3wv-4 { list-style-type: none; }

ol.lst-kix_3ndwxni7n3wv-5 { list-style-type: none; }

ol.lst-kix_ckxnb6vf7vme-0.start { counter-reset: lst-ctn-kix_ckxnb6vf7vme-0 0; }

ol.lst-kix_3ndwxni7n3wv-6 { list-style-type: none; }

ol.lst-kix_3ndwxni7n3wv-7 { list-style-type: none; }

ol.lst-kix_3ndwxni7n3wv-8 { list-style-type: none; }

ol.lst-kix_j5huq76pqetk-2 { list-style-type: none; }

ol.lst-kix_j5huq76pqetk-3 { list-style-type: none; }

ol.lst-kix_j5huq76pqetk-0 { list-style-type: none; }

ol.lst-kix_j5huq76pqetk-1 { list-style-type: none; }

.lst-kix_ruhin6837alc-7 > li::before { content: "" counter(lst-ctn-kix_ruhin6837alc-7, lower-latin) ". "; }

.lst-kix_uqyylbhn1m4k-8 > li::before { content: "" counter(lst-ctn-kix_uqyylbhn1m4k-8, lower-roman) ". "; }

.lst-kix_572earllcbds-4 > li { counter-increment: lst-ctn-kix_572earllcbds-4 1; }

ol.lst-kix_3ho157wy3jxf-7 { list-style-type: none; }

ol.lst-kix_3ho157wy3jxf-8 { list-style-type: none; }

.lst-kix_rrld09yo0z41-0 > li::before { content: "" counter(lst-ctn-kix_rrld09yo0z41-0) ". "; }

ol.lst-kix_xc5d5ew3cd2w-8.start { counter-reset: lst-ctn-kix_xc5d5ew3cd2w-8 0; }

.lst-kix_okhvdbx9vxjx-1 > li::before { content: "" counter(lst-ctn-kix_okhvdbx9vxjx-1, lower-latin) ". "; }

.lst-kix_c1i5n6q7z3d-1 > li::before { content: "○  "; }

ol.lst-kix_b4yhtr5n7hga-0.start { counter-reset: lst-ctn-kix_b4yhtr5n7hga-0 0; }

.lst-kix_fcu0owu0u5lm-1 > li::before { content: "" counter(lst-ctn-kix_fcu0owu0u5lm-1, lower-latin) ". "; }

.lst-kix_lcuwlsa6z8uz-6 > li { counter-increment: lst-ctn-kix_lcuwlsa6z8uz-6 1; }

ol.lst-kix_3ndwxni7n3wv-0 { list-style-type: none; }

.lst-kix_mnp305eqj1wg-2 > li { counter-increment: lst-ctn-kix_mnp305eqj1wg-2 1; }

ol.lst-kix_oiuz0iy372u2-3.start { counter-reset: lst-ctn-kix_oiuz0iy372u2-3 0; }

.lst-kix_igutqwst0xn-0 > li::before { content: "●  "; }

ol.lst-kix_b4yhtr5n7hga-3.start { counter-reset: lst-ctn-kix_b4yhtr5n7hga-3 0; }

.lst-kix_pmwlevr2di06-1 > li::before { content: "○  "; }

.lst-kix_q3b8r3xg1qkx-1 > li::before { content: "" counter(lst-ctn-kix_q3b8r3xg1qkx-1, lower-latin) ". "; }

.lst-kix_fcu0owu0u5lm-2 > li { counter-increment: lst-ctn-kix_fcu0owu0u5lm-2 1; }

ol.lst-kix_sq2mty8y4cla-8.start { counter-reset: lst-ctn-kix_sq2mty8y4cla-8 0; }

ol.lst-kix_3ndwxni7n3wv-8.start { counter-reset: lst-ctn-kix_3ndwxni7n3wv-8 0; }

.lst-kix_vwmkmidzq0q1-6 > li { counter-increment: lst-ctn-kix_vwmkmidzq0q1-6 1; }

.lst-kix_o0kdhzzdksr6-7 > li::before { content: "○  "; }

.lst-kix_gzdu38n4pxir-7 > li::before { content: "" counter(lst-ctn-kix_gzdu38n4pxir-7, lower-latin) ". "; }

.lst-kix_15r02pw2hvsa-0 > li::before { content: "●  "; }

.lst-kix_s9tg2x8dz8yw-6 > li { counter-increment: lst-ctn-kix_s9tg2x8dz8yw-6 1; }

ol.lst-kix_okhvdbx9vxjx-4.start { counter-reset: lst-ctn-kix_okhvdbx9vxjx-4 0; }

.lst-kix_w4jnjjd4slk1-6 > li { counter-increment: lst-ctn-kix_w4jnjjd4slk1-6 1; }

.lst-kix_8e86lum2i6eo-2 > li::before { content: "■  "; }

ol.lst-kix_okhvdbx9vxjx-7 { list-style-type: none; }

.lst-kix_9r3d8uancgeq-1 > li::before { content: "○  "; }

ol.lst-kix_okhvdbx9vxjx-6 { list-style-type: none; }

.lst-kix_q3b8r3xg1qkx-3 > li { counter-increment: lst-ctn-kix_q3b8r3xg1qkx-3 1; }

ol.lst-kix_ckxnb6vf7vme-2.start { counter-reset: lst-ctn-kix_ckxnb6vf7vme-2 0; }

ol.lst-kix_okhvdbx9vxjx-8 { list-style-type: none; }

ol.lst-kix_okhvdbx9vxjx-3 { list-style-type: none; }

ol.lst-kix_dcv7ib5lvp4v-6.start { counter-reset: lst-ctn-kix_dcv7ib5lvp4v-6 0; }

.lst-kix_3ho157wy3jxf-1 > li::before { content: "" counter(lst-ctn-kix_3ho157wy3jxf-1, lower-latin) ". "; }

ol.lst-kix_okhvdbx9vxjx-2 { list-style-type: none; }

ol.lst-kix_okhvdbx9vxjx-5 { list-style-type: none; }

ol.lst-kix_okhvdbx9vxjx-4 { list-style-type: none; }

ol.lst-kix_4uq1mr5t1xn5-3.start { counter-reset: lst-ctn-kix_4uq1mr5t1xn5-3 0; }

ol.lst-kix_okhvdbx9vxjx-1 { list-style-type: none; }

ol.lst-kix_okhvdbx9vxjx-0 { list-style-type: none; }

.lst-kix_8e86lum2i6eo-8 > li::before { content: "■  "; }

.lst-kix_olegludlmu4-2 > li::before { content: "■  "; }

.lst-kix_gpfkle35f9g6-2 > li { counter-increment: lst-ctn-kix_gpfkle35f9g6-2 1; }

.lst-kix_dcv7ib5lvp4v-4 > li { counter-increment: lst-ctn-kix_dcv7ib5lvp4v-4 1; }

.lst-kix_ckxnb6vf7vme-1 > li::before { content: "" counter(lst-ctn-kix_ckxnb6vf7vme-1, lower-latin) ". "; }

ol.lst-kix_okhvdbx9vxjx-5.start { counter-reset: lst-ctn-kix_okhvdbx9vxjx-5 0; }

.lst-kix_q9wm09yqvpbs-2 > li::before { content: "" counter(lst-ctn-kix_q9wm09yqvpbs-2, lower-roman) ". "; }

.lst-kix_sq2mty8y4cla-4 > li::before { content: "" counter(lst-ctn-kix_sq2mty8y4cla-4, lower-latin) ". "; }

.lst-kix_5s16jregg8d-0 > li::before { content: "●  "; }

.lst-kix_ey0jmq1tgbhn-5 > li::before { content: "" counter(lst-ctn-kix_ey0jmq1tgbhn-5, lower-roman) ". "; }

.lst-kix_q9wm09yqvpbs-6 > li { counter-increment: lst-ctn-kix_q9wm09yqvpbs-6 1; }

ol.lst-kix_s9tg2x8dz8yw-1.start { counter-reset: lst-ctn-kix_s9tg2x8dz8yw-1 0; }

ol.lst-kix_b4yhtr5n7hga-1.start { counter-reset: lst-ctn-kix_b4yhtr5n7hga-1 0; }

.lst-kix_ckxnb6vf7vme-4 > li::before { content: "" counter(lst-ctn-kix_ckxnb6vf7vme-4, lower-latin) ". "; }

ul.lst-kix_q26h1rehak49-3 { list-style-type: none; }

ul.lst-kix_q26h1rehak49-4 { list-style-type: none; }

.lst-kix_lcuwlsa6z8uz-0 > li { counter-increment: lst-ctn-kix_lcuwlsa6z8uz-0 1; }

ul.lst-kix_q26h1rehak49-5 { list-style-type: none; }

ul.lst-kix_q26h1rehak49-6 { list-style-type: none; }

.lst-kix_5namkmhqnfpl-3 > li::before { content: "●  "; }

ul.lst-kix_q26h1rehak49-7 { list-style-type: none; }

ul.lst-kix_q26h1rehak49-8 { list-style-type: none; }

.lst-kix_ey0jmq1tgbhn-8 > li::before { content: "" counter(lst-ctn-kix_ey0jmq1tgbhn-8, lower-roman) ". "; }

.lst-kix_pwbhslrd67om-6 > li::before { content: "" counter(lst-ctn-kix_pwbhslrd67om-6) ". "; }

ul.lst-kix_q26h1rehak49-0 { list-style-type: none; }

.lst-kix_o0kdhzzdksr6-1 > li::before { content: "○  "; }

ul.lst-kix_q26h1rehak49-1 { list-style-type: none; }

ul.lst-kix_q26h1rehak49-2 { list-style-type: none; }

ol.lst-kix_w4jnjjd4slk1-3.start { counter-reset: lst-ctn-kix_w4jnjjd4slk1-3 0; }

ol.lst-kix_ckxnb6vf7vme-4.start { counter-reset: lst-ctn-kix_ckxnb6vf7vme-4 0; }

ol.lst-kix_3ndwxni7n3wv-7.start { counter-reset: lst-ctn-kix_3ndwxni7n3wv-7 0; }

.lst-kix_bseh3kjlzqme-8 > li { counter-increment: lst-ctn-kix_bseh3kjlzqme-8 1; }

ol.lst-kix_s9tg2x8dz8yw-7.start { counter-reset: lst-ctn-kix_s9tg2x8dz8yw-7 0; }

.lst-kix_pwbhslrd67om-6 > li { counter-increment: lst-ctn-kix_pwbhslrd67om-6 1; }

ol.lst-kix_4uq1mr5t1xn5-5.start { counter-reset: lst-ctn-kix_4uq1mr5t1xn5-5 0; }

.lst-kix_vwmkmidzq0q1-0 > li::before { content: "" counter(lst-ctn-kix_vwmkmidzq0q1-0) ". "; }

.lst-kix_5namkmhqnfpl-0 > li::before { content: "●  "; }

.lst-kix_ksgcgd9whg8s-8 > li { counter-increment: lst-ctn-kix_ksgcgd9whg8s-8 1; }

.lst-kix_j5huq76pqetk-4 > li { counter-increment: lst-ctn-kix_j5huq76pqetk-4 1; }

.lst-kix_oiuz0iy372u2-4 > li::before { content: "" counter(lst-ctn-kix_oiuz0iy372u2-4, lower-latin) ". "; }

.lst-kix_uqyylbhn1m4k-6 > li { counter-increment: lst-ctn-kix_uqyylbhn1m4k-6 1; }

.lst-kix_w9tqx4187f4c-8 > li::before { content: "" counter(lst-ctn-kix_w9tqx4187f4c-8, lower-roman) ". "; }

.lst-kix_gzdu38n4pxir-8 > li { counter-increment: lst-ctn-kix_gzdu38n4pxir-8 1; }

.lst-kix_10q7n546cbqj-6 > li::before { content: "" counter(lst-ctn-kix_10q7n546cbqj-6) ". "; }

.lst-kix_3ndwxni7n3wv-2 > li { counter-increment: lst-ctn-kix_3ndwxni7n3wv-2 1; }

.lst-kix_3mskaxtv1nar-6 > li::before { content: "●  "; }

.lst-kix_oiuz0iy372u2-1 > li::before { content: "" counter(lst-ctn-kix_oiuz0iy372u2-1, lower-latin) ". "; }

.lst-kix_habx6bj0olf7-3 > li { counter-increment: lst-ctn-kix_habx6bj0olf7-3 1; }

.lst-kix_5270cv8i6nuv-1 > li { counter-increment: lst-ctn-kix_5270cv8i6nuv-1 1; }

.lst-kix_10q7n546cbqj-3 > li::before { content: "" counter(lst-ctn-kix_10q7n546cbqj-3) ". "; }

.lst-kix_pwbhslrd67om-3 > li::before { content: "" counter(lst-ctn-kix_pwbhslrd67om-3) ". "; }

.lst-kix_3mskaxtv1nar-3 > li::before { content: "●  "; }

ol.lst-kix_dcv7ib5lvp4v-8.start { counter-reset: lst-ctn-kix_dcv7ib5lvp4v-8 0; }

.lst-kix_oiuz0iy372u2-1 > li { counter-increment: lst-ctn-kix_oiuz0iy372u2-1 1; }

ol.lst-kix_4uq1mr5t1xn5-6.start { counter-reset: lst-ctn-kix_4uq1mr5t1xn5-6 0; }

.lst-kix_yt60ymksdnh5-6 > li::before { content: "" counter(lst-ctn-kix_yt60ymksdnh5-6) ". "; }

ol.lst-kix_s9tg2x8dz8yw-2.start { counter-reset: lst-ctn-kix_s9tg2x8dz8yw-2 0; }

.lst-kix_3yaj3fyh3cgu-3 > li::before { content: "●  "; }

ol.lst-kix_ckxnb6vf7vme-5.start { counter-reset: lst-ctn-kix_ckxnb6vf7vme-5 0; }

ol.lst-kix_w4jnjjd4slk1-8.start { counter-reset: lst-ctn-kix_w4jnjjd4slk1-8 0; }

.lst-kix_ksgcgd9whg8s-5 > li::before { content: "" counter(lst-ctn-kix_ksgcgd9whg8s-5, lower-roman) ". "; }

.lst-kix_nqdkqsc3oqx4-0 > li { counter-increment: lst-ctn-kix_nqdkqsc3oqx4-0 1; }

.lst-kix_3yaj3fyh3cgu-6 > li::before { content: "●  "; }

ul.lst-kix_re52shiykht8-0 { list-style-type: none; }

ol.lst-kix_oiuz0iy372u2-0.start { counter-reset: lst-ctn-kix_oiuz0iy372u2-0 0; }

ul.lst-kix_re52shiykht8-2 { list-style-type: none; }

ul.lst-kix_re52shiykht8-1 { list-style-type: none; }

.lst-kix_yt60ymksdnh5-3 > li::before { content: "" counter(lst-ctn-kix_yt60ymksdnh5-3) ". "; }

.lst-kix_xqezlaka82l9-3 > li::before { content: "" counter(lst-ctn-kix_xqezlaka82l9-3) ". "; }

.lst-kix_85dwzw7kxv5h-8 > li::before { content: "" counter(lst-ctn-kix_85dwzw7kxv5h-8, lower-roman) ". "; }

ul.lst-kix_re52shiykht8-8 { list-style-type: none; }

.lst-kix_xqezlaka82l9-6 > li::before { content: "" counter(lst-ctn-kix_xqezlaka82l9-6) ". "; }

ul.lst-kix_re52shiykht8-7 { list-style-type: none; }

ul.lst-kix_re52shiykht8-4 { list-style-type: none; }

.lst-kix_ksgcgd9whg8s-8 > li::before { content: "" counter(lst-ctn-kix_ksgcgd9whg8s-8, lower-roman) ". "; }

ul.lst-kix_re52shiykht8-3 { list-style-type: none; }

ul.lst-kix_re52shiykht8-6 { list-style-type: none; }

ul.lst-kix_re52shiykht8-5 { list-style-type: none; }

.lst-kix_okhvdbx9vxjx-4 > li::before { content: "" counter(lst-ctn-kix_okhvdbx9vxjx-4, lower-latin) ". "; }

.lst-kix_ruhin6837alc-7 > li { counter-increment: lst-ctn-kix_ruhin6837alc-7 1; }

ol.lst-kix_s9tg2x8dz8yw-8.start { counter-reset: lst-ctn-kix_s9tg2x8dz8yw-8 0; }

.lst-kix_3ndwxni7n3wv-5 > li { counter-increment: lst-ctn-kix_3ndwxni7n3wv-5 1; }

.lst-kix_5270cv8i6nuv-3 > li::before { content: "" counter(lst-ctn-kix_5270cv8i6nuv-3) ". "; }

.lst-kix_rrld09yo0z41-7 > li { counter-increment: lst-ctn-kix_rrld09yo0z41-7 1; }

.lst-kix_m3mg1m14r0ox-6 > li::before { content: "" counter(lst-ctn-kix_m3mg1m14r0ox-6) ". "; }

.lst-kix_ljmndakz6mcr-5 > li::before { content: "" counter(lst-ctn-kix_ljmndakz6mcr-5, lower-roman) ". "; }

.lst-kix_5270cv8i6nuv-4 > li { counter-increment: lst-ctn-kix_5270cv8i6nuv-4 1; }

ol.lst-kix_ckxnb6vf7vme-8.start { counter-reset: lst-ctn-kix_ckxnb6vf7vme-8 0; }

.lst-kix_t1ql394g7cq6-2 > li { counter-increment: lst-ctn-kix_t1ql394g7cq6-2 1; }

.lst-kix_e6809g41048l-5 > li::before { content: "■  "; }

.lst-kix_nqdkqsc3oqx4-8 > li::before { content: "" counter(lst-ctn-kix_nqdkqsc3oqx4-8, lower-roman) ". "; }

ol.lst-kix_3ndwxni7n3wv-3.start { counter-reset: lst-ctn-kix_3ndwxni7n3wv-3 0; }

.lst-kix_tj22yequgne3-8 > li::before { content: "" counter(lst-ctn-kix_tj22yequgne3-8, lower-roman) ". "; }

ol.lst-kix_3ndwxni7n3wv-0.start { counter-reset: lst-ctn-kix_3ndwxni7n3wv-0 0; }

.lst-kix_69cgk215qz5l-5 > li::before { content: "■  "; }

.lst-kix_572earllcbds-7 > li { counter-increment: lst-ctn-kix_572earllcbds-7 1; }

.lst-kix_pmwlevr2di06-4 > li::before { content: "○  "; }

ol.lst-kix_s9tg2x8dz8yw-8 { list-style-type: none; }

.lst-kix_l80e6xnoww9k-3 > li::before { content: "" counter(lst-ctn-kix_l80e6xnoww9k-3) ". "; }

ul.lst-kix_27lagi0g2vk-2 { list-style-type: none; }

.lst-kix_bseh3kjlzqme-6 > li::before { content: "" counter(lst-ctn-kix_bseh3kjlzqme-6) ". "; }

ol.lst-kix_s9tg2x8dz8yw-1 { list-style-type: none; }

ul.lst-kix_27lagi0g2vk-1 { list-style-type: none; }

ol.lst-kix_s9tg2x8dz8yw-0 { list-style-type: none; }

ul.lst-kix_27lagi0g2vk-4 { list-style-type: none; }

ol.lst-kix_s9tg2x8dz8yw-3 { list-style-type: none; }

ul.lst-kix_27lagi0g2vk-3 { list-style-type: none; }

ol.lst-kix_s9tg2x8dz8yw-2 { list-style-type: none; }

ol.lst-kix_s9tg2x8dz8yw-5 { list-style-type: none; }

.lst-kix_habx6bj0olf7-8 > li::before { content: "" counter(lst-ctn-kix_habx6bj0olf7-8, lower-roman) ". "; }

ol.lst-kix_s9tg2x8dz8yw-4 { list-style-type: none; }

.lst-kix_nit8j66s93ag-3 > li::before { content: "●  "; }

ul.lst-kix_27lagi0g2vk-0 { list-style-type: none; }

ol.lst-kix_s9tg2x8dz8yw-7 { list-style-type: none; }

ol.lst-kix_s9tg2x8dz8yw-6 { list-style-type: none; }

.lst-kix_ljmndakz6mcr-0 > li { counter-increment: lst-ctn-kix_ljmndakz6mcr-0 1; }

.lst-kix_o0kdhzzdksr6-4 > li::before { content: "○  "; }

ol.lst-kix_s9tg2x8dz8yw-6.start { counter-reset: lst-ctn-kix_s9tg2x8dz8yw-6 0; }

.lst-kix_55mhn1ecd8zq-1 > li::before { content: "○  "; }

.lst-kix_u8xk64vks6c8-8 > li::before { content: "■  "; }

ol.lst-kix_3ndwxni7n3wv-1.start { counter-reset: lst-ctn-kix_3ndwxni7n3wv-1 0; }

ol.lst-kix_w4jnjjd4slk1-4.start { counter-reset: lst-ctn-kix_w4jnjjd4slk1-4 0; }

.lst-kix_c7313u9pplkk-8 > li { counter-increment: lst-ctn-kix_c7313u9pplkk-8 1; }

.lst-kix_b4yhtr5n7hga-6 > li { counter-increment: lst-ctn-kix_b4yhtr5n7hga-6 1; }

.lst-kix_9r3d8uancgeq-4 > li::before { content: "○  "; }

.lst-kix_n1ny3uif9c2q-8 > li::before { content: "" counter(lst-ctn-kix_n1ny3uif9c2q-8, lower-roman) ". "; }

.lst-kix_8e86lum2i6eo-5 > li::before { content: "■  "; }

.lst-kix_w4jnjjd4slk1-3 > li { counter-increment: lst-ctn-kix_w4jnjjd4slk1-3 1; }

.lst-kix_ey0jmq1tgbhn-0 > li { counter-increment: lst-ctn-kix_ey0jmq1tgbhn-0 1; }

ul.lst-kix_27lagi0g2vk-6 { list-style-type: none; }

.lst-kix_dcv7ib5lvp4v-1 > li { counter-increment: lst-ctn-kix_dcv7ib5lvp4v-1 1; }

ul.lst-kix_27lagi0g2vk-5 { list-style-type: none; }

ul.lst-kix_27lagi0g2vk-8 { list-style-type: none; }

ul.lst-kix_27lagi0g2vk-7 { list-style-type: none; }

.lst-kix_q3b8r3xg1qkx-6 > li { counter-increment: lst-ctn-kix_q3b8r3xg1qkx-6 1; }

ol.lst-kix_s9tg2x8dz8yw-5.start { counter-reset: lst-ctn-kix_s9tg2x8dz8yw-5 0; }

ol.lst-kix_3ndwxni7n3wv-2.start { counter-reset: lst-ctn-kix_3ndwxni7n3wv-2 0; }

.lst-kix_gpfkle35f9g6-5 > li { counter-increment: lst-ctn-kix_gpfkle35f9g6-5 1; }

.lst-kix_sq2mty8y4cla-7 > li::before { content: "" counter(lst-ctn-kix_sq2mty8y4cla-7, lower-latin) ". "; }

ol.lst-kix_w4jnjjd4slk1-5.start { counter-reset: lst-ctn-kix_w4jnjjd4slk1-5 0; }

ol.lst-kix_gpfkle35f9g6-2.start { counter-reset: lst-ctn-kix_gpfkle35f9g6-2 0; }

.lst-kix_gn9iznjyvy0-2 > li { counter-increment: lst-ctn-kix_gn9iznjyvy0-2 1; }

ol.lst-kix_n1ny3uif9c2q-7.start { counter-reset: lst-ctn-kix_n1ny3uif9c2q-7 0; }

ol.lst-kix_gpfkle35f9g6-8 { list-style-type: none; }

ol.lst-kix_ey0jmq1tgbhn-4.start { counter-reset: lst-ctn-kix_ey0jmq1tgbhn-4 0; }

.lst-kix_m7gyp3gged0c-2 > li::before { content: "" counter(lst-ctn-kix_m7gyp3gged0c-2, lower-roman) ". "; }

.lst-kix_m7gyp3gged0c-4 > li::before { content: "" counter(lst-ctn-kix_m7gyp3gged0c-4, lower-latin) ". "; }

ol.lst-kix_xrj1sdkp3cni-0.start { counter-reset: lst-ctn-kix_xrj1sdkp3cni-0 0; }

ol.lst-kix_gpfkle35f9g6-7 { list-style-type: none; }

ol.lst-kix_gpfkle35f9g6-6 { list-style-type: none; }

ol.lst-kix_gpfkle35f9g6-5 { list-style-type: none; }

ol.lst-kix_gpfkle35f9g6-4 { list-style-type: none; }

ol.lst-kix_gpfkle35f9g6-3 { list-style-type: none; }

ol.lst-kix_gpfkle35f9g6-2 { list-style-type: none; }

ol.lst-kix_uqyylbhn1m4k-1.start { counter-reset: lst-ctn-kix_uqyylbhn1m4k-1 0; }

ol.lst-kix_gpfkle35f9g6-1 { list-style-type: none; }

ol.lst-kix_yt60ymksdnh5-1.start { counter-reset: lst-ctn-kix_yt60ymksdnh5-1 0; }

ol.lst-kix_gpfkle35f9g6-0 { list-style-type: none; }

ol.lst-kix_4uq1mr5t1xn5-2.start { counter-reset: lst-ctn-kix_4uq1mr5t1xn5-2 0; }

.lst-kix_m7gyp3gged0c-6 > li::before { content: "" counter(lst-ctn-kix_m7gyp3gged0c-6) ". "; }

.lst-kix_gn9iznjyvy0-4 > li::before { content: "" counter(lst-ctn-kix_gn9iznjyvy0-4, lower-latin) ". "; }

ol.lst-kix_t1ql394g7cq6-7 { list-style-type: none; }

ul.lst-kix_5namkmhqnfpl-7 { list-style-type: none; }

ol.lst-kix_t1ql394g7cq6-8 { list-style-type: none; }

ul.lst-kix_5namkmhqnfpl-8 { list-style-type: none; }

ol.lst-kix_t1ql394g7cq6-5 { list-style-type: none; }

ul.lst-kix_5namkmhqnfpl-5 { list-style-type: none; }

ol.lst-kix_t1ql394g7cq6-6 { list-style-type: none; }

.lst-kix_gn9iznjyvy0-6 > li::before { content: "" counter(lst-ctn-kix_gn9iznjyvy0-6) ". "; }

ul.lst-kix_5namkmhqnfpl-6 { list-style-type: none; }

ul.lst-kix_5namkmhqnfpl-3 { list-style-type: none; }

ul.lst-kix_5namkmhqnfpl-4 { list-style-type: none; }

ul.lst-kix_5namkmhqnfpl-1 { list-style-type: none; }

.lst-kix_m7gyp3gged0c-8 > li::before { content: "" counter(lst-ctn-kix_m7gyp3gged0c-8, lower-roman) ". "; }

ul.lst-kix_5namkmhqnfpl-2 { list-style-type: none; }

ul.lst-kix_5namkmhqnfpl-0 { list-style-type: none; }

.lst-kix_gn9iznjyvy0-8 > li::before { content: "" counter(lst-ctn-kix_gn9iznjyvy0-8, lower-roman) ". "; }

.lst-kix_c537b0yjw9gz-4 > li::before { content: "○  "; }

ol.lst-kix_oiuz0iy372u2-2.start { counter-reset: lst-ctn-kix_oiuz0iy372u2-2 0; }

ol.lst-kix_fcu0owu0u5lm-0.start { counter-reset: lst-ctn-kix_fcu0owu0u5lm-0 0; }

.lst-kix_c537b0yjw9gz-2 > li::before { content: "■  "; }

ol.lst-kix_l80e6xnoww9k-2.start { counter-reset: lst-ctn-kix_l80e6xnoww9k-2 0; }

.lst-kix_85dwzw7kxv5h-3 > li { counter-increment: lst-ctn-kix_85dwzw7kxv5h-3 1; }

.lst-kix_c537b0yjw9gz-0 > li::before { content: "●  "; }

.lst-kix_oiuz0iy372u2-0 > li { counter-increment: lst-ctn-kix_oiuz0iy372u2-0 1; }

.lst-kix_nqdkqsc3oqx4-7 > li { counter-increment: lst-ctn-kix_nqdkqsc3oqx4-7 1; }

ol.lst-kix_t1ql394g7cq6-0.start { counter-reset: lst-ctn-kix_t1ql394g7cq6-0 0; }

ol.lst-kix_s9tg2x8dz8yw-3.start { counter-reset: lst-ctn-kix_s9tg2x8dz8yw-3 0; }

.lst-kix_w9tqx4187f4c-6 > li { counter-increment: lst-ctn-kix_w9tqx4187f4c-6 1; }

.lst-kix_572earllcbds-2 > li { counter-increment: lst-ctn-kix_572earllcbds-2 1; }

ol.lst-kix_4uq1mr5t1xn5-7.start { counter-reset: lst-ctn-kix_4uq1mr5t1xn5-7 0; }

ol.lst-kix_ksgcgd9whg8s-6.start { counter-reset: lst-ctn-kix_ksgcgd9whg8s-6 0; }

.lst-kix_c537b0yjw9gz-6 > li::before { content: "●  "; }

.lst-kix_4uq1mr5t1xn5-4 > li { counter-increment: lst-ctn-kix_4uq1mr5t1xn5-4 1; }

ol.lst-kix_xrj1sdkp3cni-5.start { counter-reset: lst-ctn-kix_xrj1sdkp3cni-5 0; }

.lst-kix_bvmitnb5swh8-0 > li::before { content: "" counter(lst-ctn-kix_bvmitnb5swh8-0) ". "; }

.lst-kix_m4p7szoqaqik-5 > li::before { content: "■  "; }

.lst-kix_oiuz0iy372u2-7 > li { counter-increment: lst-ctn-kix_oiuz0iy372u2-7 1; }

.lst-kix_bvmitnb5swh8-2 > li::before { content: "" counter(lst-ctn-kix_bvmitnb5swh8-2, lower-roman) ". "; }

.lst-kix_m4p7szoqaqik-3 > li::before { content: "●  "; }

.lst-kix_c537b0yjw9gz-8 > li::before { content: "■  "; }

.lst-kix_bvmitnb5swh8-4 > li::before { content: "" counter(lst-ctn-kix_bvmitnb5swh8-4, lower-latin) ". "; }

.lst-kix_m4p7szoqaqik-1 > li::before { content: "○  "; }

.lst-kix_mnp305eqj1wg-0 > li { counter-increment: lst-ctn-kix_mnp305eqj1wg-0 1; }

ol.lst-kix_oiuz0iy372u2-7.start { counter-reset: lst-ctn-kix_oiuz0iy372u2-7 0; }

.lst-kix_bvmitnb5swh8-8 > li::before { content: "" counter(lst-ctn-kix_bvmitnb5swh8-8, lower-roman) ". "; }

ul.lst-kix_nit8j66s93ag-0 { list-style-type: none; }

.lst-kix_bvmitnb5swh8-6 > li::before { content: "" counter(lst-ctn-kix_bvmitnb5swh8-6) ". "; }

ul.lst-kix_nit8j66s93ag-6 { list-style-type: none; }

ul.lst-kix_nit8j66s93ag-5 { list-style-type: none; }

ul.lst-kix_nit8j66s93ag-8 { list-style-type: none; }

ul.lst-kix_nit8j66s93ag-7 { list-style-type: none; }

ul.lst-kix_nit8j66s93ag-2 { list-style-type: none; }

.lst-kix_fcu0owu0u5lm-0 > li { counter-increment: lst-ctn-kix_fcu0owu0u5lm-0 1; }

ul.lst-kix_nit8j66s93ag-1 { list-style-type: none; }

ul.lst-kix_nit8j66s93ag-4 { list-style-type: none; }

ul.lst-kix_nit8j66s93ag-3 { list-style-type: none; }

.lst-kix_10q7n546cbqj-5 > li { counter-increment: lst-ctn-kix_10q7n546cbqj-5 1; }

.lst-kix_or4x01rk566h-2 > li::before { content: "■  "; }

.lst-kix_or4x01rk566h-4 > li::before { content: "○  "; }

ol.lst-kix_c7313u9pplkk-8.start { counter-reset: lst-ctn-kix_c7313u9pplkk-8 0; }

ol.lst-kix_572earllcbds-5.start { counter-reset: lst-ctn-kix_572earllcbds-5 0; }

ol.lst-kix_w9tqx4187f4c-4.start { counter-reset: lst-ctn-kix_w9tqx4187f4c-4 0; }

ol.lst-kix_w9tqx4187f4c-7 { list-style-type: none; }

ol.lst-kix_w9tqx4187f4c-8 { list-style-type: none; }

ol.lst-kix_ksgcgd9whg8s-1.start { counter-reset: lst-ctn-kix_ksgcgd9whg8s-1 0; }

.lst-kix_or4x01rk566h-6 > li::before { content: "●  "; }

.lst-kix_or4x01rk566h-8 > li::before { content: "■  "; }

ol.lst-kix_nqdkqsc3oqx4-2.start { counter-reset: lst-ctn-kix_nqdkqsc3oqx4-2 0; }

ol.lst-kix_gn9iznjyvy0-8.start { counter-reset: lst-ctn-kix_gn9iznjyvy0-8 0; }

ol.lst-kix_rrld09yo0z41-6.start { counter-reset: lst-ctn-kix_rrld09yo0z41-6 0; }

ol.lst-kix_tj22yequgne3-7.start { counter-reset: lst-ctn-kix_tj22yequgne3-7 0; }

.lst-kix_m4p7szoqaqik-7 > li::before { content: "○  "; }

.lst-kix_5270cv8i6nuv-3 > li { counter-increment: lst-ctn-kix_5270cv8i6nuv-3 1; }

ol.lst-kix_w9tqx4187f4c-0 { list-style-type: none; }

ol.lst-kix_w9tqx4187f4c-1 { list-style-type: none; }

ol.lst-kix_w9tqx4187f4c-2 { list-style-type: none; }

ol.lst-kix_w9tqx4187f4c-3 { list-style-type: none; }

ol.lst-kix_w9tqx4187f4c-4 { list-style-type: none; }

ol.lst-kix_w9tqx4187f4c-5 { list-style-type: none; }

ol.lst-kix_w9tqx4187f4c-6 { list-style-type: none; }

.lst-kix_l80e6xnoww9k-8 > li { counter-increment: lst-ctn-kix_l80e6xnoww9k-8 1; }

.lst-kix_ey0jmq1tgbhn-4 > li { counter-increment: lst-ctn-kix_ey0jmq1tgbhn-4 1; }

.lst-kix_or4x01rk566h-0 > li::before { content: "●  "; }

.lst-kix_l80e6xnoww9k-2 > li::before { content: "" counter(lst-ctn-kix_l80e6xnoww9k-2, lower-roman) ". "; }

.lst-kix_habx6bj0olf7-7 > li::before { content: "" counter(lst-ctn-kix_habx6bj0olf7-7, lower-latin) ". "; }

.lst-kix_l80e6xnoww9k-0 > li::before { content: "" counter(lst-ctn-kix_l80e6xnoww9k-0) ". "; }

.lst-kix_l80e6xnoww9k-4 > li::before { content: "" counter(lst-ctn-kix_l80e6xnoww9k-4, lower-latin) ". "; }

.lst-kix_habx6bj0olf7-5 > li::before { content: "" counter(lst-ctn-kix_habx6bj0olf7-5, lower-roman) ". "; }

.lst-kix_fcu0owu0u5lm-7 > li { counter-increment: lst-ctn-kix_fcu0owu0u5lm-7 1; }

ol.lst-kix_uqyylbhn1m4k-6.start { counter-reset: lst-ctn-kix_uqyylbhn1m4k-6 0; }

ol.lst-kix_l80e6xnoww9k-0 { list-style-type: none; }

ol.lst-kix_l80e6xnoww9k-3 { list-style-type: none; }

ol.lst-kix_l80e6xnoww9k-4 { list-style-type: none; }

ol.lst-kix_l80e6xnoww9k-1 { list-style-type: none; }

ol.lst-kix_l80e6xnoww9k-2 { list-style-type: none; }

ol.lst-kix_l80e6xnoww9k-7 { list-style-type: none; }

.lst-kix_mnp305eqj1wg-7 > li { counter-increment: lst-ctn-kix_mnp305eqj1wg-7 1; }

.lst-kix_l80e6xnoww9k-8 > li::before { content: "" counter(lst-ctn-kix_l80e6xnoww9k-8, lower-roman) ". "; }

ol.lst-kix_l80e6xnoww9k-8 { list-style-type: none; }

.lst-kix_n1ny3uif9c2q-1 > li::before { content: "" counter(lst-ctn-kix_n1ny3uif9c2q-1, lower-latin) ". "; }

.lst-kix_n1ny3uif9c2q-5 > li::before { content: "" counter(lst-ctn-kix_n1ny3uif9c2q-5, lower-roman) ". "; }

ol.lst-kix_l80e6xnoww9k-5 { list-style-type: none; }

ol.lst-kix_l80e6xnoww9k-6 { list-style-type: none; }

.lst-kix_l80e6xnoww9k-6 > li::before { content: "" counter(lst-ctn-kix_l80e6xnoww9k-6) ". "; }

.lst-kix_n1ny3uif9c2q-3 > li::before { content: "" counter(lst-ctn-kix_n1ny3uif9c2q-3) ". "; }

ol.lst-kix_b4yhtr5n7hga-2.start { counter-reset: lst-ctn-kix_b4yhtr5n7hga-2 0; }

ol.lst-kix_t1ql394g7cq6-5.start { counter-reset: lst-ctn-kix_t1ql394g7cq6-5 0; }

ol.lst-kix_t1ql394g7cq6-3 { list-style-type: none; }

ol.lst-kix_t1ql394g7cq6-4 { list-style-type: none; }

ol.lst-kix_t1ql394g7cq6-1 { list-style-type: none; }

ol.lst-kix_t1ql394g7cq6-2 { list-style-type: none; }

ol.lst-kix_t1ql394g7cq6-0 { list-style-type: none; }

.lst-kix_n1ny3uif9c2q-7 > li::before { content: "" counter(lst-ctn-kix_n1ny3uif9c2q-7, lower-latin) ". "; }

.lst-kix_t1ql394g7cq6-6 > li { counter-increment: lst-ctn-kix_t1ql394g7cq6-6 1; }

.lst-kix_yt60ymksdnh5-4 > li { counter-increment: lst-ctn-kix_yt60ymksdnh5-4 1; }

.lst-kix_habx6bj0olf7-4 > li { counter-increment: lst-ctn-kix_habx6bj0olf7-4 1; }

.lst-kix_habx6bj0olf7-1 > li::before { content: "" counter(lst-ctn-kix_habx6bj0olf7-1, lower-latin) ". "; }

.lst-kix_l80e6xnoww9k-1 > li { counter-increment: lst-ctn-kix_l80e6xnoww9k-1 1; }

ol.lst-kix_bseh3kjlzqme-4.start { counter-reset: lst-ctn-kix_bseh3kjlzqme-4 0; }

.lst-kix_n1ny3uif9c2q-7 > li { counter-increment: lst-ctn-kix_n1ny3uif9c2q-7 1; }

.lst-kix_habx6bj0olf7-3 > li::before { content: "" counter(lst-ctn-kix_habx6bj0olf7-3) ". "; }

.lst-kix_m7gyp3gged0c-0 > li::before { content: "" counter(lst-ctn-kix_m7gyp3gged0c-0) ". "; }

ol.lst-kix_l80e6xnoww9k-7.start { counter-reset: lst-ctn-kix_l80e6xnoww9k-7 0; }

ol.lst-kix_m7gyp3gged0c-7.start { counter-reset: lst-ctn-kix_m7gyp3gged0c-7 0; }

.lst-kix_rrld09yo0z41-3 > li { counter-increment: lst-ctn-kix_rrld09yo0z41-3 1; }

ol.lst-kix_10q7n546cbqj-2.start { counter-reset: lst-ctn-kix_10q7n546cbqj-2 0; }

.lst-kix_ljmndakz6mcr-3 > li { counter-increment: lst-ctn-kix_ljmndakz6mcr-3 1; }

.lst-kix_3ndwxni7n3wv-7 > li::before { content: "" counter(lst-ctn-kix_3ndwxni7n3wv-7, lower-latin) ". "; }

ol.lst-kix_xc5d5ew3cd2w-1.start { counter-reset: lst-ctn-kix_xc5d5ew3cd2w-1 0; }

.lst-kix_xc5d5ew3cd2w-7 > li { counter-increment: lst-ctn-kix_xc5d5ew3cd2w-7 1; }

.lst-kix_lcuwlsa6z8uz-6 > li::before { content: "" counter(lst-ctn-kix_lcuwlsa6z8uz-6) ". "; }

.lst-kix_ey0jmq1tgbhn-7 > li::before { content: "" counter(lst-ctn-kix_ey0jmq1tgbhn-7, lower-latin) ". "; }

.lst-kix_lcuwlsa6z8uz-2 > li { counter-increment: lst-ctn-kix_lcuwlsa6z8uz-2 1; }

ol.lst-kix_85dwzw7kxv5h-0.start { counter-reset: lst-ctn-kix_85dwzw7kxv5h-0 0; }

ul.lst-kix_3mskaxtv1nar-6 { list-style-type: none; }

.lst-kix_lcuwlsa6z8uz-2 > li::before { content: "" counter(lst-ctn-kix_lcuwlsa6z8uz-2, lower-roman) ". "; }

ul.lst-kix_3mskaxtv1nar-7 { list-style-type: none; }

ol.lst-kix_5270cv8i6nuv-2.start { counter-reset: lst-ctn-kix_5270cv8i6nuv-2 0; }

ul.lst-kix_3mskaxtv1nar-4 { list-style-type: none; }

.lst-kix_ey0jmq1tgbhn-3 > li::before { content: "" counter(lst-ctn-kix_ey0jmq1tgbhn-3) ". "; }

ul.lst-kix_3mskaxtv1nar-5 { list-style-type: none; }

ul.lst-kix_3mskaxtv1nar-2 { list-style-type: none; }

ul.lst-kix_3mskaxtv1nar-3 { list-style-type: none; }

ul.lst-kix_3mskaxtv1nar-0 { list-style-type: none; }

ul.lst-kix_3mskaxtv1nar-1 { list-style-type: none; }

.lst-kix_gzdu38n4pxir-6 > li { counter-increment: lst-ctn-kix_gzdu38n4pxir-6 1; }

ol.lst-kix_b4yhtr5n7hga-7.start { counter-reset: lst-ctn-kix_b4yhtr5n7hga-7 0; }

ul.lst-kix_3mskaxtv1nar-8 { list-style-type: none; }

ol.lst-kix_mnp305eqj1wg-5.start { counter-reset: lst-ctn-kix_mnp305eqj1wg-5 0; }

ol.lst-kix_m3mg1m14r0ox-2.start { counter-reset: lst-ctn-kix_m3mg1m14r0ox-2 0; }

.lst-kix_m3mg1m14r0ox-3 > li { counter-increment: lst-ctn-kix_m3mg1m14r0ox-3 1; }

ol.lst-kix_85dwzw7kxv5h-5.start { counter-reset: lst-ctn-kix_85dwzw7kxv5h-5 0; }

.lst-kix_3ndwxni7n3wv-3 > li::before { content: "" counter(lst-ctn-kix_3ndwxni7n3wv-3) ". "; }

.lst-kix_q3b8r3xg1qkx-2 > li { counter-increment: lst-ctn-kix_q3b8r3xg1qkx-2 1; }

.lst-kix_n1ny3uif9c2q-0 > li { counter-increment: lst-ctn-kix_n1ny3uif9c2q-0 1; }

.lst-kix_ckxnb6vf7vme-8 > li { counter-increment: lst-ctn-kix_ckxnb6vf7vme-8 1; }

.lst-kix_ljmndakz6mcr-1 > li { counter-increment: lst-ctn-kix_ljmndakz6mcr-1 1; }

.lst-kix_bvmitnb5swh8-3 > li { counter-increment: lst-ctn-kix_bvmitnb5swh8-3 1; }

.lst-kix_ruhin6837alc-4 > li { counter-increment: lst-ctn-kix_ruhin6837alc-4 1; }

.lst-kix_gpfkle35f9g6-4 > li { counter-increment: lst-ctn-kix_gpfkle35f9g6-4 1; }

.lst-kix_10q7n546cbqj-8 > li::before { content: "" counter(lst-ctn-kix_10q7n546cbqj-8, lower-roman) ". "; }

ol.lst-kix_10q7n546cbqj-7.start { counter-reset: lst-ctn-kix_10q7n546cbqj-7 0; }

.lst-kix_10q7n546cbqj-4 > li::before { content: "" counter(lst-ctn-kix_10q7n546cbqj-4, lower-latin) ". "; }

.lst-kix_ruhin6837alc-8 > li::before { content: "" counter(lst-ctn-kix_ruhin6837alc-8, lower-roman) ". "; }

ol.lst-kix_pwbhslrd67om-1.start { counter-reset: lst-ctn-kix_pwbhslrd67om-1 0; }

ol.lst-kix_habx6bj0olf7-5.start { counter-reset: lst-ctn-kix_habx6bj0olf7-5 0; }

ol.lst-kix_xc5d5ew3cd2w-6.start { counter-reset: lst-ctn-kix_xc5d5ew3cd2w-6 0; }

ol.lst-kix_nqdkqsc3oqx4-7.start { counter-reset: lst-ctn-kix_nqdkqsc3oqx4-7 0; }

ol.lst-kix_5270cv8i6nuv-7.start { counter-reset: lst-ctn-kix_5270cv8i6nuv-7 0; }

ol.lst-kix_dcv7ib5lvp4v-3.start { counter-reset: lst-ctn-kix_dcv7ib5lvp4v-3 0; }

ol.lst-kix_m3mg1m14r0ox-7.start { counter-reset: lst-ctn-kix_m3mg1m14r0ox-7 0; }

.lst-kix_ckxnb6vf7vme-1 > li { counter-increment: lst-ctn-kix_ckxnb6vf7vme-1 1; }

.lst-kix_vwmkmidzq0q1-5 > li { counter-increment: lst-ctn-kix_vwmkmidzq0q1-5 1; }

ol.lst-kix_tj22yequgne3-2.start { counter-reset: lst-ctn-kix_tj22yequgne3-2 0; }

.lst-kix_xc5d5ew3cd2w-0 > li { counter-increment: lst-ctn-kix_xc5d5ew3cd2w-0 1; }

.lst-kix_85dwzw7kxv5h-1 > li::before { content: "" counter(lst-ctn-kix_85dwzw7kxv5h-1, lower-latin) ". "; }

.lst-kix_10q7n546cbqj-0 > li::before { content: "" counter(lst-ctn-kix_10q7n546cbqj-0) ". "; }

ol.lst-kix_sq2mty8y4cla-6.start { counter-reset: lst-ctn-kix_sq2mty8y4cla-6 0; }

ol.lst-kix_habx6bj0olf7-0.start { counter-reset: lst-ctn-kix_habx6bj0olf7-0 0; }

.lst-kix_xqezlaka82l9-1 > li::before { content: "" counter(lst-ctn-kix_xqezlaka82l9-1, lower-latin) ". "; }

.lst-kix_85dwzw7kxv5h-5 > li::before { content: "" counter(lst-ctn-kix_85dwzw7kxv5h-5, lower-roman) ". "; }

.lst-kix_sq2mty8y4cla-2 > li { counter-increment: lst-ctn-kix_sq2mty8y4cla-2 1; }

ol.lst-kix_rrld09yo0z41-1.start { counter-reset: lst-ctn-kix_rrld09yo0z41-1 0; }

.lst-kix_xqezlaka82l9-5 > li::before { content: "" counter(lst-ctn-kix_xqezlaka82l9-5, lower-roman) ". "; }

.lst-kix_ksgcgd9whg8s-7 > li::before { content: "" counter(lst-ctn-kix_ksgcgd9whg8s-7, lower-latin) ". "; }

.lst-kix_okhvdbx9vxjx-8 > li { counter-increment: lst-ctn-kix_okhvdbx9vxjx-8 1; }

.lst-kix_tj22yequgne3-8 > li { counter-increment: lst-ctn-kix_tj22yequgne3-8 1; }

.lst-kix_n1ny3uif9c2q-5 > li { counter-increment: lst-ctn-kix_n1ny3uif9c2q-5 1; }

ol.lst-kix_pwbhslrd67om-6.start { counter-reset: lst-ctn-kix_pwbhslrd67om-6 0; }

.lst-kix_xc5d5ew3cd2w-6 > li::before { content: "" counter(lst-ctn-kix_xc5d5ew3cd2w-6) ". "; }

.lst-kix_q3b8r3xg1qkx-7 > li { counter-increment: lst-ctn-kix_q3b8r3xg1qkx-7 1; }

.lst-kix_m3mg1m14r0ox-8 > li::before { content: "" counter(lst-ctn-kix_m3mg1m14r0ox-8, lower-roman) ". "; }

ol.lst-kix_xqezlaka82l9-4.start { counter-reset: lst-ctn-kix_xqezlaka82l9-4 0; }

ol.lst-kix_mnp305eqj1wg-0 { list-style-type: none; }

.lst-kix_vwmkmidzq0q1-3 > li { counter-increment: lst-ctn-kix_vwmkmidzq0q1-3 1; }

.lst-kix_ksgcgd9whg8s-3 > li::before { content: "" counter(lst-ctn-kix_ksgcgd9whg8s-3) ". "; }

ol.lst-kix_mnp305eqj1wg-2 { list-style-type: none; }

.lst-kix_m3mg1m14r0ox-4 > li::before { content: "" counter(lst-ctn-kix_m3mg1m14r0ox-4, lower-latin) ". "; }

.lst-kix_bvmitnb5swh8-5 > li { counter-increment: lst-ctn-kix_bvmitnb5swh8-5 1; }

ol.lst-kix_mnp305eqj1wg-1 { list-style-type: none; }

.lst-kix_ruhin6837alc-6 > li { counter-increment: lst-ctn-kix_ruhin6837alc-6 1; }

ol.lst-kix_mnp305eqj1wg-8 { list-style-type: none; }

ol.lst-kix_mnp305eqj1wg-7 { list-style-type: none; }

ol.lst-kix_mnp305eqj1wg-4 { list-style-type: none; }

ol.lst-kix_mnp305eqj1wg-3 { list-style-type: none; }

ol.lst-kix_mnp305eqj1wg-6 { list-style-type: none; }

ol.lst-kix_mnp305eqj1wg-5 { list-style-type: none; }

ol.lst-kix_10q7n546cbqj-0 { list-style-type: none; }

ol.lst-kix_10q7n546cbqj-1 { list-style-type: none; }

ol.lst-kix_10q7n546cbqj-2 { list-style-type: none; }

.lst-kix_gpfkle35f9g6-6 > li { counter-increment: lst-ctn-kix_gpfkle35f9g6-6 1; }

ol.lst-kix_10q7n546cbqj-3 { list-style-type: none; }

.lst-kix_uqyylbhn1m4k-5 > li::before { content: "" counter(lst-ctn-kix_uqyylbhn1m4k-5, lower-roman) ". "; }

ol.lst-kix_10q7n546cbqj-4 { list-style-type: none; }

ol.lst-kix_10q7n546cbqj-5 { list-style-type: none; }

.lst-kix_gzdu38n4pxir-0 > li::before { content: "" counter(lst-ctn-kix_gzdu38n4pxir-0) ". "; }

.lst-kix_tj22yequgne3-1 > li { counter-increment: lst-ctn-kix_tj22yequgne3-1 1; }

ol.lst-kix_10q7n546cbqj-6 { list-style-type: none; }

ol.lst-kix_10q7n546cbqj-7 { list-style-type: none; }

.lst-kix_dcv7ib5lvp4v-2 > li { counter-increment: lst-ctn-kix_dcv7ib5lvp4v-2 1; }

ol.lst-kix_10q7n546cbqj-8 { list-style-type: none; }

ol.lst-kix_bvmitnb5swh8-6.start { counter-reset: lst-ctn-kix_bvmitnb5swh8-6 0; }

ol.lst-kix_sq2mty8y4cla-1.start { counter-reset: lst-ctn-kix_sq2mty8y4cla-1 0; }

ol.lst-kix_lcuwlsa6z8uz-4.start { counter-reset: lst-ctn-kix_lcuwlsa6z8uz-4 0; }

.lst-kix_ruhin6837alc-4 > li::before { content: "" counter(lst-ctn-kix_ruhin6837alc-4, lower-latin) ". "; }

.lst-kix_pmwlevr2di06-2 > li::before { content: "■  "; }

.lst-kix_q3b8r3xg1qkx-0 > li::before { content: "" counter(lst-ctn-kix_q3b8r3xg1qkx-0) ". "; }

.lst-kix_sq2mty8y4cla-0 > li { counter-increment: lst-ctn-kix_sq2mty8y4cla-0 1; }

.lst-kix_f9adxqm8wtcr-0 > li::before { content: "●  "; }

.lst-kix_bseh3kjlzqme-0 > li::before { content: "" counter(lst-ctn-kix_bseh3kjlzqme-0) ". "; }

.lst-kix_bseh3kjlzqme-4 > li::before { content: "" counter(lst-ctn-kix_bseh3kjlzqme-4, lower-latin) ". "; }

ol.lst-kix_gpfkle35f9g6-7.start { counter-reset: lst-ctn-kix_gpfkle35f9g6-7 0; }

.lst-kix_ruhin6837alc-0 > li::before { content: "" counter(lst-ctn-kix_ruhin6837alc-0) ". "; }

.lst-kix_xc5d5ew3cd2w-5 > li { counter-increment: lst-ctn-kix_xc5d5ew3cd2w-5 1; }

.lst-kix_nit8j66s93ag-5 > li::before { content: "■  "; }

ol.lst-kix_yt60ymksdnh5-6.start { counter-reset: lst-ctn-kix_yt60ymksdnh5-6 0; }

.lst-kix_olegludlmu4-5 > li::before { content: "■  "; }

ol.lst-kix_pwbhslrd67om-4.start { counter-reset: lst-ctn-kix_pwbhslrd67om-4 0; }

ol.lst-kix_n1ny3uif9c2q-2.start { counter-reset: lst-ctn-kix_n1ny3uif9c2q-2 0; }

ol.lst-kix_572earllcbds-0.start { counter-reset: lst-ctn-kix_572earllcbds-0 0; }

.lst-kix_q3b8r3xg1qkx-8 > li::before { content: "" counter(lst-ctn-kix_q3b8r3xg1qkx-8, lower-roman) ". "; }

.lst-kix_gzdu38n4pxir-4 > li::before { content: "" counter(lst-ctn-kix_gzdu38n4pxir-4, lower-latin) ". "; }

.lst-kix_gzdu38n4pxir-8 > li::before { content: "" counter(lst-ctn-kix_gzdu38n4pxir-8, lower-roman) ". "; }

.lst-kix_nit8j66s93ag-1 > li::before { content: "○  "; }

ul.lst-kix_nkn9z5o9q292-0 { list-style-type: none; }

ul.lst-kix_nkn9z5o9q292-1 { list-style-type: none; }

ul.lst-kix_nkn9z5o9q292-2 { list-style-type: none; }

.lst-kix_tj22yequgne3-6 > li { counter-increment: lst-ctn-kix_tj22yequgne3-6 1; }

.lst-kix_q3b8r3xg1qkx-4 > li::before { content: "" counter(lst-ctn-kix_q3b8r3xg1qkx-4, lower-latin) ". "; }

ul.lst-kix_nkn9z5o9q292-3 { list-style-type: none; }

ul.lst-kix_nkn9z5o9q292-4 { list-style-type: none; }

ul.lst-kix_nkn9z5o9q292-5 { list-style-type: none; }

ul.lst-kix_nkn9z5o9q292-6 { list-style-type: none; }

ul.lst-kix_nkn9z5o9q292-7 { list-style-type: none; }

ol.lst-kix_bvmitnb5swh8-4.start { counter-reset: lst-ctn-kix_bvmitnb5swh8-4 0; }

ul.lst-kix_nkn9z5o9q292-8 { list-style-type: none; }

.lst-kix_s9tg2x8dz8yw-3 > li { counter-increment: lst-ctn-kix_s9tg2x8dz8yw-3 1; }

.lst-kix_sq2mty8y4cla-7 > li { counter-increment: lst-ctn-kix_sq2mty8y4cla-7 1; }

.lst-kix_e1iec80scof-1 > li::before { content: "○  "; }

.lst-kix_m3mg1m14r0ox-0 > li::before { content: "" counter(lst-ctn-kix_m3mg1m14r0ox-0) ". "; }

.lst-kix_8e86lum2i6eo-3 > li::before { content: "●  "; }

.lst-kix_q3b8r3xg1qkx-0 > li { counter-increment: lst-ctn-kix_q3b8r3xg1qkx-0 1; }

.lst-kix_sijhq5esqs8x-5 > li::before { content: "■  "; }

.lst-kix_5270cv8i6nuv-5 > li { counter-increment: lst-ctn-kix_5270cv8i6nuv-5 1; }

.lst-kix_e1iec80scof-5 > li::before { content: "■  "; }

.lst-kix_8e86lum2i6eo-7 > li::before { content: "○  "; }

.lst-kix_olegludlmu4-1 > li::before { content: "○  "; }

.lst-kix_f9adxqm8wtcr-8 > li::before { content: "■  "; }

.lst-kix_bseh3kjlzqme-8 > li::before { content: "" counter(lst-ctn-kix_bseh3kjlzqme-8, lower-roman) ". "; }

.lst-kix_gn9iznjyvy0-2 > li::before { content: "" counter(lst-ctn-kix_gn9iznjyvy0-2, lower-roman) ". "; }

ol.lst-kix_q3b8r3xg1qkx-4.start { counter-reset: lst-ctn-kix_q3b8r3xg1qkx-4 0; }

.lst-kix_f9adxqm8wtcr-4 > li::before { content: "○  "; }

.lst-kix_sijhq5esqs8x-1 > li::before { content: "○  "; }

ul.lst-kix_brzd8bm9vgv1-8 { list-style-type: none; }

.lst-kix_dcv7ib5lvp4v-7 > li::before { content: "" counter(lst-ctn-kix_dcv7ib5lvp4v-7, lower-latin) ". "; }

.lst-kix_l80e6xnoww9k-3 > li { counter-increment: lst-ctn-kix_l80e6xnoww9k-3 1; }

ul.lst-kix_brzd8bm9vgv1-7 { list-style-type: none; }

.lst-kix_q9wm09yqvpbs-7 > li { counter-increment: lst-ctn-kix_q9wm09yqvpbs-7 1; }

.lst-kix_nqdkqsc3oqx4-5 > li { counter-increment: lst-ctn-kix_nqdkqsc3oqx4-5 1; }

ul.lst-kix_brzd8bm9vgv1-6 { list-style-type: none; }

ul.lst-kix_brzd8bm9vgv1-5 { list-style-type: none; }

.lst-kix_cmz9dkb8w9u4-4 > li::before { content: "○  "; }

.lst-kix_4uq1mr5t1xn5-3 > li::before { content: "" counter(lst-ctn-kix_4uq1mr5t1xn5-3) ". "; }

.lst-kix_cmz9dkb8w9u4-2 > li::before { content: "■  "; }

.lst-kix_4uq1mr5t1xn5-5 > li::before { content: "" counter(lst-ctn-kix_4uq1mr5t1xn5-5, lower-roman) ". "; }

ol.lst-kix_ljmndakz6mcr-5.start { counter-reset: lst-ctn-kix_ljmndakz6mcr-5 0; }

.lst-kix_b4yhtr5n7hga-2 > li::before { content: "" counter(lst-ctn-kix_b4yhtr5n7hga-2, lower-roman) ". "; }

ol.lst-kix_85dwzw7kxv5h-8.start { counter-reset: lst-ctn-kix_85dwzw7kxv5h-8 0; }

ol.lst-kix_mnp305eqj1wg-2.start { counter-reset: lst-ctn-kix_mnp305eqj1wg-2 0; }

.lst-kix_b4yhtr5n7hga-4 > li::before { content: "" counter(lst-ctn-kix_b4yhtr5n7hga-4, lower-latin) ". "; }

ol.lst-kix_ljmndakz6mcr-0.start { counter-reset: lst-ctn-kix_ljmndakz6mcr-0 0; }

.lst-kix_gn9iznjyvy0-0 > li { counter-increment: lst-ctn-kix_gn9iznjyvy0-0 1; }

.lst-kix_gpfkle35f9g6-6 > li::before { content: "" counter(lst-ctn-kix_gpfkle35f9g6-6) ". "; }

ol.lst-kix_ruhin6837alc-0.start { counter-reset: lst-ctn-kix_ruhin6837alc-0 0; }

.lst-kix_gpfkle35f9g6-8 > li::before { content: "" counter(lst-ctn-kix_gpfkle35f9g6-8, lower-roman) ". "; }

ul.lst-kix_brzd8bm9vgv1-0 { list-style-type: none; }

ol.lst-kix_3ho157wy3jxf-1.start { counter-reset: lst-ctn-kix_3ho157wy3jxf-1 0; }

ul.lst-kix_brzd8bm9vgv1-4 { list-style-type: none; }

.lst-kix_dcv7ib5lvp4v-5 > li::before { content: "" counter(lst-ctn-kix_dcv7ib5lvp4v-5, lower-roman) ". "; }

ul.lst-kix_brzd8bm9vgv1-3 { list-style-type: none; }

ul.lst-kix_brzd8bm9vgv1-2 { list-style-type: none; }

ul.lst-kix_brzd8bm9vgv1-1 { list-style-type: none; }

.lst-kix_zgiykejnxm8t-4 > li::before { content: "○  "; }

ol.lst-kix_oiuz0iy372u2-5 { list-style-type: none; }

.lst-kix_pmwlevr2di06-8 > li::before { content: "■  "; }

ol.lst-kix_oiuz0iy372u2-6 { list-style-type: none; }

ol.lst-kix_oiuz0iy372u2-7 { list-style-type: none; }

ol.lst-kix_oiuz0iy372u2-8 { list-style-type: none; }

.lst-kix_t1ql394g7cq6-4 > li { counter-increment: lst-ctn-kix_t1ql394g7cq6-4 1; }

ul.lst-kix_m4p7szoqaqik-8 { list-style-type: none; }

.lst-kix_zgiykejnxm8t-6 > li::before { content: "●  "; }

.lst-kix_pmwlevr2di06-6 > li::before { content: "●  "; }

.lst-kix_620io0vozd8n-4 > li::before { content: "○  "; }

.lst-kix_620io0vozd8n-6 > li::before { content: "●  "; }

.lst-kix_572earllcbds-1 > li::before { content: "" counter(lst-ctn-kix_572earllcbds-1, lower-latin) ". "; }

ol.lst-kix_oiuz0iy372u2-0 { list-style-type: none; }

ol.lst-kix_oiuz0iy372u2-1 { list-style-type: none; }

ol.lst-kix_oiuz0iy372u2-2 { list-style-type: none; }

.lst-kix_dcv7ib5lvp4v-0 > li { counter-increment: lst-ctn-kix_dcv7ib5lvp4v-0 1; }

ol.lst-kix_oiuz0iy372u2-3 { list-style-type: none; }

ol.lst-kix_oiuz0iy372u2-4 { list-style-type: none; }

.lst-kix_3ho157wy3jxf-7 > li { counter-increment: lst-ctn-kix_3ho157wy3jxf-7 1; }

.lst-kix_rrld09yo0z41-2 > li::before { content: "" counter(lst-ctn-kix_rrld09yo0z41-2, lower-roman) ". "; }

.lst-kix_572earllcbds-3 > li::before { content: "" counter(lst-ctn-kix_572earllcbds-3) ". "; }

.lst-kix_mnp305eqj1wg-8 > li::before { content: "" counter(lst-ctn-kix_mnp305eqj1wg-8, lower-roman) ". "; }

ul.lst-kix_m4p7szoqaqik-4 { list-style-type: none; }

.lst-kix_rrld09yo0z41-4 > li::before { content: "" counter(lst-ctn-kix_rrld09yo0z41-4, lower-latin) ". "; }

ul.lst-kix_m4p7szoqaqik-5 { list-style-type: none; }

ul.lst-kix_m4p7szoqaqik-6 { list-style-type: none; }

ul.lst-kix_m4p7szoqaqik-7 { list-style-type: none; }

ul.lst-kix_m4p7szoqaqik-0 { list-style-type: none; }

ul.lst-kix_m4p7szoqaqik-1 { list-style-type: none; }

.lst-kix_gn9iznjyvy0-4 > li { counter-increment: lst-ctn-kix_gn9iznjyvy0-4 1; }

ul.lst-kix_m4p7szoqaqik-2 { list-style-type: none; }

ul.lst-kix_m4p7szoqaqik-3 { list-style-type: none; }

.lst-kix_t1ql394g7cq6-5 > li::before { content: "" counter(lst-ctn-kix_t1ql394g7cq6-5, lower-roman) ". "; }

.lst-kix_t1ql394g7cq6-7 > li::before { content: "" counter(lst-ctn-kix_t1ql394g7cq6-7, lower-latin) ". "; }

.lst-kix_t1ql394g7cq6-8 > li { counter-increment: lst-ctn-kix_t1ql394g7cq6-8 1; }

.lst-kix_gpfkle35f9g6-0 > li::before { content: "" counter(lst-ctn-kix_gpfkle35f9g6-0) ". "; }

.lst-kix_27lagi0g2vk-4 > li::before { content: "○  "; }

.lst-kix_3oqw8rm66zow-1 > li::before { content: "○  "; }

.lst-kix_uqyylbhn1m4k-1 > li::before { content: "" counter(lst-ctn-kix_uqyylbhn1m4k-1, lower-latin) ". "; }

.lst-kix_ljmndakz6mcr-8 > li { counter-increment: lst-ctn-kix_ljmndakz6mcr-8 1; }

ol.lst-kix_pwbhslrd67om-8 { list-style-type: none; }

.lst-kix_mnp305eqj1wg-2 > li::before { content: "" counter(lst-ctn-kix_mnp305eqj1wg-2, lower-roman) ". "; }

.lst-kix_27lagi0g2vk-6 > li::before { content: "●  "; }

.lst-kix_3oqw8rm66zow-3 > li::before { content: "●  "; }

.lst-kix_b4yhtr5n7hga-4 > li { counter-increment: lst-ctn-kix_b4yhtr5n7hga-4 1; }

.lst-kix_mnp305eqj1wg-0 > li::before { content: "" counter(lst-ctn-kix_mnp305eqj1wg-0) ". "; }

ol.lst-kix_pwbhslrd67om-3 { list-style-type: none; }

ol.lst-kix_pwbhslrd67om-2 { list-style-type: none; }

ol.lst-kix_pwbhslrd67om-1 { list-style-type: none; }

ol.lst-kix_pwbhslrd67om-0 { list-style-type: none; }

ol.lst-kix_pwbhslrd67om-7 { list-style-type: none; }

ol.lst-kix_pwbhslrd67om-6 { list-style-type: none; }

ol.lst-kix_pwbhslrd67om-5 { list-style-type: none; }

ol.lst-kix_pwbhslrd67om-4 { list-style-type: none; }

ol.lst-kix_nqdkqsc3oqx4-5.start { counter-reset: lst-ctn-kix_nqdkqsc3oqx4-5 0; }

.lst-kix_okhvdbx9vxjx-5 > li::before { content: "" counter(lst-ctn-kix_okhvdbx9vxjx-5, lower-roman) ". "; }

.lst-kix_xc5d5ew3cd2w-2 > li::before { content: "" counter(lst-ctn-kix_xc5d5ew3cd2w-2, lower-roman) ". "; }

.lst-kix_okhvdbx9vxjx-3 > li::before { content: "" counter(lst-ctn-kix_okhvdbx9vxjx-3) ". "; }

.lst-kix_xc5d5ew3cd2w-0 > li::before { content: "" counter(lst-ctn-kix_xc5d5ew3cd2w-0) ". "; }

.lst-kix_t1ql394g7cq6-1 > li { counter-increment: lst-ctn-kix_t1ql394g7cq6-1 1; }

.lst-kix_fcu0owu0u5lm-5 > li::before { content: "" counter(lst-ctn-kix_fcu0owu0u5lm-5, lower-roman) ". "; }

.lst-kix_w9tqx4187f4c-4 > li { counter-increment: lst-ctn-kix_w9tqx4187f4c-4 1; }

.lst-kix_fcu0owu0u5lm-7 > li::before { content: "" counter(lst-ctn-kix_fcu0owu0u5lm-7, lower-latin) ". "; }

.lst-kix_q9wm09yqvpbs-0 > li { counter-increment: lst-ctn-kix_q9wm09yqvpbs-0 1; }

.lst-kix_ljmndakz6mcr-4 > li::before { content: "" counter(lst-ctn-kix_ljmndakz6mcr-4, lower-latin) ". "; }

.lst-kix_ckxnb6vf7vme-3 > li { counter-increment: lst-ctn-kix_ckxnb6vf7vme-3 1; }

.lst-kix_ey0jmq1tgbhn-2 > li { counter-increment: lst-ctn-kix_ey0jmq1tgbhn-2 1; }

.lst-kix_ljmndakz6mcr-6 > li::before { content: "" counter(lst-ctn-kix_ljmndakz6mcr-6) ". "; }

ol.lst-kix_habx6bj0olf7-7.start { counter-reset: lst-ctn-kix_habx6bj0olf7-7 0; }

ol.lst-kix_nqdkqsc3oqx4-0 { list-style-type: none; }

ol.lst-kix_nqdkqsc3oqx4-1 { list-style-type: none; }

ol.lst-kix_nqdkqsc3oqx4-2 { list-style-type: none; }

ol.lst-kix_nqdkqsc3oqx4-3 { list-style-type: none; }

ol.lst-kix_nqdkqsc3oqx4-4 { list-style-type: none; }

ol.lst-kix_nqdkqsc3oqx4-5 { list-style-type: none; }

ol.lst-kix_nqdkqsc3oqx4-6 { list-style-type: none; }

.lst-kix_s9tg2x8dz8yw-2 > li::before { content: "" counter(lst-ctn-kix_s9tg2x8dz8yw-2, lower-roman) ". "; }

ol.lst-kix_nqdkqsc3oqx4-7 { list-style-type: none; }

ol.lst-kix_nqdkqsc3oqx4-8 { list-style-type: none; }

ol.lst-kix_3ho157wy3jxf-8.start { counter-reset: lst-ctn-kix_3ho157wy3jxf-8 0; }

ol.lst-kix_m7gyp3gged0c-5.start { counter-reset: lst-ctn-kix_m7gyp3gged0c-5 0; }

.lst-kix_m3mg1m14r0ox-8 > li { counter-increment: lst-ctn-kix_m3mg1m14r0ox-8 1; }

.lst-kix_b4yhtr5n7hga-8 > li { counter-increment: lst-ctn-kix_b4yhtr5n7hga-8 1; }

.lst-kix_s9tg2x8dz8yw-0 > li::before { content: "" counter(lst-ctn-kix_s9tg2x8dz8yw-0) ". "; }

.lst-kix_igutqwst0xn-4 > li::before { content: "○  "; }

.lst-kix_m3mg1m14r0ox-1 > li { counter-increment: lst-ctn-kix_m3mg1m14r0ox-1 1; }

.lst-kix_vwmkmidzq0q1-7 > li { counter-increment: lst-ctn-kix_vwmkmidzq0q1-7 1; }

.lst-kix_3ho157wy3jxf-0 > li { counter-increment: lst-ctn-kix_3ho157wy3jxf-0 1; }

.lst-kix_igutqwst0xn-6 > li::before { content: "●  "; }

.lst-kix_oiuz0iy372u2-2 > li { counter-increment: lst-ctn-kix_oiuz0iy372u2-2 1; }

.lst-kix_okhvdbx9vxjx-1 > li { counter-increment: lst-ctn-kix_okhvdbx9vxjx-1 1; }

.lst-kix_3ho157wy3jxf-5 > li::before { content: "" counter(lst-ctn-kix_3ho157wy3jxf-5, lower-roman) ". "; }

.lst-kix_o0kdhzzdksr6-3 > li::before { content: "●  "; }

.lst-kix_q26h1rehak49-5 > li::before { content: "■  "; }

.lst-kix_s9tg2x8dz8yw-8 > li::before { content: "" counter(lst-ctn-kix_s9tg2x8dz8yw-8, lower-roman) ". "; }

.lst-kix_3ho157wy3jxf-7 > li::before { content: "" counter(lst-ctn-kix_3ho157wy3jxf-7, lower-latin) ". "; }

.lst-kix_o0kdhzzdksr6-5 > li::before { content: "■  "; }

.lst-kix_q26h1rehak49-3 > li::before { content: "●  "; }

ol.lst-kix_3ho157wy3jxf-6.start { counter-reset: lst-ctn-kix_3ho157wy3jxf-6 0; }

ol.lst-kix_w9tqx4187f4c-7.start { counter-reset: lst-ctn-kix_w9tqx4187f4c-7 0; }

ol.lst-kix_ljmndakz6mcr-7.start { counter-reset: lst-ctn-kix_ljmndakz6mcr-7 0; }

ol.lst-kix_mnp305eqj1wg-0.start { counter-reset: lst-ctn-kix_mnp305eqj1wg-0 0; }

.lst-kix_xrj1sdkp3cni-2 > li { counter-increment: lst-ctn-kix_xrj1sdkp3cni-2 1; }

.lst-kix_bvmitnb5swh8-1 > li { counter-increment: lst-ctn-kix_bvmitnb5swh8-1 1; }

.lst-kix_xrj1sdkp3cni-0 > li::before { content: "" counter(lst-ctn-kix_xrj1sdkp3cni-0) ". "; }

.lst-kix_q9wm09yqvpbs-3 > li::before { content: "" counter(lst-ctn-kix_q9wm09yqvpbs-3) ". "; }

.lst-kix_lcuwlsa6z8uz-0 > li::before { content: "" counter(lst-ctn-kix_lcuwlsa6z8uz-0) ". "; }

.lst-kix_pwbhslrd67om-4 > li { counter-increment: lst-ctn-kix_pwbhslrd67om-4 1; }

.lst-kix_3ndwxni7n3wv-0 > li { counter-increment: lst-ctn-kix_3ndwxni7n3wv-0 1; }

.lst-kix_ey0jmq1tgbhn-1 > li::before { content: "" counter(lst-ctn-kix_ey0jmq1tgbhn-1, lower-latin) ". "; }

.lst-kix_c7313u9pplkk-6 > li { counter-increment: lst-ctn-kix_c7313u9pplkk-6 1; }

.lst-kix_ckxnb6vf7vme-0 > li::before { content: "" counter(lst-ctn-kix_ckxnb6vf7vme-0) ". "; }

.lst-kix_ckxnb6vf7vme-8 > li::before { content: "" counter(lst-ctn-kix_ckxnb6vf7vme-8, lower-roman) ". "; }

.lst-kix_sq2mty8y4cla-3 > li::before { content: "" counter(lst-ctn-kix_sq2mty8y4cla-3) ". "; }

.lst-kix_j5huq76pqetk-8 > li::before { content: "" counter(lst-ctn-kix_j5huq76pqetk-8, lower-roman) ". "; }

ol.lst-kix_bseh3kjlzqme-6.start { counter-reset: lst-ctn-kix_bseh3kjlzqme-6 0; }

ol.lst-kix_ey0jmq1tgbhn-1.start { counter-reset: lst-ctn-kix_ey0jmq1tgbhn-1 0; }

ol.lst-kix_fcu0owu0u5lm-3.start { counter-reset: lst-ctn-kix_fcu0owu0u5lm-3 0; }

.lst-kix_sq2mty8y4cla-4 > li { counter-increment: lst-ctn-kix_sq2mty8y4cla-4 1; }

.lst-kix_5s16jregg8d-4 > li::before { content: "○  "; }

ol.lst-kix_l80e6xnoww9k-5.start { counter-reset: lst-ctn-kix_l80e6xnoww9k-5 0; }

.lst-kix_j5huq76pqetk-0 > li::before { content: "" counter(lst-ctn-kix_j5huq76pqetk-0) ". "; }

ol.lst-kix_ljmndakz6mcr-2.start { counter-reset: lst-ctn-kix_ljmndakz6mcr-2 0; }

.lst-kix_ruhin6837alc-2 > li { counter-increment: lst-ctn-kix_ruhin6837alc-2 1; }

.lst-kix_3ndwxni7n3wv-5 > li::before { content: "" counter(lst-ctn-kix_3ndwxni7n3wv-5, lower-roman) ". "; }

ol.lst-kix_w9tqx4187f4c-2.start { counter-reset: lst-ctn-kix_w9tqx4187f4c-2 0; }

ol.lst-kix_vwmkmidzq0q1-3 { list-style-type: none; }

ol.lst-kix_vwmkmidzq0q1-4 { list-style-type: none; }

ol.lst-kix_vwmkmidzq0q1-5 { list-style-type: none; }

.lst-kix_w9tqx4187f4c-7 > li::before { content: "" counter(lst-ctn-kix_w9tqx4187f4c-7, lower-latin) ". "; }

ol.lst-kix_vwmkmidzq0q1-6 { list-style-type: none; }

.lst-kix_3mskaxtv1nar-2 > li::before { content: "■  "; }

ol.lst-kix_vwmkmidzq0q1-0 { list-style-type: none; }

.lst-kix_oiuz0iy372u2-5 > li::before { content: "" counter(lst-ctn-kix_oiuz0iy372u2-5, lower-roman) ". "; }

ol.lst-kix_vwmkmidzq0q1-1 { list-style-type: none; }

ol.lst-kix_vwmkmidzq0q1-2 { list-style-type: none; }

ol.lst-kix_fcu0owu0u5lm-8.start { counter-reset: lst-ctn-kix_fcu0owu0u5lm-8 0; }

ol.lst-kix_nqdkqsc3oqx4-0.start { counter-reset: lst-ctn-kix_nqdkqsc3oqx4-0 0; }

.lst-kix_w4jnjjd4slk1-1 > li { counter-increment: lst-ctn-kix_w4jnjjd4slk1-1 1; }

.lst-kix_pwbhslrd67om-8 > li { counter-increment: lst-ctn-kix_pwbhslrd67om-8 1; }

.lst-kix_10q7n546cbqj-2 > li::before { content: "" counter(lst-ctn-kix_10q7n546cbqj-2, lower-roman) ". "; }

ol.lst-kix_vwmkmidzq0q1-7 { list-style-type: none; }

.lst-kix_q3b8r3xg1qkx-4 > li { counter-increment: lst-ctn-kix_q3b8r3xg1qkx-4 1; }

ol.lst-kix_vwmkmidzq0q1-8 { list-style-type: none; }

.lst-kix_pwbhslrd67om-2 > li::before { content: "" counter(lst-ctn-kix_pwbhslrd67om-2, lower-roman) ". "; }

.lst-kix_l80e6xnoww9k-6 > li { counter-increment: lst-ctn-kix_l80e6xnoww9k-6 1; }

ol.lst-kix_q3b8r3xg1qkx-6 { list-style-type: none; }

.lst-kix_m7gyp3gged0c-1 > li { counter-increment: lst-ctn-kix_m7gyp3gged0c-1 1; }

ol.lst-kix_q3b8r3xg1qkx-7 { list-style-type: none; }

ol.lst-kix_q3b8r3xg1qkx-8 { list-style-type: none; }

ol.lst-kix_q3b8r3xg1qkx-2 { list-style-type: none; }

ol.lst-kix_ruhin6837alc-2.start { counter-reset: lst-ctn-kix_ruhin6837alc-2 0; }

.lst-kix_xqezlaka82l9-7 > li::before { content: "" counter(lst-ctn-kix_xqezlaka82l9-7, lower-latin) ". "; }

ol.lst-kix_q3b8r3xg1qkx-3 { list-style-type: none; }

ol.lst-kix_q3b8r3xg1qkx-4 { list-style-type: none; }

ol.lst-kix_q3b8r3xg1qkx-5 { list-style-type: none; }

.lst-kix_r9g9j9mj19b1-5 > li::before { content: "■  "; }

.lst-kix_ljmndakz6mcr-5 > li { counter-increment: lst-ctn-kix_ljmndakz6mcr-5 1; }

.lst-kix_kb150t1bns3n-1 > li::before { content: "○  "; }

.lst-kix_brzd8bm9vgv1-7 > li::before { content: "○  "; }

ol.lst-kix_3ho157wy3jxf-3.start { counter-reset: lst-ctn-kix_3ho157wy3jxf-3 0; }

.lst-kix_b4yhtr5n7hga-1 > li { counter-increment: lst-ctn-kix_b4yhtr5n7hga-1 1; }

ol.lst-kix_t1ql394g7cq6-8.start { counter-reset: lst-ctn-kix_t1ql394g7cq6-8 0; }

.lst-kix_xrj1sdkp3cni-8 > li::before { content: "" counter(lst-ctn-kix_xrj1sdkp3cni-8, lower-roman) ". "; }

.lst-kix_lcuwlsa6z8uz-8 > li::before { content: "" counter(lst-ctn-kix_lcuwlsa6z8uz-8, lower-roman) ". "; }

.lst-kix_85dwzw7kxv5h-7 > li::before { content: "" counter(lst-ctn-kix_85dwzw7kxv5h-7, lower-latin) ". "; }

.lst-kix_yt60ymksdnh5-2 > li::before { content: "" counter(lst-ctn-kix_yt60ymksdnh5-2, lower-roman) ". "; }

ol.lst-kix_bseh3kjlzqme-7.start { counter-reset: lst-ctn-kix_bseh3kjlzqme-7 0; }

.lst-kix_re52shiykht8-3 > li::before { content: "●  "; }

ol.lst-kix_q3b8r3xg1qkx-0 { list-style-type: none; }

ol.lst-kix_q3b8r3xg1qkx-1 { list-style-type: none; }

.lst-kix_3yaj3fyh3cgu-7 > li::before { content: "○  "; }

ol.lst-kix_fcu0owu0u5lm-2.start { counter-reset: lst-ctn-kix_fcu0owu0u5lm-2 0; }

ol.lst-kix_w9tqx4187f4c-1.start { counter-reset: lst-ctn-kix_w9tqx4187f4c-1 0; }

.lst-kix_utdw00xskxog-0 > li::before { content: "●  "; }

.lst-kix_xc5d5ew3cd2w-8 > li::before { content: "" counter(lst-ctn-kix_xc5d5ew3cd2w-8, lower-roman) ". "; }

.lst-kix_3ho157wy3jxf-4 > li { counter-increment: lst-ctn-kix_3ho157wy3jxf-4 1; }

.lst-kix_okhvdbx9vxjx-4 > li { counter-increment: lst-ctn-kix_okhvdbx9vxjx-4 1; }

.lst-kix_ksgcgd9whg8s-6 > li { counter-increment: lst-ctn-kix_ksgcgd9whg8s-6 1; }

.lst-kix_gn9iznjyvy0-7 > li { counter-increment: lst-ctn-kix_gn9iznjyvy0-7 1; }

.lst-kix_utdw00xskxog-8 > li::before { content: "■  "; }

.lst-kix_9r3d8uancgeq-8 > li::before { content: "■  "; }

.lst-kix_m7gyp3gged0c-8 > li { counter-increment: lst-ctn-kix_m7gyp3gged0c-8 1; }

.lst-kix_m3mg1m14r0ox-2 > li::before { content: "" counter(lst-ctn-kix_m3mg1m14r0ox-2, lower-roman) ". "; }

.lst-kix_yt60ymksdnh5-2 > li { counter-increment: lst-ctn-kix_yt60ymksdnh5-2 1; }

.lst-kix_ksgcgd9whg8s-1 > li::before { content: "" counter(lst-ctn-kix_ksgcgd9whg8s-1, lower-latin) ". "; }

.lst-kix_5270cv8i6nuv-7 > li::before { content: "" counter(lst-ctn-kix_5270cv8i6nuv-7, lower-latin) ". "; }

.lst-kix_tj22yequgne3-4 > li::before { content: "" counter(lst-ctn-kix_tj22yequgne3-4, lower-latin) ". "; }

.lst-kix_3ndwxni7n3wv-7 > li { counter-increment: lst-ctn-kix_3ndwxni7n3wv-7 1; }

ol.lst-kix_fcu0owu0u5lm-7.start { counter-reset: lst-ctn-kix_fcu0owu0u5lm-7 0; }

.lst-kix_olo1v9h26sum-3 > li::before { content: "●  "; }

.lst-kix_rrld09yo0z41-5 > li { counter-increment: lst-ctn-kix_rrld09yo0z41-5 1; }

.lst-kix_69cgk215qz5l-1 > li::before { content: "○  "; }

.lst-kix_uqyylbhn1m4k-7 > li::before { content: "" counter(lst-ctn-kix_uqyylbhn1m4k-7, lower-latin) ". "; }

.lst-kix_nkn9z5o9q292-2 > li::before { content: "■  "; }

ol.lst-kix_ruhin6837alc-7.start { counter-reset: lst-ctn-kix_ruhin6837alc-7 0; }

.lst-kix_w4jnjjd4slk1-8 > li { counter-increment: lst-ctn-kix_w4jnjjd4slk1-8 1; }

.lst-kix_ruhin6837alc-6 > li::before { content: "" counter(lst-ctn-kix_ruhin6837alc-6) ". "; }

ul.lst-kix_3oqw8rm66zow-4 { list-style-type: none; }

ul.lst-kix_3oqw8rm66zow-5 { list-style-type: none; }

ul.lst-kix_sfybiz7pn3rx-8 { list-style-type: none; }

ul.lst-kix_3oqw8rm66zow-6 { list-style-type: none; }

ul.lst-kix_3oqw8rm66zow-7 { list-style-type: none; }

.lst-kix_c1i5n6q7z3d-2 > li::before { content: "■  "; }

ul.lst-kix_3oqw8rm66zow-0 { list-style-type: none; }

ul.lst-kix_3oqw8rm66zow-1 { list-style-type: none; }

ul.lst-kix_3oqw8rm66zow-2 { list-style-type: none; }

ul.lst-kix_3oqw8rm66zow-3 { list-style-type: none; }

ul.lst-kix_sfybiz7pn3rx-2 { list-style-type: none; }

ul.lst-kix_sfybiz7pn3rx-3 { list-style-type: none; }

ul.lst-kix_sfybiz7pn3rx-0 { list-style-type: none; }

ul.lst-kix_sfybiz7pn3rx-1 { list-style-type: none; }

ul.lst-kix_sfybiz7pn3rx-6 { list-style-type: none; }

ol.lst-kix_m7gyp3gged0c-2.start { counter-reset: lst-ctn-kix_m7gyp3gged0c-2 0; }

ul.lst-kix_3oqw8rm66zow-8 { list-style-type: none; }

ul.lst-kix_sfybiz7pn3rx-7 { list-style-type: none; }

.lst-kix_nit8j66s93ag-7 > li::before { content: "○  "; }

ul.lst-kix_sfybiz7pn3rx-4 { list-style-type: none; }

ul.lst-kix_sfybiz7pn3rx-5 { list-style-type: none; }

.lst-kix_xrj1sdkp3cni-6 > li { counter-increment: lst-ctn-kix_xrj1sdkp3cni-6 1; }

.lst-kix_bseh3kjlzqme-2 > li::before { content: "" counter(lst-ctn-kix_bseh3kjlzqme-2, lower-roman) ". "; }

.lst-kix_bseh3kjlzqme-6 > li { counter-increment: lst-ctn-kix_bseh3kjlzqme-6 1; }

.lst-kix_q9wm09yqvpbs-4 > li { counter-increment: lst-ctn-kix_q9wm09yqvpbs-4 1; }

.lst-kix_vwmkmidzq0q1-4 > li::before { content: "" counter(lst-ctn-kix_vwmkmidzq0q1-4, lower-latin) ". "; }

.lst-kix_55mhn1ecd8zq-5 > li::before { content: "■  "; }

.lst-kix_c7313u9pplkk-3 > li { counter-increment: lst-ctn-kix_c7313u9pplkk-3 1; }

.lst-kix_nqdkqsc3oqx4-2 > li { counter-increment: lst-ctn-kix_nqdkqsc3oqx4-2 1; }

.lst-kix_ekvfn9dhk9qx-0 > li::before { content: "●  "; }

.lst-kix_ekvfn9dhk9qx-8 > li::before { content: "■  "; }

.lst-kix_q3b8r3xg1qkx-2 > li::before { content: "" counter(lst-ctn-kix_q3b8r3xg1qkx-2, lower-roman) ". "; }

ol.lst-kix_m7gyp3gged0c-0.start { counter-reset: lst-ctn-kix_m7gyp3gged0c-0 0; }

.lst-kix_gzdu38n4pxir-6 > li::before { content: "" counter(lst-ctn-kix_gzdu38n4pxir-6) ". "; }

.lst-kix_pmwlevr2di06-0 > li::before { content: "●  "; }

.lst-kix_15r02pw2hvsa-1 > li::before { content: "○  "; }

.lst-kix_5namkmhqnfpl-7 > li::before { content: "○  "; }

.lst-kix_sfybiz7pn3rx-2 > li::before { content: "■  "; }

.lst-kix_xqezlaka82l9-3 > li { counter-increment: lst-ctn-kix_xqezlaka82l9-3 1; }

.lst-kix_pwbhslrd67om-1 > li { counter-increment: lst-ctn-kix_pwbhslrd67om-1 1; }

.lst-kix_8e86lum2i6eo-1 > li::before { content: "○  "; }

.lst-kix_sijhq5esqs8x-7 > li::before { content: "○  "; }

ol.lst-kix_fcu0owu0u5lm-5.start { counter-reset: lst-ctn-kix_fcu0owu0u5lm-5 0; }

ol.lst-kix_l80e6xnoww9k-0.start { counter-reset: lst-ctn-kix_l80e6xnoww9k-0 0; }

ol.lst-kix_bvmitnb5swh8-0 { list-style-type: none; }

ol.lst-kix_bvmitnb5swh8-1 { list-style-type: none; }

ol.lst-kix_bvmitnb5swh8-4 { list-style-type: none; }

ol.lst-kix_bvmitnb5swh8-5 { list-style-type: none; }

ol.lst-kix_bvmitnb5swh8-2 { list-style-type: none; }

ol.lst-kix_bvmitnb5swh8-3 { list-style-type: none; }

ol.lst-kix_bvmitnb5swh8-8 { list-style-type: none; }

.lst-kix_e1iec80scof-3 > li::before { content: "●  "; }

ol.lst-kix_bvmitnb5swh8-6 { list-style-type: none; }

.lst-kix_olegludlmu4-3 > li::before { content: "●  "; }

ol.lst-kix_bvmitnb5swh8-7 { list-style-type: none; }

.lst-kix_j5huq76pqetk-6 > li { counter-increment: lst-ctn-kix_j5huq76pqetk-6 1; }

.lst-kix_uqyylbhn1m4k-4 > li { counter-increment: lst-ctn-kix_uqyylbhn1m4k-4 1; }

.lst-kix_9r3d8uancgeq-0 > li::before { content: "●  "; }

.lst-kix_f9adxqm8wtcr-6 > li::before { content: "●  "; }

ol.lst-kix_ruhin6837alc-5.start { counter-reset: lst-ctn-kix_ruhin6837alc-5 0; }

.lst-kix_gn9iznjyvy0-0 > li::before { content: "" counter(lst-ctn-kix_gn9iznjyvy0-0) ". "; }

.lst-kix_b4yhtr5n7hga-2 > li { counter-increment: lst-ctn-kix_b4yhtr5n7hga-2 1; }

.lst-kix_s9tg2x8dz8yw-7 > li { counter-increment: lst-ctn-kix_s9tg2x8dz8yw-7 1; }

.lst-kix_gpfkle35f9g6-1 > li { counter-increment: lst-ctn-kix_gpfkle35f9g6-1 1; }

.lst-kix_xrj1sdkp3cni-1 > li { counter-increment: lst-ctn-kix_xrj1sdkp3cni-1 1; }

ol.lst-kix_c7313u9pplkk-1.start { counter-reset: lst-ctn-kix_c7313u9pplkk-1 0; }

ol.lst-kix_tj22yequgne3-0.start { counter-reset: lst-ctn-kix_tj22yequgne3-0 0; }

.lst-kix_w4jnjjd4slk1-4 > li { counter-increment: lst-ctn-kix_w4jnjjd4slk1-4 1; }

ol.lst-kix_10q7n546cbqj-5.start { counter-reset: lst-ctn-kix_10q7n546cbqj-5 0; }

ol.lst-kix_lcuwlsa6z8uz-1 { list-style-type: none; }

ol.lst-kix_lcuwlsa6z8uz-2 { list-style-type: none; }

.lst-kix_w4jnjjd4slk1-3 > li::before { content: "" counter(lst-ctn-kix_w4jnjjd4slk1-3) ". "; }

.lst-kix_w4jnjjd4slk1-4 > li::before { content: "" counter(lst-ctn-kix_w4jnjjd4slk1-4, lower-latin) ". "; }

.lst-kix_o2mt2qmw9cun-0 > li::before { content: "●  "; }

.lst-kix_u8xk64vks6c8-0 > li::before { content: "●  "; }

ol.lst-kix_lcuwlsa6z8uz-0 { list-style-type: none; }

ol.lst-kix_lcuwlsa6z8uz-5 { list-style-type: none; }

ol.lst-kix_lcuwlsa6z8uz-6 { list-style-type: none; }

ol.lst-kix_lcuwlsa6z8uz-3 { list-style-type: none; }

ol.lst-kix_gn9iznjyvy0-1.start { counter-reset: lst-ctn-kix_gn9iznjyvy0-1 0; }

ol.lst-kix_lcuwlsa6z8uz-4 { list-style-type: none; }

.lst-kix_u8xk64vks6c8-3 > li::before { content: "●  "; }

.lst-kix_w4jnjjd4slk1-7 > li::before { content: "" counter(lst-ctn-kix_w4jnjjd4slk1-7, lower-latin) ". "; }

.lst-kix_habx6bj0olf7-8 > li { counter-increment: lst-ctn-kix_habx6bj0olf7-8 1; }

.lst-kix_u8xk64vks6c8-4 > li::before { content: "○  "; }

ol.lst-kix_lcuwlsa6z8uz-7 { list-style-type: none; }

ol.lst-kix_lcuwlsa6z8uz-8 { list-style-type: none; }

.lst-kix_w4jnjjd4slk1-6 > li::before { content: "" counter(lst-ctn-kix_w4jnjjd4slk1-6) ". "; }

.lst-kix_o2mt2qmw9cun-1 > li::before { content: "○  "; }

.lst-kix_gzdu38n4pxir-3 > li { counter-increment: lst-ctn-kix_gzdu38n4pxir-3 1; }

.lst-kix_5270cv8i6nuv-0 > li { counter-increment: lst-ctn-kix_5270cv8i6nuv-0 1; }

ol.lst-kix_j5huq76pqetk-8.start { counter-reset: lst-ctn-kix_j5huq76pqetk-8 0; }

.lst-kix_o2mt2qmw9cun-7 > li::before { content: "○  "; }

ol.lst-kix_m3mg1m14r0ox-5.start { counter-reset: lst-ctn-kix_m3mg1m14r0ox-5 0; }

.lst-kix_ey0jmq1tgbhn-7 > li { counter-increment: lst-ctn-kix_ey0jmq1tgbhn-7 1; }

.lst-kix_o2mt2qmw9cun-4 > li::before { content: "○  "; }

ol.lst-kix_mnp305eqj1wg-8.start { counter-reset: lst-ctn-kix_mnp305eqj1wg-8 0; }

.lst-kix_m3mg1m14r0ox-6 > li { counter-increment: lst-ctn-kix_m3mg1m14r0ox-6 1; }

.lst-kix_lcuwlsa6z8uz-5 > li { counter-increment: lst-ctn-kix_lcuwlsa6z8uz-5 1; }

.lst-kix_w4jnjjd4slk1-0 > li::before { content: "" counter(lst-ctn-kix_w4jnjjd4slk1-0) ". "; }

ol.lst-kix_10q7n546cbqj-0.start { counter-reset: lst-ctn-kix_10q7n546cbqj-0 0; }

.lst-kix_w4jnjjd4slk1-1 > li::before { content: "" counter(lst-ctn-kix_w4jnjjd4slk1-1, lower-latin) ". "; }

.lst-kix_e6809g41048l-4 > li::before { content: "○  "; }

ul.lst-kix_r9g9j9mj19b1-3 { list-style-type: none; }

.lst-kix_j5huq76pqetk-8 > li { counter-increment: lst-ctn-kix_j5huq76pqetk-8 1; }

ul.lst-kix_r9g9j9mj19b1-4 { list-style-type: none; }

ul.lst-kix_r9g9j9mj19b1-1 { list-style-type: none; }

ul.lst-kix_r9g9j9mj19b1-2 { list-style-type: none; }

ol.lst-kix_vwmkmidzq0q1-8.start { counter-reset: lst-ctn-kix_vwmkmidzq0q1-8 0; }

.lst-kix_e6809g41048l-3 > li::before { content: "●  "; }

ul.lst-kix_r9g9j9mj19b1-0 { list-style-type: none; }

.lst-kix_e6809g41048l-1 > li::before { content: "○  "; }

.lst-kix_q9wm09yqvpbs-5 > li { counter-increment: lst-ctn-kix_q9wm09yqvpbs-5 1; }

ol.lst-kix_ljmndakz6mcr-1 { list-style-type: none; }

ol.lst-kix_ljmndakz6mcr-0 { list-style-type: none; }

ol.lst-kix_ljmndakz6mcr-3 { list-style-type: none; }

ol.lst-kix_ljmndakz6mcr-2 { list-style-type: none; }

.lst-kix_e6809g41048l-0 > li::before { content: "●  "; }

ol.lst-kix_ljmndakz6mcr-5 { list-style-type: none; }

ol.lst-kix_ljmndakz6mcr-4 { list-style-type: none; }

ul.lst-kix_u8xk64vks6c8-1 { list-style-type: none; }

ol.lst-kix_ljmndakz6mcr-7 { list-style-type: none; }

ul.lst-kix_u8xk64vks6c8-0 { list-style-type: none; }

ol.lst-kix_ljmndakz6mcr-6 { list-style-type: none; }

ul.lst-kix_u8xk64vks6c8-3 { list-style-type: none; }

ul.lst-kix_u8xk64vks6c8-2 { list-style-type: none; }

ol.lst-kix_ljmndakz6mcr-8 { list-style-type: none; }

ol.lst-kix_yt60ymksdnh5-8.start { counter-reset: lst-ctn-kix_yt60ymksdnh5-8 0; }

ul.lst-kix_u8xk64vks6c8-5 { list-style-type: none; }

ul.lst-kix_u8xk64vks6c8-4 { list-style-type: none; }

ul.lst-kix_u8xk64vks6c8-7 { list-style-type: none; }

ul.lst-kix_u8xk64vks6c8-6 { list-style-type: none; }

ul.lst-kix_u8xk64vks6c8-8 { list-style-type: none; }

ol.lst-kix_mnp305eqj1wg-3.start { counter-reset: lst-ctn-kix_mnp305eqj1wg-3 0; }

ol.lst-kix_m3mg1m14r0ox-0.start { counter-reset: lst-ctn-kix_m3mg1m14r0ox-0 0; }

.lst-kix_vwmkmidzq0q1-8 > li { counter-increment: lst-ctn-kix_vwmkmidzq0q1-8 1; }

.lst-kix_5270cv8i6nuv-2 > li::before { content: "" counter(lst-ctn-kix_5270cv8i6nuv-2, lower-roman) ". "; }

ol.lst-kix_l80e6xnoww9k-4.start { counter-reset: lst-ctn-kix_l80e6xnoww9k-4 0; }

ol.lst-kix_m7gyp3gged0c-8 { list-style-type: none; }

.lst-kix_xc5d5ew3cd2w-2 > li { counter-increment: lst-ctn-kix_xc5d5ew3cd2w-2 1; }

ol.lst-kix_xqezlaka82l9-7.start { counter-reset: lst-ctn-kix_xqezlaka82l9-7 0; }

ol.lst-kix_m7gyp3gged0c-6 { list-style-type: none; }

ol.lst-kix_m7gyp3gged0c-7 { list-style-type: none; }

.lst-kix_utdw00xskxog-1 > li::before { content: "○  "; }

.lst-kix_5270cv8i6nuv-4 > li::before { content: "" counter(lst-ctn-kix_5270cv8i6nuv-4, lower-latin) ". "; }

ol.lst-kix_ksgcgd9whg8s-4.start { counter-reset: lst-ctn-kix_ksgcgd9whg8s-4 0; }

ul.lst-kix_9r3d8uancgeq-3 { list-style-type: none; }

ul.lst-kix_9r3d8uancgeq-4 { list-style-type: none; }

ul.lst-kix_9r3d8uancgeq-1 { list-style-type: none; }

ul.lst-kix_9r3d8uancgeq-2 { list-style-type: none; }

.lst-kix_utdw00xskxog-7 > li::before { content: "○  "; }

ul.lst-kix_9r3d8uancgeq-0 { list-style-type: none; }

ol.lst-kix_m7gyp3gged0c-4 { list-style-type: none; }

ol.lst-kix_m7gyp3gged0c-5 { list-style-type: none; }

ol.lst-kix_m7gyp3gged0c-2 { list-style-type: none; }

ol.lst-kix_m7gyp3gged0c-3 { list-style-type: none; }

ul.lst-kix_9r3d8uancgeq-7 { list-style-type: none; }

.lst-kix_5270cv8i6nuv-8 > li::before { content: "" counter(lst-ctn-kix_5270cv8i6nuv-8, lower-roman) ". "; }

ol.lst-kix_m7gyp3gged0c-0 { list-style-type: none; }

ul.lst-kix_9r3d8uancgeq-8 { list-style-type: none; }

ol.lst-kix_m7gyp3gged0c-1 { list-style-type: none; }

ul.lst-kix_9r3d8uancgeq-5 { list-style-type: none; }

ul.lst-kix_9r3d8uancgeq-6 { list-style-type: none; }

.lst-kix_3ndwxni7n3wv-4 > li { counter-increment: lst-ctn-kix_3ndwxni7n3wv-4 1; }

.lst-kix_olo1v9h26sum-4 > li::before { content: "○  "; }

.lst-kix_dcv7ib5lvp4v-5 > li { counter-increment: lst-ctn-kix_dcv7ib5lvp4v-5 1; }

.lst-kix_rrld09yo0z41-8 > li { counter-increment: lst-ctn-kix_rrld09yo0z41-8 1; }

.lst-kix_69cgk215qz5l-0 > li::before { content: "●  "; }

.lst-kix_e6809g41048l-6 > li::before { content: "●  "; }

.lst-kix_sfybiz7pn3rx-3 > li::before { content: "●  "; }

ol.lst-kix_lcuwlsa6z8uz-7.start { counter-reset: lst-ctn-kix_lcuwlsa6z8uz-7 0; }

.lst-kix_ruhin6837alc-8 > li { counter-increment: lst-ctn-kix_ruhin6837alc-8 1; }

.lst-kix_nkn9z5o9q292-3 > li::before { content: "●  "; }

.lst-kix_3ho157wy3jxf-5 > li { counter-increment: lst-ctn-kix_3ho157wy3jxf-5 1; }

.lst-kix_nqdkqsc3oqx4-3 > li::before { content: "" counter(lst-ctn-kix_nqdkqsc3oqx4-3) ". "; }

.lst-kix_4uq1mr5t1xn5-0 > li { counter-increment: lst-ctn-kix_4uq1mr5t1xn5-0 1; }

.lst-kix_bvmitnb5swh8-8 > li { counter-increment: lst-ctn-kix_bvmitnb5swh8-8 1; }

.lst-kix_69cgk215qz5l-6 > li::before { content: "●  "; }

.lst-kix_69cgk215qz5l-4 > li::before { content: "○  "; }

.lst-kix_olo1v9h26sum-0 > li::before { content: "●  "; }

.lst-kix_oiuz0iy372u2-3 > li { counter-increment: lst-ctn-kix_oiuz0iy372u2-3 1; }

ol.lst-kix_q9wm09yqvpbs-6.start { counter-reset: lst-ctn-kix_q9wm09yqvpbs-6 0; }

ol.lst-kix_gzdu38n4pxir-8.start { counter-reset: lst-ctn-kix_gzdu38n4pxir-8 0; }

.lst-kix_nqdkqsc3oqx4-7 > li::before { content: "" counter(lst-ctn-kix_nqdkqsc3oqx4-7, lower-latin) ". "; }

.lst-kix_55mhn1ecd8zq-6 > li::before { content: "●  "; }

ol.lst-kix_xrj1sdkp3cni-2.start { counter-reset: lst-ctn-kix_xrj1sdkp3cni-2 0; }

.lst-kix_c7313u9pplkk-7 > li::before { content: "" counter(lst-ctn-kix_c7313u9pplkk-7, lower-latin) ". "; }

.lst-kix_vwmkmidzq0q1-5 > li::before { content: "" counter(lst-ctn-kix_vwmkmidzq0q1-5, lower-roman) ". "; }

.lst-kix_gn9iznjyvy0-5 > li { counter-increment: lst-ctn-kix_gn9iznjyvy0-5 1; }

.lst-kix_u8xk64vks6c8-7 > li::before { content: "○  "; }

ol.lst-kix_572earllcbds-7.start { counter-reset: lst-ctn-kix_572earllcbds-7 0; }

.lst-kix_5270cv8i6nuv-8 > li { counter-increment: lst-ctn-kix_5270cv8i6nuv-8 1; }

ol.lst-kix_tj22yequgne3-5.start { counter-reset: lst-ctn-kix_tj22yequgne3-5 0; }

.lst-kix_55mhn1ecd8zq-2 > li::before { content: "■  "; }

ol.lst-kix_c7313u9pplkk-6.start { counter-reset: lst-ctn-kix_c7313u9pplkk-6 0; }

.lst-kix_c7313u9pplkk-1 > li::before { content: "" counter(lst-ctn-kix_c7313u9pplkk-1, lower-latin) ". "; }

.lst-kix_55mhn1ecd8zq-0 > li::before { content: "●  "; }

ul.lst-kix_3yaj3fyh3cgu-0 { list-style-type: none; }

ul.lst-kix_3yaj3fyh3cgu-1 { list-style-type: none; }

ol.lst-kix_rrld09yo0z41-4.start { counter-reset: lst-ctn-kix_rrld09yo0z41-4 0; }

ol.lst-kix_gn9iznjyvy0-6.start { counter-reset: lst-ctn-kix_gn9iznjyvy0-6 0; }

ol.lst-kix_xrj1sdkp3cni-3.start { counter-reset: lst-ctn-kix_xrj1sdkp3cni-3 0; }

ul.lst-kix_3yaj3fyh3cgu-8 { list-style-type: none; }

ul.lst-kix_3yaj3fyh3cgu-6 { list-style-type: none; }

ul.lst-kix_3yaj3fyh3cgu-7 { list-style-type: none; }

ul.lst-kix_3yaj3fyh3cgu-4 { list-style-type: none; }

ul.lst-kix_3yaj3fyh3cgu-5 { list-style-type: none; }

ul.lst-kix_3yaj3fyh3cgu-2 { list-style-type: none; }

ul.lst-kix_3yaj3fyh3cgu-3 { list-style-type: none; }

ol.lst-kix_gzdu38n4pxir-0 { list-style-type: none; }

.lst-kix_ksgcgd9whg8s-4 > li { counter-increment: lst-ctn-kix_ksgcgd9whg8s-4 1; }

ol.lst-kix_gzdu38n4pxir-1 { list-style-type: none; }

.lst-kix_bvmitnb5swh8-7 > li { counter-increment: lst-ctn-kix_bvmitnb5swh8-7 1; }

ol.lst-kix_gzdu38n4pxir-2 { list-style-type: none; }

.lst-kix_uqyylbhn1m4k-7 > li { counter-increment: lst-ctn-kix_uqyylbhn1m4k-7 1; }

ol.lst-kix_gzdu38n4pxir-3 { list-style-type: none; }

ol.lst-kix_gzdu38n4pxir-4 { list-style-type: none; }

ol.lst-kix_gzdu38n4pxir-5 { list-style-type: none; }

ol.lst-kix_gzdu38n4pxir-6 { list-style-type: none; }

.lst-kix_sq2mty8y4cla-2 > li::before { content: "" counter(lst-ctn-kix_sq2mty8y4cla-2, lower-roman) ". "; }

.lst-kix_ckxnb6vf7vme-2 > li::before { content: "" counter(lst-ctn-kix_ckxnb6vf7vme-2, lower-roman) ". "; }

.lst-kix_q9wm09yqvpbs-4 > li::before { content: "" counter(lst-ctn-kix_q9wm09yqvpbs-4, lower-latin) ". "; }

.lst-kix_ckxnb6vf7vme-3 > li::before { content: "" counter(lst-ctn-kix_ckxnb6vf7vme-3) ". "; }

.lst-kix_sq2mty8y4cla-5 > li::before { content: "" counter(lst-ctn-kix_sq2mty8y4cla-5, lower-roman) ". "; }

.lst-kix_xrj1sdkp3cni-1 > li::before { content: "" counter(lst-ctn-kix_xrj1sdkp3cni-1, lower-latin) ". "; }

.lst-kix_q9wm09yqvpbs-1 > li::before { content: "" counter(lst-ctn-kix_q9wm09yqvpbs-1, lower-latin) ". "; }

ol.lst-kix_n1ny3uif9c2q-4 { list-style-type: none; }

ol.lst-kix_yt60ymksdnh5-4.start { counter-reset: lst-ctn-kix_yt60ymksdnh5-4 0; }

ol.lst-kix_n1ny3uif9c2q-3 { list-style-type: none; }

.lst-kix_q9wm09yqvpbs-0 > li::before { content: "" counter(lst-ctn-kix_q9wm09yqvpbs-0) ". "; }

ol.lst-kix_n1ny3uif9c2q-2 { list-style-type: none; }

ol.lst-kix_n1ny3uif9c2q-1 { list-style-type: none; }

ol.lst-kix_n1ny3uif9c2q-8 { list-style-type: none; }

ol.lst-kix_n1ny3uif9c2q-7 { list-style-type: none; }

ol.lst-kix_n1ny3uif9c2q-6 { list-style-type: none; }

ol.lst-kix_n1ny3uif9c2q-5 { list-style-type: none; }

ol.lst-kix_lcuwlsa6z8uz-6.start { counter-reset: lst-ctn-kix_lcuwlsa6z8uz-6 0; }

ol.lst-kix_b4yhtr5n7hga-7 { list-style-type: none; }

ul.lst-kix_15r02pw2hvsa-4 { list-style-type: none; }

ol.lst-kix_b4yhtr5n7hga-6 { list-style-type: none; }

ul.lst-kix_15r02pw2hvsa-5 { list-style-type: none; }

ol.lst-kix_b4yhtr5n7hga-5 { list-style-type: none; }

ul.lst-kix_15r02pw2hvsa-2 { list-style-type: none; }

ol.lst-kix_b4yhtr5n7hga-4 { list-style-type: none; }

ul.lst-kix_15r02pw2hvsa-3 { list-style-type: none; }

.lst-kix_5s16jregg8d-2 > li::before { content: "■  "; }

ol.lst-kix_n1ny3uif9c2q-0 { list-style-type: none; }

ul.lst-kix_15r02pw2hvsa-8 { list-style-type: none; }

ul.lst-kix_15r02pw2hvsa-6 { list-style-type: none; }

ol.lst-kix_b4yhtr5n7hga-8 { list-style-type: none; }

ul.lst-kix_15r02pw2hvsa-7 { list-style-type: none; }

.lst-kix_ckxnb6vf7vme-6 > li::before { content: "" counter(lst-ctn-kix_ckxnb6vf7vme-6) ". "; }

ul.lst-kix_15r02pw2hvsa-0 { list-style-type: none; }

ul.lst-kix_15r02pw2hvsa-1 { list-style-type: none; }

.lst-kix_5namkmhqnfpl-5 > li::before { content: "■  "; }

.lst-kix_j5huq76pqetk-2 > li { counter-increment: lst-ctn-kix_j5huq76pqetk-2 1; }

.lst-kix_j5huq76pqetk-1 > li::before { content: "" counter(lst-ctn-kix_j5huq76pqetk-1, lower-latin) ". "; }

.lst-kix_5namkmhqnfpl-2 > li::before { content: "■  "; }

ol.lst-kix_5270cv8i6nuv-5 { list-style-type: none; }

ol.lst-kix_5270cv8i6nuv-4 { list-style-type: none; }

.lst-kix_pwbhslrd67om-8 > li::before { content: "" counter(lst-ctn-kix_pwbhslrd67om-8, lower-roman) ". "; }

ol.lst-kix_xrj1sdkp3cni-8.start { counter-reset: lst-ctn-kix_xrj1sdkp3cni-8 0; }

ol.lst-kix_5270cv8i6nuv-7 { list-style-type: none; }

.lst-kix_10q7n546cbqj-1 > li { counter-increment: lst-ctn-kix_10q7n546cbqj-1 1; }

ol.lst-kix_5270cv8i6nuv-6 { list-style-type: none; }

ol.lst-kix_5270cv8i6nuv-8 { list-style-type: none; }

.lst-kix_3mskaxtv1nar-8 > li::before { content: "■  "; }

.lst-kix_s9tg2x8dz8yw-8 > li { counter-increment: lst-ctn-kix_s9tg2x8dz8yw-8 1; }

ol.lst-kix_5270cv8i6nuv-1 { list-style-type: none; }

ol.lst-kix_5270cv8i6nuv-0 { list-style-type: none; }

ol.lst-kix_5270cv8i6nuv-3 { list-style-type: none; }

ol.lst-kix_5270cv8i6nuv-2 { list-style-type: none; }

ol.lst-kix_572earllcbds-3.start { counter-reset: lst-ctn-kix_572earllcbds-3 0; }

.lst-kix_5namkmhqnfpl-1 > li::before { content: "○  "; }

.lst-kix_oiuz0iy372u2-6 > li::before { content: "" counter(lst-ctn-kix_oiuz0iy372u2-6) ". "; }

ol.lst-kix_pwbhslrd67om-7.start { counter-reset: lst-ctn-kix_pwbhslrd67om-7 0; }

ol.lst-kix_m3mg1m14r0ox-1.start { counter-reset: lst-ctn-kix_m3mg1m14r0ox-1 0; }

.lst-kix_3mskaxtv1nar-1 > li::before { content: "○  "; }

.lst-kix_w9tqx4187f4c-6 > li::before { content: "" counter(lst-ctn-kix_w9tqx4187f4c-6) ". "; }

.lst-kix_oiuz0iy372u2-3 > li::before { content: "" counter(lst-ctn-kix_oiuz0iy372u2-3) ". "; }

.lst-kix_kb150t1bns3n-8 > li::before { content: "■  "; }

.lst-kix_oiuz0iy372u2-2 > li::before { content: "" counter(lst-ctn-kix_oiuz0iy372u2-2, lower-roman) ". "; }

ol.lst-kix_mnp305eqj1wg-4.start { counter-reset: lst-ctn-kix_mnp305eqj1wg-4 0; }

ol.lst-kix_pwbhslrd67om-8.start { counter-reset: lst-ctn-kix_pwbhslrd67om-8 0; }

.lst-kix_pwbhslrd67om-4 > li::before { content: "" counter(lst-ctn-kix_pwbhslrd67om-4, lower-latin) ". "; }

.lst-kix_pwbhslrd67om-5 > li::before { content: "" counter(lst-ctn-kix_pwbhslrd67om-5, lower-roman) ". "; }

.lst-kix_3mskaxtv1nar-5 > li::before { content: "■  "; }

.lst-kix_3mskaxtv1nar-4 > li::before { content: "○  "; }

.lst-kix_pwbhslrd67om-1 > li::before { content: "" counter(lst-ctn-kix_pwbhslrd67om-1, lower-latin) ". "; }

.lst-kix_yt60ymksdnh5-8 > li::before { content: "" counter(lst-ctn-kix_yt60ymksdnh5-8, lower-roman) ". "; }

.lst-kix_brzd8bm9vgv1-0 > li::before { content: "●  "; }

.lst-kix_3yaj3fyh3cgu-1 > li::before { content: "○  "; }

.lst-kix_yt60ymksdnh5-5 > li::before { content: "" counter(lst-ctn-kix_yt60ymksdnh5-5, lower-roman) ". "; }

.lst-kix_3yaj3fyh3cgu-4 > li::before { content: "○  "; }

ol.lst-kix_b4yhtr5n7hga-3 { list-style-type: none; }

.lst-kix_re52shiykht8-1 > li::before { content: "○  "; }

.lst-kix_r9g9j9mj19b1-7 > li::before { content: "○  "; }

ol.lst-kix_b4yhtr5n7hga-2 { list-style-type: none; }

.lst-kix_yt60ymksdnh5-4 > li::before { content: "" counter(lst-ctn-kix_yt60ymksdnh5-4, lower-latin) ". "; }

ol.lst-kix_b4yhtr5n7hga-1 { list-style-type: none; }

ol.lst-kix_b4yhtr5n7hga-0 { list-style-type: none; }

.lst-kix_yt60ymksdnh5-1 > li::before { content: "" counter(lst-ctn-kix_yt60ymksdnh5-1, lower-latin) ". "; }

ol.lst-kix_pwbhslrd67om-2.start { counter-reset: lst-ctn-kix_pwbhslrd67om-2 0; }

.lst-kix_pwbhslrd67om-2 > li { counter-increment: lst-ctn-kix_pwbhslrd67om-2 1; }

.lst-kix_c7313u9pplkk-4 > li { counter-increment: lst-ctn-kix_c7313u9pplkk-4 1; }

ol.lst-kix_c7313u9pplkk-8 { list-style-type: none; }

.lst-kix_mnp305eqj1wg-3 > li { counter-increment: lst-ctn-kix_mnp305eqj1wg-3 1; }

.lst-kix_3yaj3fyh3cgu-5 > li::before { content: "■  "; }

ol.lst-kix_c7313u9pplkk-4 { list-style-type: none; }

ol.lst-kix_c7313u9pplkk-5 { list-style-type: none; }

.lst-kix_fcu0owu0u5lm-3 > li { counter-increment: lst-ctn-kix_fcu0owu0u5lm-3 1; }

ol.lst-kix_c7313u9pplkk-6 { list-style-type: none; }

ol.lst-kix_10q7n546cbqj-1.start { counter-reset: lst-ctn-kix_10q7n546cbqj-1 0; }

ol.lst-kix_c7313u9pplkk-7 { list-style-type: none; }

.lst-kix_3yaj3fyh3cgu-8 > li::before { content: "■  "; }

ol.lst-kix_c7313u9pplkk-0 { list-style-type: none; }

ol.lst-kix_c7313u9pplkk-1 { list-style-type: none; }

ol.lst-kix_c7313u9pplkk-2 { list-style-type: none; }

ol.lst-kix_xqezlaka82l9-6.start { counter-reset: lst-ctn-kix_xqezlaka82l9-6 0; }

ol.lst-kix_c7313u9pplkk-3 { list-style-type: none; }

.lst-kix_okhvdbx9vxjx-6 > li::before { content: "" counter(lst-ctn-kix_okhvdbx9vxjx-6) ". "; }

.lst-kix_okhvdbx9vxjx-3 > li { counter-increment: lst-ctn-kix_okhvdbx9vxjx-3 1; }

.lst-kix_5270cv8i6nuv-1 > li::before { content: "" counter(lst-ctn-kix_5270cv8i6nuv-1, lower-latin) ". "; }

.lst-kix_5270cv8i6nuv-5 > li::before { content: "" counter(lst-ctn-kix_5270cv8i6nuv-5, lower-roman) ". "; }

ol.lst-kix_rrld09yo0z41-0.start { counter-reset: lst-ctn-kix_rrld09yo0z41-0 0; }

.lst-kix_okhvdbx9vxjx-2 > li::before { content: "" counter(lst-ctn-kix_okhvdbx9vxjx-2, lower-roman) ". "; }

.lst-kix_oiuz0iy372u2-5 > li { counter-increment: lst-ctn-kix_oiuz0iy372u2-5 1; }

ol.lst-kix_m3mg1m14r0ox-6.start { counter-reset: lst-ctn-kix_m3mg1m14r0ox-6 0; }

ol.lst-kix_xrj1sdkp3cni-7.start { counter-reset: lst-ctn-kix_xrj1sdkp3cni-7 0; }

.lst-kix_3ndwxni7n3wv-6 > li { counter-increment: lst-ctn-kix_3ndwxni7n3wv-6 1; }

ol.lst-kix_pwbhslrd67om-3.start { counter-reset: lst-ctn-kix_pwbhslrd67om-3 0; }

ol.lst-kix_572earllcbds-2.start { counter-reset: lst-ctn-kix_572earllcbds-2 0; }

ul.lst-kix_r9g9j9mj19b1-7 { list-style-type: none; }

ul.lst-kix_r9g9j9mj19b1-8 { list-style-type: none; }

ul.lst-kix_r9g9j9mj19b1-5 { list-style-type: none; }

ul.lst-kix_r9g9j9mj19b1-6 { list-style-type: none; }

ol.lst-kix_xqezlaka82l9-1.start { counter-reset: lst-ctn-kix_xqezlaka82l9-1 0; }

.lst-kix_habx6bj0olf7-2 > li { counter-increment: lst-ctn-kix_habx6bj0olf7-2 1; }

.lst-kix_e6809g41048l-7 > li::before { content: "○  "; }

.lst-kix_tj22yequgne3-6 > li::before { content: "" counter(lst-ctn-kix_tj22yequgne3-6) ". "; }

.lst-kix_69cgk215qz5l-3 > li::before { content: "●  "; }

.lst-kix_ey0jmq1tgbhn-1 > li { counter-increment: lst-ctn-kix_ey0jmq1tgbhn-1 1; }

.lst-kix_572earllcbds-8 > li::before { content: "" counter(lst-ctn-kix_572earllcbds-8, lower-roman) ". "; }

.lst-kix_q3b8r3xg1qkx-5 > li { counter-increment: lst-ctn-kix_q3b8r3xg1qkx-5 1; }

ol.lst-kix_yt60ymksdnh5-3.start { counter-reset: lst-ctn-kix_yt60ymksdnh5-3 0; }

.lst-kix_69cgk215qz5l-7 > li::before { content: "○  "; }

ol.lst-kix_10q7n546cbqj-6.start { counter-reset: lst-ctn-kix_10q7n546cbqj-6 0; }

.lst-kix_c1i5n6q7z3d-0 > li::before { content: "●  "; }

.lst-kix_nkn9z5o9q292-0 > li::before { content: "●  "; }

.lst-kix_olo1v9h26sum-1 > li::before { content: "○  "; }

.lst-kix_nqdkqsc3oqx4-6 > li::before { content: "" counter(lst-ctn-kix_nqdkqsc3oqx4-6) ". "; }

.lst-kix_fcu0owu0u5lm-0 > li::before { content: "" counter(lst-ctn-kix_fcu0owu0u5lm-0) ". "; }

.lst-kix_vwmkmidzq0q1-2 > li::before { content: "" counter(lst-ctn-kix_vwmkmidzq0q1-2, lower-roman) ". "; }

ol.lst-kix_lcuwlsa6z8uz-1.start { counter-reset: lst-ctn-kix_lcuwlsa6z8uz-1 0; }

.lst-kix_lcuwlsa6z8uz-4 > li { counter-increment: lst-ctn-kix_lcuwlsa6z8uz-4 1; }

.lst-kix_55mhn1ecd8zq-3 > li::before { content: "●  "; }

.lst-kix_yt60ymksdnh5-1 > li { counter-increment: lst-ctn-kix_yt60ymksdnh5-1 1; }

.lst-kix_u8xk64vks6c8-6 > li::before { content: "●  "; }

.lst-kix_o0kdhzzdksr6-2 > li::before { content: "■  "; }

.lst-kix_o0kdhzzdksr6-6 > li::before { content: "●  "; }

.lst-kix_sfybiz7pn3rx-0 > li::before { content: "●  "; }

.lst-kix_s9tg2x8dz8yw-7 > li::before { content: "" counter(lst-ctn-kix_s9tg2x8dz8yw-7, lower-latin) ". "; }

ol.lst-kix_xqezlaka82l9-2.start { counter-reset: lst-ctn-kix_xqezlaka82l9-2 0; }

ol.lst-kix_m3mg1m14r0ox-4.start { counter-reset: lst-ctn-kix_m3mg1m14r0ox-4 0; }

ul.lst-kix_e6809g41048l-8 { list-style-type: none; }

ul.lst-kix_e6809g41048l-7 { list-style-type: none; }

ul.lst-kix_e6809g41048l-6 { list-style-type: none; }

ul.lst-kix_e6809g41048l-5 { list-style-type: none; }

.lst-kix_9r3d8uancgeq-2 > li::before { content: "■  "; }

.lst-kix_9r3d8uancgeq-6 > li::before { content: "●  "; }

.lst-kix_572earllcbds-6 > li { counter-increment: lst-ctn-kix_572earllcbds-6 1; }

ol.lst-kix_xqezlaka82l9-3.start { counter-reset: lst-ctn-kix_xqezlaka82l9-3 0; }

ol.lst-kix_lcuwlsa6z8uz-2.start { counter-reset: lst-ctn-kix_lcuwlsa6z8uz-2 0; }

.lst-kix_habx6bj0olf7-7 > li { counter-increment: lst-ctn-kix_habx6bj0olf7-7 1; }

.lst-kix_rrld09yo0z41-6 > li { counter-increment: lst-ctn-kix_rrld09yo0z41-6 1; }

.lst-kix_t1ql394g7cq6-3 > li { counter-increment: lst-ctn-kix_t1ql394g7cq6-3 1; }

ol.lst-kix_10q7n546cbqj-4.start { counter-reset: lst-ctn-kix_10q7n546cbqj-4 0; }

ul.lst-kix_e6809g41048l-0 { list-style-type: none; }

.lst-kix_gzdu38n4pxir-4 > li { counter-increment: lst-ctn-kix_gzdu38n4pxir-4 1; }

ul.lst-kix_e6809g41048l-4 { list-style-type: none; }

ul.lst-kix_e6809g41048l-3 { list-style-type: none; }

.lst-kix_j5huq76pqetk-0 > li { counter-increment: lst-ctn-kix_j5huq76pqetk-0 1; }

ul.lst-kix_e6809g41048l-2 { list-style-type: none; }

ul.lst-kix_e6809g41048l-1 { list-style-type: none; }

.lst-kix_cmz9dkb8w9u4-8 > li::before { content: "■  "; }

ol.lst-kix_vwmkmidzq0q1-7.start { counter-reset: lst-ctn-kix_vwmkmidzq0q1-7 0; }

.lst-kix_sq2mty8y4cla-3 > li { counter-increment: lst-ctn-kix_sq2mty8y4cla-3 1; }

.lst-kix_cmz9dkb8w9u4-5 > li::before { content: "■  "; }

.lst-kix_dcv7ib5lvp4v-3 > li::before { content: "" counter(lst-ctn-kix_dcv7ib5lvp4v-3) ". "; }

ol.lst-kix_tj22yequgne3-6.start { counter-reset: lst-ctn-kix_tj22yequgne3-6 0; }

.lst-kix_b4yhtr5n7hga-8 > li::before { content: "" counter(lst-ctn-kix_b4yhtr5n7hga-8, lower-roman) ". "; }

.lst-kix_dcv7ib5lvp4v-0 > li::before { content: "" counter(lst-ctn-kix_dcv7ib5lvp4v-0) ". "; }

.lst-kix_b4yhtr5n7hga-5 > li::before { content: "" counter(lst-ctn-kix_b4yhtr5n7hga-5, lower-roman) ". "; }

ul.lst-kix_sijhq5esqs8x-0 { list-style-type: none; }

.lst-kix_4uq1mr5t1xn5-1 > li::before { content: "" counter(lst-ctn-kix_4uq1mr5t1xn5-1, lower-latin) ". "; }

ol.lst-kix_ruhin6837alc-7 { list-style-type: none; }

ol.lst-kix_ruhin6837alc-8 { list-style-type: none; }

ul.lst-kix_sijhq5esqs8x-4 { list-style-type: none; }

ol.lst-kix_q9wm09yqvpbs-7.start { counter-reset: lst-ctn-kix_q9wm09yqvpbs-7 0; }

ol.lst-kix_ruhin6837alc-5 { list-style-type: none; }

ul.lst-kix_sijhq5esqs8x-3 { list-style-type: none; }

ol.lst-kix_ruhin6837alc-6 { list-style-type: none; }

ul.lst-kix_sijhq5esqs8x-2 { list-style-type: none; }

ol.lst-kix_lcuwlsa6z8uz-3.start { counter-reset: lst-ctn-kix_lcuwlsa6z8uz-3 0; }

ol.lst-kix_ruhin6837alc-3 { list-style-type: none; }

ul.lst-kix_sijhq5esqs8x-1 { list-style-type: none; }

ol.lst-kix_ruhin6837alc-4 { list-style-type: none; }

ul.lst-kix_sijhq5esqs8x-8 { list-style-type: none; }

ol.lst-kix_ruhin6837alc-1 { list-style-type: none; }

ul.lst-kix_sijhq5esqs8x-7 { list-style-type: none; }

.lst-kix_4uq1mr5t1xn5-4 > li::before { content: "" counter(lst-ctn-kix_4uq1mr5t1xn5-4, lower-latin) ". "; }

ol.lst-kix_ruhin6837alc-2 { list-style-type: none; }

ul.lst-kix_sijhq5esqs8x-6 { list-style-type: none; }

ol.lst-kix_mnp305eqj1wg-7.start { counter-reset: lst-ctn-kix_mnp305eqj1wg-7 0; }

ol.lst-kix_yt60ymksdnh5-7.start { counter-reset: lst-ctn-kix_yt60ymksdnh5-7 0; }

ul.lst-kix_sijhq5esqs8x-5 { list-style-type: none; }

ol.lst-kix_ruhin6837alc-0 { list-style-type: none; }

.lst-kix_27lagi0g2vk-0 > li::before { content: "●  "; }

ol.lst-kix_q9wm09yqvpbs-6 { list-style-type: none; }

ol.lst-kix_ksgcgd9whg8s-5.start { counter-reset: lst-ctn-kix_ksgcgd9whg8s-5 0; }

ol.lst-kix_q9wm09yqvpbs-5 { list-style-type: none; }

ol.lst-kix_q9wm09yqvpbs-8 { list-style-type: none; }

ol.lst-kix_q9wm09yqvpbs-7 { list-style-type: none; }

.lst-kix_4uq1mr5t1xn5-6 > li { counter-increment: lst-ctn-kix_4uq1mr5t1xn5-6 1; }

.lst-kix_4uq1mr5t1xn5-7 > li::before { content: "" counter(lst-ctn-kix_4uq1mr5t1xn5-7, lower-latin) ". "; }

.lst-kix_w9tqx4187f4c-8 > li { counter-increment: lst-ctn-kix_w9tqx4187f4c-8 1; }

ol.lst-kix_q9wm09yqvpbs-0 { list-style-type: none; }

ol.lst-kix_q9wm09yqvpbs-2 { list-style-type: none; }

ol.lst-kix_q9wm09yqvpbs-1 { list-style-type: none; }

ol.lst-kix_xqezlaka82l9-8.start { counter-reset: lst-ctn-kix_xqezlaka82l9-8 0; }

ol.lst-kix_q9wm09yqvpbs-4 { list-style-type: none; }

ol.lst-kix_q9wm09yqvpbs-3 { list-style-type: none; }

ol.lst-kix_c7313u9pplkk-7.start { counter-reset: lst-ctn-kix_c7313u9pplkk-7 0; }

.lst-kix_gpfkle35f9g6-7 > li::before { content: "" counter(lst-ctn-kix_gpfkle35f9g6-7, lower-latin) ". "; }

ol.lst-kix_572earllcbds-6.start { counter-reset: lst-ctn-kix_572earllcbds-6 0; }

.lst-kix_s9tg2x8dz8yw-5 > li { counter-increment: lst-ctn-kix_s9tg2x8dz8yw-5 1; }

.lst-kix_dcv7ib5lvp4v-6 > li::before { content: "" counter(lst-ctn-kix_dcv7ib5lvp4v-6) ". "; }

.lst-kix_ljmndakz6mcr-4 > li { counter-increment: lst-ctn-kix_ljmndakz6mcr-4 1; }

.lst-kix_rrld09yo0z41-8 > li::before { content: "" counter(lst-ctn-kix_rrld09yo0z41-8, lower-roman) ". "; }

.lst-kix_620io0vozd8n-2 > li::before { content: "■  "; }

.lst-kix_xqezlaka82l9-8 > li { counter-increment: lst-ctn-kix_xqezlaka82l9-8 1; }

.lst-kix_zgiykejnxm8t-0 > li::before { content: "●  "; }

.lst-kix_572earllcbds-2 > li::before { content: "" counter(lst-ctn-kix_572earllcbds-2, lower-roman) ". "; }

.lst-kix_zgiykejnxm8t-7 > li::before { content: "○  "; }

.lst-kix_620io0vozd8n-5 > li::before { content: "■  "; }

.lst-kix_rrld09yo0z41-1 > li::before { content: "" counter(lst-ctn-kix_rrld09yo0z41-1, lower-latin) ". "; }

ol.lst-kix_tj22yequgne3-1.start { counter-reset: lst-ctn-kix_tj22yequgne3-1 0; }

.lst-kix_mnp305eqj1wg-4 > li::before { content: "" counter(lst-ctn-kix_mnp305eqj1wg-4, lower-latin) ". "; }

.lst-kix_572earllcbds-5 > li::before { content: "" counter(lst-ctn-kix_572earllcbds-5, lower-roman) ". "; }

.lst-kix_bvmitnb5swh8-2 > li { counter-increment: lst-ctn-kix_bvmitnb5swh8-2 1; }

.lst-kix_620io0vozd8n-8 > li::before { content: "■  "; }

.lst-kix_gpfkle35f9g6-4 > li::before { content: "" counter(lst-ctn-kix_gpfkle35f9g6-4, lower-latin) ". "; }

.lst-kix_uqyylbhn1m4k-5 > li { counter-increment: lst-ctn-kix_uqyylbhn1m4k-5 1; }

.lst-kix_10q7n546cbqj-7 > li { counter-increment: lst-ctn-kix_10q7n546cbqj-7 1; }

.lst-kix_bseh3kjlzqme-7 > li { counter-increment: lst-ctn-kix_bseh3kjlzqme-7 1; }

.lst-kix_uqyylbhn1m4k-3 > li::before { content: "" counter(lst-ctn-kix_uqyylbhn1m4k-3) ". "; }

.lst-kix_t1ql394g7cq6-8 > li::before { content: "" counter(lst-ctn-kix_t1ql394g7cq6-8, lower-roman) ". "; }

ol.lst-kix_xrj1sdkp3cni-6.start { counter-reset: lst-ctn-kix_xrj1sdkp3cni-6 0; }

.lst-kix_27lagi0g2vk-3 > li::before { content: "●  "; }

ol.lst-kix_ksgcgd9whg8s-0.start { counter-reset: lst-ctn-kix_ksgcgd9whg8s-0 0; }

.lst-kix_3oqw8rm66zow-2 > li::before { content: "■  "; }

.lst-kix_uqyylbhn1m4k-0 > li::before { content: "" counter(lst-ctn-kix_uqyylbhn1m4k-0) ". "; }

.lst-kix_3oqw8rm66zow-5 > li::before { content: "■  "; }

.lst-kix_tj22yequgne3-2 > li { counter-increment: lst-ctn-kix_tj22yequgne3-2 1; }

.lst-kix_tj22yequgne3-5 > li { counter-increment: lst-ctn-kix_tj22yequgne3-5 1; }

.lst-kix_mnp305eqj1wg-6 > li { counter-increment: lst-ctn-kix_mnp305eqj1wg-6 1; }

.lst-kix_mnp305eqj1wg-1 > li::before { content: "" counter(lst-ctn-kix_mnp305eqj1wg-1, lower-latin) ". "; }

.lst-kix_t1ql394g7cq6-1 > li::before { content: "" counter(lst-ctn-kix_t1ql394g7cq6-1, lower-latin) ". "; }

ol.lst-kix_c7313u9pplkk-2.start { counter-reset: lst-ctn-kix_c7313u9pplkk-2 0; }

ol.lst-kix_vwmkmidzq0q1-2.start { counter-reset: lst-ctn-kix_vwmkmidzq0q1-2 0; }

.lst-kix_xqezlaka82l9-5 > li { counter-increment: lst-ctn-kix_xqezlaka82l9-5 1; }

.lst-kix_85dwzw7kxv5h-8 > li { counter-increment: lst-ctn-kix_85dwzw7kxv5h-8 1; }

.lst-kix_xc5d5ew3cd2w-7 > li::before { content: "" counter(lst-ctn-kix_xc5d5ew3cd2w-7, lower-latin) ". "; }

ol.lst-kix_c7313u9pplkk-5.start { counter-reset: lst-ctn-kix_c7313u9pplkk-5 0; }

ol.lst-kix_j5huq76pqetk-7.start { counter-reset: lst-ctn-kix_j5huq76pqetk-7 0; }

.lst-kix_ljmndakz6mcr-0 > li::before { content: "" counter(lst-ctn-kix_ljmndakz6mcr-0) ". "; }

ol.lst-kix_vwmkmidzq0q1-0.start { counter-reset: lst-ctn-kix_vwmkmidzq0q1-0 0; }

ol.lst-kix_rrld09yo0z41-3.start { counter-reset: lst-ctn-kix_rrld09yo0z41-3 0; }

.lst-kix_lcuwlsa6z8uz-7 > li { counter-increment: lst-ctn-kix_lcuwlsa6z8uz-7 1; }

ol.lst-kix_gn9iznjyvy0-5.start { counter-reset: lst-ctn-kix_gn9iznjyvy0-5 0; }

.lst-kix_xrj1sdkp3cni-7 > li { counter-increment: lst-ctn-kix_xrj1sdkp3cni-7 1; }

.lst-kix_bseh3kjlzqme-4 > li { counter-increment: lst-ctn-kix_bseh3kjlzqme-4 1; }

.lst-kix_10q7n546cbqj-4 > li { counter-increment: lst-ctn-kix_10q7n546cbqj-4 1; }

.lst-kix_s9tg2x8dz8yw-4 > li::before { content: "" counter(lst-ctn-kix_s9tg2x8dz8yw-4, lower-latin) ". "; }

.lst-kix_tj22yequgne3-3 > li::before { content: "" counter(lst-ctn-kix_tj22yequgne3-3) ". "; }

ol.lst-kix_xrj1sdkp3cni-1.start { counter-reset: lst-ctn-kix_xrj1sdkp3cni-1 0; }

ol.lst-kix_gn9iznjyvy0-8 { list-style-type: none; }

.lst-kix_uqyylbhn1m4k-6 > li::before { content: "" counter(lst-ctn-kix_uqyylbhn1m4k-6) ". "; }

.lst-kix_w9tqx4187f4c-5 > li { counter-increment: lst-ctn-kix_w9tqx4187f4c-5 1; }

ol.lst-kix_gn9iznjyvy0-4 { list-style-type: none; }

ol.lst-kix_gn9iznjyvy0-5 { list-style-type: none; }

ol.lst-kix_gn9iznjyvy0-6 { list-style-type: none; }

ol.lst-kix_gn9iznjyvy0-7 { list-style-type: none; }

ol.lst-kix_gn9iznjyvy0-0 { list-style-type: none; }

ol.lst-kix_gn9iznjyvy0-1 { list-style-type: none; }

ol.lst-kix_gn9iznjyvy0-2 { list-style-type: none; }

.lst-kix_c1i5n6q7z3d-3 > li::before { content: "●  "; }

ol.lst-kix_gn9iznjyvy0-3 { list-style-type: none; }

.lst-kix_fcu0owu0u5lm-3 > li::before { content: "" counter(lst-ctn-kix_fcu0owu0u5lm-3) ". "; }

ol.lst-kix_tj22yequgne3-4.start { counter-reset: lst-ctn-kix_tj22yequgne3-4 0; }

ol.lst-kix_xrj1sdkp3cni-4.start { counter-reset: lst-ctn-kix_xrj1sdkp3cni-4 0; }

.lst-kix_ruhin6837alc-5 > li::before { content: "" counter(lst-ctn-kix_ruhin6837alc-5, lower-roman) ". "; }

.lst-kix_okhvdbx9vxjx-6 > li { counter-increment: lst-ctn-kix_okhvdbx9vxjx-6 1; }

.lst-kix_q3b8r3xg1qkx-3 > li::before { content: "" counter(lst-ctn-kix_q3b8r3xg1qkx-3) ". "; }

ul.lst-kix_5s16jregg8d-1 { list-style-type: none; }

ul.lst-kix_5s16jregg8d-2 { list-style-type: none; }

.lst-kix_ekvfn9dhk9qx-7 > li::before { content: "○  "; }

ul.lst-kix_5s16jregg8d-0 { list-style-type: none; }

ol.lst-kix_gn9iznjyvy0-7.start { counter-reset: lst-ctn-kix_gn9iznjyvy0-7 0; }

.lst-kix_m7gyp3gged0c-6 > li { counter-increment: lst-ctn-kix_m7gyp3gged0c-6 1; }

.lst-kix_ekvfn9dhk9qx-1 > li::before { content: "○  "; }

.lst-kix_q26h1rehak49-7 > li::before { content: "○  "; }

.lst-kix_gzdu38n4pxir-5 > li::before { content: "" counter(lst-ctn-kix_gzdu38n4pxir-5, lower-roman) ". "; }

ul.lst-kix_e1iec80scof-8 { list-style-type: none; }

ul.lst-kix_5s16jregg8d-7 { list-style-type: none; }

ul.lst-kix_e1iec80scof-7 { list-style-type: none; }

ul.lst-kix_5s16jregg8d-8 { list-style-type: none; }

ul.lst-kix_5s16jregg8d-5 { list-style-type: none; }

.lst-kix_ruhin6837alc-3 > li { counter-increment: lst-ctn-kix_ruhin6837alc-3 1; }

ul.lst-kix_5s16jregg8d-6 { list-style-type: none; }

ul.lst-kix_5s16jregg8d-3 { list-style-type: none; }

.lst-kix_q26h1rehak49-1 > li::before { content: "○  "; }

ol.lst-kix_ksgcgd9whg8s-3.start { counter-reset: lst-ctn-kix_ksgcgd9whg8s-3 0; }

ul.lst-kix_5s16jregg8d-4 { list-style-type: none; }

ul.lst-kix_e1iec80scof-2 { list-style-type: none; }

ul.lst-kix_e1iec80scof-1 { list-style-type: none; }

ul.lst-kix_e1iec80scof-0 { list-style-type: none; }

ul.lst-kix_e1iec80scof-6 { list-style-type: none; }

ol.lst-kix_lcuwlsa6z8uz-8.start { counter-reset: lst-ctn-kix_lcuwlsa6z8uz-8 0; }

ul.lst-kix_e1iec80scof-5 { list-style-type: none; }

ol.lst-kix_rrld09yo0z41-5.start { counter-reset: lst-ctn-kix_rrld09yo0z41-5 0; }

ul.lst-kix_e1iec80scof-4 { list-style-type: none; }

.lst-kix_igutqwst0xn-2 > li::before { content: "■  "; }

ul.lst-kix_e1iec80scof-3 { list-style-type: none; }

.lst-kix_5namkmhqnfpl-8 > li::before { content: "■  "; }

.lst-kix_8e86lum2i6eo-0 > li::before { content: "●  "; }

.lst-kix_m3mg1m14r0ox-1 > li::before { content: "" counter(lst-ctn-kix_m3mg1m14r0ox-1, lower-latin) ". "; }

ul.lst-kix_8e86lum2i6eo-8 { list-style-type: none; }

.lst-kix_l80e6xnoww9k-7 > li { counter-increment: lst-ctn-kix_l80e6xnoww9k-7 1; }

.lst-kix_15r02pw2hvsa-2 > li::before { content: "■  "; }

ul.lst-kix_8e86lum2i6eo-7 { list-style-type: none; }

ul.lst-kix_8e86lum2i6eo-6 { list-style-type: none; }

ul.lst-kix_8e86lum2i6eo-5 { list-style-type: none; }

ul.lst-kix_8e86lum2i6eo-4 { list-style-type: none; }

ul.lst-kix_8e86lum2i6eo-3 { list-style-type: none; }

.lst-kix_3ho157wy3jxf-3 > li::before { content: "" counter(lst-ctn-kix_3ho157wy3jxf-3) ". "; }

ul.lst-kix_8e86lum2i6eo-2 { list-style-type: none; }

ul.lst-kix_8e86lum2i6eo-1 { list-style-type: none; }

ul.lst-kix_8e86lum2i6eo-0 { list-style-type: none; }

.lst-kix_olegludlmu4-4 > li::before { content: "○  "; }

.lst-kix_igutqwst0xn-8 > li::before { content: "■  "; }

.lst-kix_gzdu38n4pxir-1 > li { counter-increment: lst-ctn-kix_gzdu38n4pxir-1 1; }

ol.lst-kix_572earllcbds-8.start { counter-reset: lst-ctn-kix_572earllcbds-8 0; }

.lst-kix_572earllcbds-3 > li { counter-increment: lst-ctn-kix_572earllcbds-3 1; }

.lst-kix_15r02pw2hvsa-8 > li::before { content: "■  "; }

ol.lst-kix_gzdu38n4pxir-7 { list-style-type: none; }

.lst-kix_5s16jregg8d-8 > li::before { content: "■  "; }

ol.lst-kix_gzdu38n4pxir-8 { list-style-type: none; }

.lst-kix_q9wm09yqvpbs-7 > li::before { content: "" counter(lst-ctn-kix_q9wm09yqvpbs-7, lower-latin) ". "; }

.lst-kix_85dwzw7kxv5h-2 > li { counter-increment: lst-ctn-kix_85dwzw7kxv5h-2 1; }

.lst-kix_5s16jregg8d-5 > li::before { content: "■  "; }

.lst-kix_lcuwlsa6z8uz-1 > li::before { content: "" counter(lst-ctn-kix_lcuwlsa6z8uz-1, lower-latin) ". "; }

ol.lst-kix_q9wm09yqvpbs-4.start { counter-reset: lst-ctn-kix_q9wm09yqvpbs-4 0; }

ol.lst-kix_rrld09yo0z41-7.start { counter-reset: lst-ctn-kix_rrld09yo0z41-7 0; }

.lst-kix_xrj1sdkp3cni-4 > li::before { content: "" counter(lst-ctn-kix_xrj1sdkp3cni-4, lower-latin) ". "; }

ol.lst-kix_gzdu38n4pxir-6.start { counter-reset: lst-ctn-kix_gzdu38n4pxir-6 0; }

ol.lst-kix_vwmkmidzq0q1-4.start { counter-reset: lst-ctn-kix_vwmkmidzq0q1-4 0; }

.lst-kix_ey0jmq1tgbhn-0 > li::before { content: "" counter(lst-ctn-kix_ey0jmq1tgbhn-0) ". "; }

ol.lst-kix_ksgcgd9whg8s-8.start { counter-reset: lst-ctn-kix_ksgcgd9whg8s-8 0; }

.lst-kix_lcuwlsa6z8uz-4 > li::before { content: "" counter(lst-ctn-kix_lcuwlsa6z8uz-4, lower-latin) ". "; }

ol.lst-kix_j5huq76pqetk-0.start { counter-reset: lst-ctn-kix_j5huq76pqetk-0 0; }

ol.lst-kix_xqezlaka82l9-3 { list-style-type: none; }

ol.lst-kix_xqezlaka82l9-4 { list-style-type: none; }

ol.lst-kix_xqezlaka82l9-5 { list-style-type: none; }

ol.lst-kix_xqezlaka82l9-6 { list-style-type: none; }

ul.lst-kix_ekvfn9dhk9qx-8 { list-style-type: none; }

ol.lst-kix_xqezlaka82l9-0 { list-style-type: none; }

ul.lst-kix_ekvfn9dhk9qx-7 { list-style-type: none; }

ol.lst-kix_xqezlaka82l9-1 { list-style-type: none; }

.lst-kix_j5huq76pqetk-7 > li::before { content: "" counter(lst-ctn-kix_j5huq76pqetk-7, lower-latin) ". "; }

.lst-kix_uqyylbhn1m4k-2 > li { counter-increment: lst-ctn-kix_uqyylbhn1m4k-2 1; }

ol.lst-kix_xqezlaka82l9-2 { list-style-type: none; }

ul.lst-kix_ekvfn9dhk9qx-4 { list-style-type: none; }

ul.lst-kix_ekvfn9dhk9qx-3 { list-style-type: none; }

ul.lst-kix_ekvfn9dhk9qx-6 { list-style-type: none; }

ul.lst-kix_ekvfn9dhk9qx-5 { list-style-type: none; }

ol.lst-kix_xqezlaka82l9-7 { list-style-type: none; }

ul.lst-kix_ekvfn9dhk9qx-0 { list-style-type: none; }

ol.lst-kix_xqezlaka82l9-8 { list-style-type: none; }

ul.lst-kix_ekvfn9dhk9qx-2 { list-style-type: none; }

ul.lst-kix_ekvfn9dhk9qx-1 { list-style-type: none; }

.lst-kix_ruhin6837alc-0 > li { counter-increment: lst-ctn-kix_ruhin6837alc-0 1; }

.lst-kix_j5huq76pqetk-4 > li::before { content: "" counter(lst-ctn-kix_j5huq76pqetk-4, lower-latin) ". "; }

ol.lst-kix_gzdu38n4pxir-1.start { counter-reset: lst-ctn-kix_gzdu38n4pxir-1 0; }

.lst-kix_dcv7ib5lvp4v-8 > li { counter-increment: lst-ctn-kix_dcv7ib5lvp4v-8 1; }

ol.lst-kix_c7313u9pplkk-4.start { counter-reset: lst-ctn-kix_c7313u9pplkk-4 0; }

.lst-kix_3ndwxni7n3wv-1 > li::before { content: "" counter(lst-ctn-kix_3ndwxni7n3wv-1, lower-latin) ". "; }

.lst-kix_m7gyp3gged0c-3 > li { counter-increment: lst-ctn-kix_m7gyp3gged0c-3 1; }

.lst-kix_3ndwxni7n3wv-4 > li::before { content: "" counter(lst-ctn-kix_3ndwxni7n3wv-4, lower-latin) ". "; }

.lst-kix_nqdkqsc3oqx4-4 > li { counter-increment: lst-ctn-kix_nqdkqsc3oqx4-4 1; }

ol.lst-kix_gn9iznjyvy0-4.start { counter-reset: lst-ctn-kix_gn9iznjyvy0-4 0; }

ol.lst-kix_tj22yequgne3-8.start { counter-reset: lst-ctn-kix_tj22yequgne3-8 0; }

ol.lst-kix_c7313u9pplkk-3.start { counter-reset: lst-ctn-kix_c7313u9pplkk-3 0; }

ol.lst-kix_j5huq76pqetk-5.start { counter-reset: lst-ctn-kix_j5huq76pqetk-5 0; }

ol.lst-kix_gzdu38n4pxir-7.start { counter-reset: lst-ctn-kix_gzdu38n4pxir-7 0; }

.lst-kix_bseh3kjlzqme-1 > li { counter-increment: lst-ctn-kix_bseh3kjlzqme-1 1; }

.lst-kix_xrj1sdkp3cni-4 > li { counter-increment: lst-ctn-kix_xrj1sdkp3cni-4 1; }

.lst-kix_n1ny3uif9c2q-2 > li { counter-increment: lst-ctn-kix_n1ny3uif9c2q-2 1; }

.lst-kix_w9tqx4187f4c-3 > li::before { content: "" counter(lst-ctn-kix_w9tqx4187f4c-3) ". "; }

.lst-kix_nkn9z5o9q292-6 > li::before { content: "●  "; }

.lst-kix_r9g9j9mj19b1-1 > li::before { content: "○  "; }

.lst-kix_r9g9j9mj19b1-4 > li::before { content: "○  "; }

.lst-kix_vwmkmidzq0q1-2 > li { counter-increment: lst-ctn-kix_vwmkmidzq0q1-2 1; }

.lst-kix_85dwzw7kxv5h-0 > li::before { content: "" counter(lst-ctn-kix_85dwzw7kxv5h-0) ". "; }

ol.lst-kix_q9wm09yqvpbs-5.start { counter-reset: lst-ctn-kix_q9wm09yqvpbs-5 0; }

.lst-kix_fcu0owu0u5lm-6 > li { counter-increment: lst-ctn-kix_fcu0owu0u5lm-6 1; }

.lst-kix_brzd8bm9vgv1-6 > li::before { content: "●  "; }

ol.lst-kix_gn9iznjyvy0-3.start { counter-reset: lst-ctn-kix_gn9iznjyvy0-3 0; }

.lst-kix_q9wm09yqvpbs-2 > li { counter-increment: lst-ctn-kix_q9wm09yqvpbs-2 1; }

ol.lst-kix_rrld09yo0z41-8.start { counter-reset: lst-ctn-kix_rrld09yo0z41-8 0; }

.lst-kix_w9tqx4187f4c-0 > li::before { content: "" counter(lst-ctn-kix_w9tqx4187f4c-0) ". "; }

.lst-kix_kb150t1bns3n-2 > li::before { content: "■  "; }

.lst-kix_re52shiykht8-7 > li::before { content: "○  "; }

ol.lst-kix_gzdu38n4pxir-0.start { counter-reset: lst-ctn-kix_gzdu38n4pxir-0 0; }

.lst-kix_85dwzw7kxv5h-3 > li::before { content: "" counter(lst-ctn-kix_85dwzw7kxv5h-3) ". "; }

ol.lst-kix_ksgcgd9whg8s-7.start { counter-reset: lst-ctn-kix_ksgcgd9whg8s-7 0; }

ol.lst-kix_j5huq76pqetk-6.start { counter-reset: lst-ctn-kix_j5huq76pqetk-6 0; }

.lst-kix_xc5d5ew3cd2w-4 > li::before { content: "" counter(lst-ctn-kix_xc5d5ew3cd2w-4, lower-latin) ". "; }

.lst-kix_kb150t1bns3n-5 > li::before { content: "■  "; }

.lst-kix_brzd8bm9vgv1-3 > li::before { content: "●  "; }

.lst-kix_re52shiykht8-4 > li::before { content: "○  "; }

.lst-kix_xrj1sdkp3cni-7 > li::before { content: "" counter(lst-ctn-kix_xrj1sdkp3cni-7, lower-latin) ". "; }

.lst-kix_or4x01rk566h-1 > li::before { content: "●  "; }

.lst-kix_xc5d5ew3cd2w-1 > li::before { content: "" counter(lst-ctn-kix_xc5d5ew3cd2w-1, lower-latin) ". "; }

ol.lst-kix_gzdu38n4pxir-2.start { counter-reset: lst-ctn-kix_gzdu38n4pxir-2 0; }

ol.lst-kix_j5huq76pqetk-4.start { counter-reset: lst-ctn-kix_j5huq76pqetk-4 0; }

.lst-kix_s9tg2x8dz8yw-2 > li { counter-increment: lst-ctn-kix_s9tg2x8dz8yw-2 1; }

ol.lst-kix_gn9iznjyvy0-2.start { counter-reset: lst-ctn-kix_gn9iznjyvy0-2 0; }

.lst-kix_c7313u9pplkk-1 > li { counter-increment: lst-ctn-kix_c7313u9pplkk-1 1; }

.lst-kix_c1i5n6q7z3d-6 > li::before { content: "●  "; }

.lst-kix_fcu0owu0u5lm-6 > li::before { content: "" counter(lst-ctn-kix_fcu0owu0u5lm-6) ". "; }

.lst-kix_utdw00xskxog-4 > li::before { content: "○  "; }

ol.lst-kix_ckxnb6vf7vme-0 { list-style-type: none; }

ol.lst-kix_ckxnb6vf7vme-1 { list-style-type: none; }

ol.lst-kix_ckxnb6vf7vme-2 { list-style-type: none; }

.lst-kix_olo1v9h26sum-7 > li::before { content: "○  "; }

ol.lst-kix_ckxnb6vf7vme-3 { list-style-type: none; }

ol.lst-kix_habx6bj0olf7-8 { list-style-type: none; }

ol.lst-kix_ckxnb6vf7vme-4 { list-style-type: none; }

ol.lst-kix_vwmkmidzq0q1-3.start { counter-reset: lst-ctn-kix_vwmkmidzq0q1-3 0; }

ol.lst-kix_ckxnb6vf7vme-5 { list-style-type: none; }

.lst-kix_s9tg2x8dz8yw-1 > li::before { content: "" counter(lst-ctn-kix_s9tg2x8dz8yw-1, lower-latin) ". "; }

.lst-kix_tj22yequgne3-0 > li::before { content: "" counter(lst-ctn-kix_tj22yequgne3-0) ". "; }

ol.lst-kix_ckxnb6vf7vme-6 { list-style-type: none; }

.lst-kix_w9tqx4187f4c-2 > li { counter-increment: lst-ctn-kix_w9tqx4187f4c-2 1; }

.lst-kix_gzdu38n4pxir-2 > li::before { content: "" counter(lst-ctn-kix_gzdu38n4pxir-2, lower-roman) ". "; }

ol.lst-kix_ckxnb6vf7vme-7 { list-style-type: none; }

ol.lst-kix_ckxnb6vf7vme-8 { list-style-type: none; }

ol.lst-kix_gzdu38n4pxir-5.start { counter-reset: lst-ctn-kix_gzdu38n4pxir-5 0; }

.lst-kix_4uq1mr5t1xn5-3 > li { counter-increment: lst-ctn-kix_4uq1mr5t1xn5-3 1; }

ol.lst-kix_q9wm09yqvpbs-0.start { counter-reset: lst-ctn-kix_q9wm09yqvpbs-0 0; }

.lst-kix_sfybiz7pn3rx-6 > li::before { content: "●  "; }

.lst-kix_3ho157wy3jxf-2 > li { counter-increment: lst-ctn-kix_3ho157wy3jxf-2 1; }

ol.lst-kix_q9wm09yqvpbs-3.start { counter-reset: lst-ctn-kix_q9wm09yqvpbs-3 0; }

ol.lst-kix_habx6bj0olf7-6 { list-style-type: none; }

ol.lst-kix_m3mg1m14r0ox-8 { list-style-type: none; }

.lst-kix_ruhin6837alc-2 > li::before { content: "" counter(lst-ctn-kix_ruhin6837alc-2, lower-roman) ". "; }

.lst-kix_ljmndakz6mcr-7 > li { counter-increment: lst-ctn-kix_ljmndakz6mcr-7 1; }

ol.lst-kix_habx6bj0olf7-7 { list-style-type: none; }

ol.lst-kix_m3mg1m14r0ox-7 { list-style-type: none; }

ol.lst-kix_j5huq76pqetk-1.start { counter-reset: lst-ctn-kix_j5huq76pqetk-1 0; }

ol.lst-kix_habx6bj0olf7-4 { list-style-type: none; }

ol.lst-kix_m3mg1m14r0ox-6 { list-style-type: none; }

ol.lst-kix_habx6bj0olf7-5 { list-style-type: none; }

ol.lst-kix_m3mg1m14r0ox-5 { list-style-type: none; }

ol.lst-kix_habx6bj0olf7-2 { list-style-type: none; }

ol.lst-kix_m3mg1m14r0ox-4 { list-style-type: none; }

ol.lst-kix_habx6bj0olf7-3 { list-style-type: none; }

ol.lst-kix_m3mg1m14r0ox-3 { list-style-type: none; }

ol.lst-kix_habx6bj0olf7-0 { list-style-type: none; }

ol.lst-kix_m3mg1m14r0ox-2 { list-style-type: none; }

ol.lst-kix_habx6bj0olf7-1 { list-style-type: none; }

ol.lst-kix_m3mg1m14r0ox-1 { list-style-type: none; }

ol.lst-kix_j5huq76pqetk-2.start { counter-reset: lst-ctn-kix_j5huq76pqetk-2 0; }

ol.lst-kix_m3mg1m14r0ox-0 { list-style-type: none; }

ol.lst-kix_572earllcbds-0 { list-style-type: none; }

.lst-kix_ekvfn9dhk9qx-4 > li::before { content: "○  "; }

ol.lst-kix_572earllcbds-2 { list-style-type: none; }

ol.lst-kix_gzdu38n4pxir-4.start { counter-reset: lst-ctn-kix_gzdu38n4pxir-4 0; }

.lst-kix_f9adxqm8wtcr-2 > li::before { content: "■  "; }

ol.lst-kix_572earllcbds-1 { list-style-type: none; }

.lst-kix_sq2mty8y4cla-6 > li { counter-increment: lst-ctn-kix_sq2mty8y4cla-6 1; }

.lst-kix_olegludlmu4-7 > li::before { content: "○  "; }

.lst-kix_igutqwst0xn-5 > li::before { content: "■  "; }

.lst-kix_n1ny3uif9c2q-0 > li::before { content: "" counter(lst-ctn-kix_n1ny3uif9c2q-0) ". "; }

.lst-kix_e1iec80scof-7 > li::before { content: "○  "; }

ol.lst-kix_c7313u9pplkk-0.start { counter-reset: lst-ctn-kix_c7313u9pplkk-0 0; }

.lst-kix_ckxnb6vf7vme-5 > li { counter-increment: lst-ctn-kix_ckxnb6vf7vme-5 1; }

.lst-kix_habx6bj0olf7-0 > li::before { content: "" counter(lst-ctn-kix_habx6bj0olf7-0) ". "; }

.lst-kix_q26h1rehak49-4 > li::before { content: "○  "; }

.lst-kix_nqdkqsc3oqx4-0 > li::before { content: "" counter(lst-ctn-kix_nqdkqsc3oqx4-0) ". "; }

ul.lst-kix_o2mt2qmw9cun-2 { list-style-type: none; }

.lst-kix_3ho157wy3jxf-6 > li::before { content: "" counter(lst-ctn-kix_3ho157wy3jxf-6) ". "; }

ul.lst-kix_o2mt2qmw9cun-1 { list-style-type: none; }

ul.lst-kix_o2mt2qmw9cun-0 { list-style-type: none; }

.lst-kix_c7313u9pplkk-4 > li::before { content: "" counter(lst-ctn-kix_c7313u9pplkk-4, lower-latin) ". "; }

ol.lst-kix_gn9iznjyvy0-0.start { counter-reset: lst-ctn-kix_gn9iznjyvy0-0 0; }

ol.lst-kix_572earllcbds-8 { list-style-type: none; }

ol.lst-kix_vwmkmidzq0q1-6.start { counter-reset: lst-ctn-kix_vwmkmidzq0q1-6 0; }

ol.lst-kix_572earllcbds-7 { list-style-type: none; }

.lst-kix_vwmkmidzq0q1-8 > li::before { content: "" counter(lst-ctn-kix_vwmkmidzq0q1-8, lower-roman) ". "; }

ul.lst-kix_o2mt2qmw9cun-8 { list-style-type: none; }

ul.lst-kix_o2mt2qmw9cun-7 { list-style-type: none; }

ol.lst-kix_572earllcbds-4 { list-style-type: none; }

.lst-kix_q3b8r3xg1qkx-6 > li::before { content: "" counter(lst-ctn-kix_q3b8r3xg1qkx-6) ". "; }

ul.lst-kix_o2mt2qmw9cun-6 { list-style-type: none; }

ol.lst-kix_572earllcbds-3 { list-style-type: none; }

.lst-kix_85dwzw7kxv5h-5 > li { counter-increment: lst-ctn-kix_85dwzw7kxv5h-5 1; }

ul.lst-kix_o2mt2qmw9cun-5 { list-style-type: none; }

ol.lst-kix_q9wm09yqvpbs-2.start { counter-reset: lst-ctn-kix_q9wm09yqvpbs-2 0; }

ol.lst-kix_572earllcbds-6 { list-style-type: none; }

ul.lst-kix_o2mt2qmw9cun-4 { list-style-type: none; }

ol.lst-kix_572earllcbds-5 { list-style-type: none; }

ul.lst-kix_o2mt2qmw9cun-3 { list-style-type: none; }

.lst-kix_15r02pw2hvsa-5 > li::before { content: "■  "; }

.lst-kix_l80e6xnoww9k-4 > li { counter-increment: lst-ctn-kix_l80e6xnoww9k-4 1; }

ol.lst-kix_j5huq76pqetk-3.start { counter-reset: lst-ctn-kix_j5huq76pqetk-3 0; }

.lst-kix_yt60ymksdnh5-7 > li { counter-increment: lst-ctn-kix_yt60ymksdnh5-7 1; }

.lst-kix_rrld09yo0z41-0 > li { counter-increment: lst-ctn-kix_rrld09yo0z41-0 1; }

.lst-kix_sijhq5esqs8x-3 > li::before { content: "●  "; }

ol.lst-kix_vwmkmidzq0q1-5.start { counter-reset: lst-ctn-kix_vwmkmidzq0q1-5 0; }

.lst-kix_ksgcgd9whg8s-1 > li { counter-increment: lst-ctn-kix_ksgcgd9whg8s-1 1; }

ol.lst-kix_q9wm09yqvpbs-1.start { counter-reset: lst-ctn-kix_q9wm09yqvpbs-1 0; }

ol.lst-kix_gzdu38n4pxir-3.start { counter-reset: lst-ctn-kix_gzdu38n4pxir-3 0; }

.lst-kix_572earllcbds-0 > li { counter-increment: lst-ctn-kix_572earllcbds-0 1; }
------MultipartBoundary--l5EobY2HOwU8mZA5J1Z99hAuscRO8VrQdxYCAoloXq----
Content-Type: image/png
Content-Transfer-Encoding: binary
Content-Location: https://ssl.gstatic.com/docs/common/mobileweb_sprite1.png

PNG

   IHDR   $      	  	UIDATh[[lWΙٛn8Ik'm\*VEBj51/T5PZ&чJ	*ch ܀B)I+!XNHbr:w<mvv9Ǔx#6=s?|{h2ca;~i7GBTDTvIԶzl
hﾽb~f ҽ*[
>*>z˅ۦz,3?0u%K/ݚ=sl,  XGfѪڎꂒ"ԷU
L*ݟ(9 ?/(ϥdb}۽TAq(&c~@̸
($LDҩ:?slxt4eHY'L];tzMc;#) >bs{SSL.#T<@Sc $T	ǝ)90*e,Ok=DDAi?3b'_	 OP&^`WX?nf0[ט> 2P_"cTd"$`i6' WjEŒF	V*4  +7I ;f,RlxLwMÕ=f13dtb zM }b-`"@2 )q.wJQ- ޙX=r1/caOڭxfֆ
x ӏUbX'Wo}fPb3\=~*kULi_mpIe=$S5~ zS0McH^Z&:9	([k5|ǡ8=ˮI$;=e?:HoFy,FXQcC7 aN#Q3ZGH:9%m@	8U#'ږKN{ūvF±01ߜFˮӳN,PcT^>z_<^KGc5yۉg_I49f1|Yډ4FF,NGuA)jUXd:8A$lkC5 0' S [=+	tbbٱѓfcPg%w-\c)m*
"<%i1 lBDc1(/3sbΙ4  CkW!BUde6V $ 9iMX\٩\AN1Ba>O \';2LV(\v"]Le6 \Ėe|v$``hʂ)gzEN2W_Vnhhp~`*,#rDvNjU,bO-a-ST?+%ߘqw2Yȋ<#je\(܃PTbC1BDP1<& xܞeUGcH@cdp	c#g93#;^K@Kct$ ߿1 i0yOZh@}..M.'|f|FŌsM̂дfki0[o&0T`l` B'
LZfbS~8X'7"l[S7Ļ;3A6 킀xgW5l|k?XFk?H <tw{@.ڀ`Qgbd突M.(]#%@mTÓ Dpy*냉CAA`Kٸ0A+>p^[:n?b,
L/c@ұ+&3lޒ<0])ᜂKhd VWmI7+c\,)<d[.6fN	Xc!M O$ˀ[`ua/+{BV)+KBAJB<EnPJ>ݮP*?Z/0pŹu|ԾUB)]+KƔ 8s?Z+r`כּeMԶ2Cy|MfS&9ѽ̄i/%ڝfP'սµ[=ߌX?V/$ 5c,b1HBSȿE+5@{
4(:]<AvRcX,T"*5?9PLF!ɀe,Xx#f(iuu:d@No.6yv-u5BS7 E˲zų+l`tK+lY$i"{	̧	#-006~e7y)jj u:W[  oFb-kV`ac%`    IENDB`
------MultipartBoundary--l5EobY2HOwU8mZA5J1Z99hAuscRO8VrQdxYCAoloXq----
Content-Type: text/css
Content-Transfer-Encoding: binary
Content-Location: https://fonts.googleapis.com/css?family=Google+Sans

@charset "utf-8";

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJl1pynAESo4b4o.woff2") format("woff2"); unicode-range: U+308, U+530-58F, U+2010, U+2024, U+25CC, U+FB13-FB17; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJl3pynAESo4b4o.woff2") format("woff2"); unicode-range: U+951-952, U+964-965, U+980-9FE, U+1CD0, U+1CD2, U+1CD5-1CD6, U+1CD8, U+1CE1, U+1CEA, U+1CED, U+1CF2, U+1CF5-1CF7, U+200C-200D, U+20B9, U+25CC, U+A8F1; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJlKpynAESo4b4o.woff2") format("woff2"); unicode-range: U+2C7, U+2D8-2D9, U+2DB, U+307, U+1400-167F, U+18B0-18F5, U+25CC, U+11AB0-11ABF; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: local("Google Sans Regular"), local("GoogleSans-Regular"), url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJlopynAESo4b4o.woff2") format("woff2"); unicode-range: U+460-52F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: local("Google Sans Regular"), local("GoogleSans-Regular"), url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJlhpynAESo4b4o.woff2") format("woff2"); unicode-range: U+301, U+400-45F, U+490-491, U+4B0-4B1, U+2116; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJlkpynAESo4b4o.woff2") format("woff2"); unicode-range: U+900-97F, U+1CD0-1CF9, U+200C-200D, U+20A8, U+20B9, U+20F0, U+25CC, U+A830-A839, U+A8E0-A8FF, U+11B00-11B09; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJl0pynAESo4b4o.woff2") format("woff2"); unicode-range: U+30E, U+1200-1399, U+2D80-2DDE, U+AB01-AB2E, U+1E7E0-1E7E6, U+1E7E8-1E7EB, U+1E7ED-1E7EE, U+1E7F0-1E7FE; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJl6pynAESo4b4o.woff2") format("woff2"); unicode-range: U+589, U+10A0-10FF, U+1C90-1CBA, U+1CBD-1CBF, U+205A, U+2D00-2D2F, U+2E31; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: local("Google Sans Regular"), local("GoogleSans-Regular"), url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJlppynAESo4b4o.woff2") format("woff2"); unicode-range: U+1F00-1FFF; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: local("Google Sans Regular"), local("GoogleSans-Regular"), url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJlmpynAESo4b4o.woff2") format("woff2"); unicode-range: U+370-377, U+37A-37F, U+384-38A, U+38C, U+38E-3A1, U+3A3-3FF; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJl-pynAESo4b4o.woff2") format("woff2"); unicode-range: U+951-952, U+964-965, U+A80-AFF, U+200C-200D, U+20B9, U+25CC, U+A830-A839; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJlGpynAESo4b4o.woff2") format("woff2"); unicode-range: U+951-952, U+964-965, U+A01-A76, U+200C-200D, U+20B9, U+25CC, U+262C, U+A830-A839; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: local("Google Sans Regular"), local("GoogleSans-Regular"), url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJlnpynAESo4b4o.woff2") format("woff2"); unicode-range: U+307-308, U+590-5FF, U+200C-2010, U+20AA, U+25CC, U+FB1D-FB4F; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJlupynAESo4b4o.woff2") format("woff2"); unicode-range: U+1780-17FF, U+19E0-19FF, U+200C-200D, U+25CC; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJlspynAESo4b4o.woff2") format("woff2"); unicode-range: U+E81-EDF, U+200C-200D, U+25CC; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJl9pynAESo4b4o.woff2") format("woff2"); unicode-range: U+307, U+323, U+951-952, U+964-965, U+D00-D7F, U+1CDA, U+1CF2, U+200C-200D, U+20B9, U+25CC, U+A830-A832; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJl8pynAESo4b4o.woff2") format("woff2"); unicode-range: U+951-952, U+964-965, U+B01-B77, U+1CDA, U+1CF2, U+200C-200D, U+20B9, U+25CC; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJl4pynAESo4b4o.woff2") format("woff2"); unicode-range: U+964-965, U+D81-DF4, U+1CF2, U+200C-200D, U+25CC, U+111E1-111F4; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJkLpynAESo4b4o.woff2") format("woff2"); unicode-range: U+1-C, U+E-1F, U+7F-9F, U+20DD-20E0, U+20E2-20E4, U+2150-218F, U+2190, U+2192, U+2194-2199, U+21AF, U+21E6-21F0, U+21F3, U+2218-2219, U+2299, U+22C4-22C6, U+2300-243F, U+2440-244A, U+2460-24FF, U+25A0-27BF, U+2800-28FF, U+2921-2922, U+2981, U+29BF, U+29EB, U+2B00-2BFF, U+4DC0-4DFF, U+FFF9-FFFB, U+10140-1018E, U+10190-1019C, U+101A0, U+101D0-101FD, U+102E0-102FB, U+10E60-10E7E, U+1D2C0-1D2D3, U+1D2E0-1D37F, U+1F000-1F0FF, U+1F100-1F1AD, U+1F1E6-1F1FF, U+1F30D-1F30F, U+1F315, U+1F31C, U+1F31E, U+1F320-1F32C, U+1F336, U+1F378, U+1F37D, U+1F382, U+1F393-1F39F, U+1F3A7-1F3A8, U+1F3AC-1F3AF, U+1F3C2, U+1F3C4-1F3C6, U+1F3CA-1F3CE, U+1F3D4-1F3E0, U+1F3ED, U+1F3F1-1F3F3, U+1F3F5-1F3F7, U+1F408, U+1F415, U+1F41F, U+1F426, U+1F43F, U+1F441-1F442, U+1F444, U+1F446-1F449, U+1F44C-1F44E, U+1F453, U+1F46A, U+1F47D, U+1F4A3, U+1F4B0, U+1F4B3, U+1F4B9, U+1F4BB, U+1F4BF, U+1F4C8-1F4CB, U+1F4D6, U+1F4DA, U+1F4DF, U+1F4E3-1F4E6, U+1F4EA-1F4ED, U+1F4F7, U+1F4F9-1F4FB, U+1F4FD-1F4FE, U+1F503, U+1F507-1F50B, U+1F50D, U+1F512-1F513, U+1F53E-1F54A, U+1F54F-1F5FA, U+1F610, U+1F650-1F67F, U+1F687, U+1F68D, U+1F691, U+1F694, U+1F698, U+1F6AD, U+1F6B2, U+1F6B9-1F6BA, U+1F6BC, U+1F6C6-1F6CF, U+1F6D3-1F6D7, U+1F6E0-1F6EA, U+1F6F0-1F6F3, U+1F6F7-1F6FC, U+1F700-1F7FF, U+1F800-1F80B, U+1F810-1F847, U+1F850-1F859, U+1F860-1F887, U+1F890-1F8AD, U+1F8B0-1F8BB, U+1F8C0-1F8C1, U+1F900-1F90B, U+1F93B, U+1F946, U+1F984, U+1F996, U+1F9E9, U+1FA00-1FA6F, U+1FA70-1FA7C, U+1FA80-1FA89, U+1FA8F-1FAC6, U+1FACE-1FADC, U+1FADF-1FAE9, U+1FAF0-1FAF8, U+1FB00-1FBFF; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJlzpynAESo4b4o.woff2") format("woff2"); unicode-range: U+964-965, U+B82-BFA, U+200C-200D, U+20B9, U+25CC; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJl5pynAESo4b4o.woff2") format("woff2"); unicode-range: U+951-952, U+964-965, U+C00-C7F, U+1CDA, U+1CF2, U+200C-200D, U+25CC; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJlxpynAESo4b4o.woff2") format("woff2"); unicode-range: U+2D7, U+303, U+331, U+E01-E5B, U+200C-200D, U+25CC; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: local("Google Sans Regular"), local("GoogleSans-Regular"), url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJlqpynAESo4b4o.woff2") format("woff2"); unicode-range: U+102-103, U+110-111, U+128-129, U+168-169, U+1A0-1A1, U+1AF-1B0, U+300-301, U+303-304, U+308-309, U+323, U+329, U+1EA0-1EF9, U+20AB; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: local("Google Sans Regular"), local("GoogleSans-Regular"), url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJlrpynAESo4b4o.woff2") format("woff2"); unicode-range: U+100-2BA, U+2BD-2C5, U+2C7-2CC, U+2CE-2D7, U+2DD-2FF, U+304, U+308, U+329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF; }

@font-face { font-family: "Google Sans"; font-style: normal; font-weight: 400; src: local("Google Sans Regular"), local("GoogleSans-Regular"), url("https://fonts.gstatic.com/s/googlesans/v67/4Ua_rENHsxJlGDuGo1OIlJfC6l_24rlCK1Yo_Iqcsih3SAyH6cAwhX9RFD48TE63OOYKtrwEIJllpynAESo4.woff2") format("woff2"); unicode-range: U+0-FF, U+131, U+152-153, U+2BB-2BC, U+2C6, U+2DA, U+2DC, U+304, U+308, U+329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD; }
------MultipartBoundary--l5EobY2HOwU8mZA5J1Z99hAuscRO8VrQdxYCAoloXq----
Content-Type: text/css
Content-Transfer-Encoding: binary
Content-Location: cid:css-055338e0-39fb-46ac-b2bf-a7e19edebd0d@mhtml.blink

@charset "utf-8";

@import url("https://fonts.googleapis.com/css?family=Google+Sans");

.docs-ml-promotion { z-index: 1002; }

.docs-ml-header { z-index: 1; }

.docs-ml-icon { direction: ltr; display: inline-block; text-align: left; overflow: hidden; position: relative; vertical-align: middle; }

.docs-ml-img::before { content: url("https://ssl.gstatic.com/docs/common/mobileweb_sprite1.png"); }

.docs-ml-img-container { height: 156px; position: absolute; width: 36px; }

.docs-ml-docs-logo-icon { left: 0px; top: -36px; }

.docs-ml-sheets-logo-icon { left: 0px; top: 0px; }

.docs-ml-slides-logo-icon { left: 0px; top: -96px; }

.docs-ml-arrow-back-icon { left: 0px; top: -132px; }

.docs-ml-edit-icon { left: 0px; top: -72px; }

@media screen and (-webkit-min-device-pixel-ratio: 2) {
  .docs-ml-img { content: url("https://ssl.gstatic.com/docs/common/mobileweb_sprite1.png"); }
  .docs-ml-img-container { height: 156px; position: absolute; width: 36px; }
  .docs-ml-docs-logo-icon { left: 0px; top: -36px; }
  .docs-ml-sheets-logo-icon { left: 0px; top: 0px; }
  .docs-ml-slides-logo-icon { left: 0px; top: -96px; }
  .docs-ml-arrow-back-icon { left: 0px; top: -132px; }
  .docs-ml-edit-icon { left: 0px; top: -72px; }
}

.docs-ml-header { background: rgb(249, 249, 249); border-bottom: 1px solid rgb(203, 203, 203); box-shadow: rgba(0, 0, 0, 0.1) 0px 1px 1px; box-sizing: border-box; font-family: "Google Sans", Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; padding: 4px 0px; position: fixed; left: 0px; top: 0px; width: 100%; }

.docs-ml-header-icon { height: 24px; opacity: 0.6; width: 24px; }

.docs-ml-header-icon-container { padding: 12px; }

.docs-ml-header-item { display: inline-block; vertical-align: middle; }

.docs-ml-header-drive-link { padding-left: 4px; }

body[dir="rtl"] .docs-ml-arrow-back-dir { transform: scaleX(-1); }

.docs-ml-header-document-title { box-sizing: border-box; line-height: 24px; padding: 0px 12px; width: calc(100% - 104px); }

.docs-ml-header-document-title-text { font-size: 20px; font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

.docs-ml-header-edit-button { float: right; padding-right: 4px; }

.docs-ml-promotion { background: rgb(255, 255, 255); bottom: 0px; box-shadow: rgba(0, 0, 0, 0.4) 0px 4px 12px; font-family: Arial, Helvetica, sans-serif; left: 0px; position: fixed; width: 100%; }

.docs-ml-promotion-off-screen { transform: translateY(100%); }

.docs-ml-promotion-shown { transform: translateY(0px); transition: transform 333ms cubic-bezier(0.4, 0, 0.2, 1); }

.docs-ml-promotion-dismissed { transform: translateY(100%); box-shadow: none; }

.docs-ml-promotion-no-horizontal-scroll { overflow-x: hidden; }

.docs-ml-promotion-header { display: table; padding: 24px 24px 0px; }

.docs-ml-promotion-app-icon-container { display: table-cell; }

.docs-ml-promotion-app-icon { height: 36px; width: 36px; }

@media (min-width: 600px) {
  .docs-ml-promotion-app-icon { transform: scale(1.33); }
}

.docs-ml-promotion-text { display: table-cell; padding-left: 20px; vertical-align: top; }

.docs-ml-promotion-text-heading { color: rgba(0, 0, 0, 0.87); font-size: 16px; font-weight: 700; padding-bottom: 7px; }

.docs-ml-promotion-text-body { color: rgba(0, 0, 0, 0.87); font-size: 14px; }

.docs-ml-promotion-action-row { float: right; margin-top: 6px; padding: 8px 24px; }

.docs-ml-promotion-action-row-desktop { margin-top: 6px; }

.docs-ml-promotion-action-container { display: inline-block; height: 48px; margin: 6px 4px; vertical-align: middle; }

.docs-ml-promotion-action-button { display: inline-block; font-size: 14px; font-weight: 500; padding: 9px 12px; vertical-align: middle; }

.docs-ml-promotion-action-button-wrapper:focus { outline-color: rgb(214, 214, 214); }

.docs-ml-promotion-action-button.docs-ml-promotion-yes-button { background-color: rgb(66, 133, 244); border-radius: 4px; color: rgb(249, 249, 249); border: 1px solid transparent; }

.docs-ml-promotion-action-button.docs-ml-promotion-yes-button:active { background-color: rgb(25, 103, 210); }

.docs-ml-promotion-action-button.docs-ml-promotion-no-button { background-color: rgb(249, 249, 249); color: rgb(95, 99, 104); border-radius: 4px; border: 1px solid rgb(218, 220, 224); }

.docs-ml-promotion-action-button.docs-ml-promotion-no-button:active { background-color: rgb(245, 245, 245); }

.docs-ml-promotion.desktop { text-align: center; }

@media (orientation: portrait) {
  .docs-ml-promotion.desktop { padding-top: 56px; padding-bottom: 80px; }
}

@media (orientation: landscape) {
  .docs-ml-promotion.desktop { padding-top: 36px; padding-bottom: 56px; }
}

.docs-ml-promotion-heading-desktop { font-family: "Google Sans"; font-size: 18px; font-weight: 700; color: rgb(32, 33, 36); padding-top: 18px; padding-bottom: 10px; line-height: 1.5; max-width: 360px; margin: 0px auto; }

@media (orientation: landscape) {
  .docs-ml-promotion-heading-desktop { padding-top: 0px; max-width: none; }
}

.docs-ml-promotion-text-body-desktop { font-size: 14px; line-height: 1.5; color: rgb(95, 99, 104); padding-bottom: 10px; }

.docs-icon.docs-ml-promotion-desktop-icon { height: 40px; width: 40px; transform: scale(2.5); transform-origin: center top; }

.docs-icon-ml-promotion-icon-container-desktop { height: 100px; width: 100px; margin-left: auto; margin-right: auto; }

@media (orientation: landscape) {
  .docs-icon-ml-promotion-icon-container-desktop { display: inline-block; vertical-align: top; }
  .docs-ml-promotion-description-desktop { display: inline-block; vertical-align: top; text-align: left; padding-left: 39px; max-width: 645px; }
}

@media (orientation: landscape) {
  .docs-ml-promotion-action-row-desktop { margin-left: -8px; }
}

.docs-ml-promotion-action-row-desktop .docs-ml-promotion-action-container { margin: 6px 8px; font-family: "Google Sans"; }

.docs-ml-promotion-action-row-desktop .docs-ml-promotion-action-button-wrapper:focus { outline: none; }

.docs-ml-promotion-action-button.docs-ml-promotion-yes-button.docs-ml-promotion-app-themed { border-radius: 4px; box-shadow: none; box-sizing: border-box; font-family: "Google Sans", Roboto, RobotoDraft, Helvetica, Arial, sans-serif; font-weight: 500; font-size: 14px; height: 36px; letter-spacing: 0.25px; line-height: 16px; padding: 9px 24px 11px; background: rgb(26, 115, 232); color: rgb(255, 255, 255); border: 1px solid transparent !important; }

.docs-ml-promotion-action-button.docs-ml-promotion-no-button.docs-ml-promotion-app-themed { border-radius: 4px; box-shadow: none; box-sizing: border-box; font-family: "Google Sans", Roboto, RobotoDraft, Helvetica, Arial, sans-serif; font-weight: 500; font-size: 14px; height: 36px; letter-spacing: 0.25px; line-height: 16px; padding: 9px 24px 11px; background: rgb(255, 255, 255); color: rgb(26, 115, 232); border: 1px solid rgb(218, 220, 224) !important; }

.docs-ml-promotion-action-button-wrapper:focus .docs-ml-promotion-action-button.docs-ml-promotion-yes-button.docs-ml-promotion-app-themed { color: rgb(255, 255, 255); background: rgb(80, 148, 237); box-shadow: rgba(66, 133, 244, 0.15) 0px 1px 3px 1px; }

.docs-ml-promotion-action-button-wrapper:focus .docs-ml-promotion-action-button.docs-ml-promotion-no-button.docs-ml-promotion-app-themed { border-radius: 4px; box-shadow: none; box-sizing: border-box; font-family: "Google Sans", Roboto, RobotoDraft, Helvetica, Arial, sans-serif; font-weight: 500; font-size: 14px; height: 36px; letter-spacing: 0.25px; line-height: 16px; padding: 9px 24px 11px; background: rgb(233, 241, 254); border: 1px solid rgb(193, 216, 251) !important; }

.docsshared-no-download .docsshared-no-select-when-no-download, .docsshared-no-select { -webkit-user-drag: none; user-select: none; }

.docsshared-disable-image-copy canvas, .docsshared-disable-image-copy image, .docsshared-disable-image-copy img { pointer-events: none; }
------MultipartBoundary--l5EobY2HOwU8mZA5J1Z99hAuscRO8VrQdxYCAoloXq----
Content-Type: text/css
Content-Transfer-Encoding: binary
Content-Location: cid:css-43bb071c-f06d-4f89-bd95-88e4c87a6213@mhtml.blink

@charset "utf-8";

html { overflow: auto; }

body { margin: 0px; overflow: hidden; overflow-wrap: break-word; }

.app-container { height: 100%; margin-top: 57px; overflow: auto; }

.doc { padding: 20px 12px 0px; position: relative; }

.doc .doc-content { margin: auto; padding: 24px 0px !important; max-width: 770px !important; }
------MultipartBoundary--l5EobY2HOwU8mZA5J1Z99hAuscRO8VrQdxYCAoloXq------
